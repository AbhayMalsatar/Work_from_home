{"ast":null,"code":"import { __assign, __read, __extends, __spreadArray, __awaiter, __generator, __values, __rest } from 'tslib';\nimport EventEmitter from 'eventemitter3';\nimport { mat4, vec4, vec3, mat3, quat as quat$1, vec2 } from 'gl-matrix';\nimport { isNumber, distanceSquareRoot, isString, isNil, clamp, getTotalLength, min, max, isNumberEqual, mod, normalizePath, path2Curve, equalizeSegments, getDrawDirection, reverseCurve, clonePath, getRotatedCurve, isArray, isBoolean, isObject, isUndefined, getPointAtLength } from '@antv/util';\nimport * as d3 from 'd3-color';\nimport { arcBox, cubicBox, quadBox, polylineLength, lineLength, linePointAt } from '@antv/g-math';\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nvar rbush = {\n  exports: {}\n};\n(function (module, exports) {\n  (function (global, factory) {\n    module.exports = factory();\n  })(commonjsGlobal, function () {\n    function quickselect(arr, k, left, right, compare) {\n      quickselectStep(arr, k, left || 0, right || arr.length - 1, compare || defaultCompare);\n    }\n    function quickselectStep(arr, k, left, right, compare) {\n      while (right > left) {\n        if (right - left > 600) {\n          var n = right - left + 1;\n          var m = k - left + 1;\n          var z = Math.log(n);\n          var s = 0.5 * Math.exp(2 * z / 3);\n          var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n          var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n          var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n          quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n        var t = arr[k];\n        var i = left;\n        var j = right;\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) {\n          swap(arr, left, right);\n        }\n        while (i < j) {\n          swap(arr, i, j);\n          i++;\n          j--;\n          while (compare(arr[i], t) < 0) {\n            i++;\n          }\n          while (compare(arr[j], t) > 0) {\n            j--;\n          }\n        }\n        if (compare(arr[left], t) === 0) {\n          swap(arr, left, j);\n        } else {\n          j++;\n          swap(arr, j, right);\n        }\n        if (j <= k) {\n          left = j + 1;\n        }\n        if (k <= j) {\n          right = j - 1;\n        }\n      }\n    }\n    function swap(arr, i, j) {\n      var tmp = arr[i];\n      arr[i] = arr[j];\n      arr[j] = tmp;\n    }\n    function defaultCompare(a, b) {\n      return a < b ? -1 : a > b ? 1 : 0;\n    }\n    var RBush = function RBush(maxEntries) {\n      if (maxEntries === void 0) maxEntries = 9;\n\n      // max entries in a node is 9 by default; min node fill is 40% for best performance\n      this._maxEntries = Math.max(4, maxEntries);\n      this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n      this.clear();\n    };\n    RBush.prototype.all = function all() {\n      return this._all(this.data, []);\n    };\n    RBush.prototype.search = function search(bbox) {\n      var node = this.data;\n      var result = [];\n      if (!intersects(bbox, node)) {\n        return result;\n      }\n      var toBBox = this.toBBox;\n      var nodesToSearch = [];\n      while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n          var child = node.children[i];\n          var childBBox = node.leaf ? toBBox(child) : child;\n          if (intersects(bbox, childBBox)) {\n            if (node.leaf) {\n              result.push(child);\n            } else if (contains(bbox, childBBox)) {\n              this._all(child, result);\n            } else {\n              nodesToSearch.push(child);\n            }\n          }\n        }\n        node = nodesToSearch.pop();\n      }\n      return result;\n    };\n    RBush.prototype.collides = function collides(bbox) {\n      var node = this.data;\n      if (!intersects(bbox, node)) {\n        return false;\n      }\n      var nodesToSearch = [];\n      while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n          var child = node.children[i];\n          var childBBox = node.leaf ? this.toBBox(child) : child;\n          if (intersects(bbox, childBBox)) {\n            if (node.leaf || contains(bbox, childBBox)) {\n              return true;\n            }\n            nodesToSearch.push(child);\n          }\n        }\n        node = nodesToSearch.pop();\n      }\n      return false;\n    };\n    RBush.prototype.load = function load(data) {\n      if (!(data && data.length)) {\n        return this;\n      }\n      if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n          this.insert(data[i]);\n        }\n        return this;\n      }\n\n      // recursively build the tree with the given data from scratch using OMT algorithm\n      var node = this._build(data.slice(), 0, data.length - 1, 0);\n      if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n      } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n      } else {\n        if (this.data.height < node.height) {\n          // swap trees if inserted one is bigger\n          var tmpNode = this.data;\n          this.data = node;\n          node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n      }\n      return this;\n    };\n    RBush.prototype.insert = function insert(item) {\n      if (item) {\n        this._insert(item, this.data.height - 1);\n      }\n      return this;\n    };\n    RBush.prototype.clear = function clear() {\n      this.data = createNode([]);\n      return this;\n    };\n    RBush.prototype.remove = function remove(item, equalsFn) {\n      if (!item) {\n        return this;\n      }\n      var node = this.data;\n      var bbox = this.toBBox(item);\n      var path = [];\n      var indexes = [];\n      var i, parent, goingUp;\n\n      // depth-first iterative tree traversal\n      while (node || path.length) {\n        if (!node) {\n          // go up\n          node = path.pop();\n          parent = path[path.length - 1];\n          i = indexes.pop();\n          goingUp = true;\n        }\n        if (node.leaf) {\n          // check current node\n          var index = findItem(item, node.children, equalsFn);\n          if (index !== -1) {\n            // item found, remove the item and condense tree upwards\n            node.children.splice(index, 1);\n            path.push(node);\n            this._condense(path);\n            return this;\n          }\n        }\n        if (!goingUp && !node.leaf && contains(node, bbox)) {\n          // go down\n          path.push(node);\n          indexes.push(i);\n          i = 0;\n          parent = node;\n          node = node.children[0];\n        } else if (parent) {\n          // go right\n          i++;\n          node = parent.children[i];\n          goingUp = false;\n        } else {\n          node = null;\n        } // nothing found\n      }\n      return this;\n    };\n    RBush.prototype.toBBox = function toBBox(item) {\n      return item;\n    };\n    RBush.prototype.compareMinX = function compareMinX(a, b) {\n      return a.minX - b.minX;\n    };\n    RBush.prototype.compareMinY = function compareMinY(a, b) {\n      return a.minY - b.minY;\n    };\n    RBush.prototype.toJSON = function toJSON() {\n      return this.data;\n    };\n    RBush.prototype.fromJSON = function fromJSON(data) {\n      this.data = data;\n      return this;\n    };\n    RBush.prototype._all = function _all(node, result) {\n      var nodesToSearch = [];\n      while (node) {\n        if (node.leaf) {\n          result.push.apply(result, node.children);\n        } else {\n          nodesToSearch.push.apply(nodesToSearch, node.children);\n        }\n        node = nodesToSearch.pop();\n      }\n      return result;\n    };\n    RBush.prototype._build = function _build(items, left, right, height) {\n      var N = right - left + 1;\n      var M = this._maxEntries;\n      var node;\n      if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n      }\n      if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n      }\n      node = createNode([]);\n      node.leaf = false;\n      node.height = height;\n\n      // split the items into M mostly square tiles\n\n      var N2 = Math.ceil(N / M);\n      var N1 = N2 * Math.ceil(Math.sqrt(M));\n      multiSelect(items, left, right, N1, this.compareMinX);\n      for (var i = left; i <= right; i += N1) {\n        var right2 = Math.min(i + N1 - 1, right);\n        multiSelect(items, i, right2, N2, this.compareMinY);\n        for (var j = i; j <= right2; j += N2) {\n          var right3 = Math.min(j + N2 - 1, right2);\n\n          // pack each entry recursively\n          node.children.push(this._build(items, j, right3, height - 1));\n        }\n      }\n      calcBBox(node, this.toBBox);\n      return node;\n    };\n    RBush.prototype._chooseSubtree = function _chooseSubtree(bbox, node, level, path) {\n      while (true) {\n        path.push(node);\n        if (node.leaf || path.length - 1 === level) {\n          break;\n        }\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = void 0;\n        for (var i = 0; i < node.children.length; i++) {\n          var child = node.children[i];\n          var area = bboxArea(child);\n          var enlargement = enlargedArea(bbox, child) - area;\n\n          // choose entry with the least area enlargement\n          if (enlargement < minEnlargement) {\n            minEnlargement = enlargement;\n            minArea = area < minArea ? area : minArea;\n            targetNode = child;\n          } else if (enlargement === minEnlargement) {\n            // otherwise choose one with the smallest area\n            if (area < minArea) {\n              minArea = area;\n              targetNode = child;\n            }\n          }\n        }\n        node = targetNode || node.children[0];\n      }\n      return node;\n    };\n    RBush.prototype._insert = function _insert(item, level, isNode) {\n      var bbox = isNode ? item : this.toBBox(item);\n      var insertPath = [];\n\n      // find the best node for accommodating the item, saving all nodes along the path too\n      var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n      // put the item into the node\n      node.children.push(item);\n      extend(node, bbox);\n\n      // split on node overflow; propagate upwards if necessary\n      while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n          this._split(insertPath, level);\n          level--;\n        } else {\n          break;\n        }\n      }\n\n      // adjust bboxes along the insertion path\n      this._adjustParentBBoxes(bbox, insertPath, level);\n    };\n\n    // split overflowed node into two\n    RBush.prototype._split = function _split(insertPath, level) {\n      var node = insertPath[level];\n      var M = node.children.length;\n      var m = this._minEntries;\n      this._chooseSplitAxis(node, m, M);\n      var splitIndex = this._chooseSplitIndex(node, m, M);\n      var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n      newNode.height = node.height;\n      newNode.leaf = node.leaf;\n      calcBBox(node, this.toBBox);\n      calcBBox(newNode, this.toBBox);\n      if (level) {\n        insertPath[level - 1].children.push(newNode);\n      } else {\n        this._splitRoot(node, newNode);\n      }\n    };\n    RBush.prototype._splitRoot = function _splitRoot(node, newNode) {\n      // split root node\n      this.data = createNode([node, newNode]);\n      this.data.height = node.height + 1;\n      this.data.leaf = false;\n      calcBBox(this.data, this.toBBox);\n    };\n    RBush.prototype._chooseSplitIndex = function _chooseSplitIndex(node, m, M) {\n      var index;\n      var minOverlap = Infinity;\n      var minArea = Infinity;\n      for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          index = i;\n          minArea = area < minArea ? area : minArea;\n        } else if (overlap === minOverlap) {\n          // otherwise choose distribution with minimum area\n          if (area < minArea) {\n            minArea = area;\n            index = i;\n          }\n        }\n      }\n      return index || M - m;\n    };\n\n    // sorts node children by the best axis for split\n    RBush.prototype._chooseSplitAxis = function _chooseSplitAxis(node, m, M) {\n      var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n      var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n      var xMargin = this._allDistMargin(node, m, M, compareMinX);\n      var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n      // if total distributions margin value is minimal for x, sort by minX,\n      // otherwise it's already sorted by minY\n      if (xMargin < yMargin) {\n        node.children.sort(compareMinX);\n      }\n    };\n\n    // total margin of all possible split distributions where each node is at least m full\n    RBush.prototype._allDistMargin = function _allDistMargin(node, m, M, compare) {\n      node.children.sort(compare);\n      var toBBox = this.toBBox;\n      var leftBBox = distBBox(node, 0, m, toBBox);\n      var rightBBox = distBBox(node, M - m, M, toBBox);\n      var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n      for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n      }\n      for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n      }\n      return margin;\n    };\n    RBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes(bbox, path, level) {\n      // adjust bboxes along the given tree path\n      for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n      }\n    };\n    RBush.prototype._condense = function _condense(path) {\n      // go through the path, removing empty nodes and updating bboxes\n      for (var i = path.length - 1, siblings = void 0; i >= 0; i--) {\n        if (path[i].children.length === 0) {\n          if (i > 0) {\n            siblings = path[i - 1].children;\n            siblings.splice(siblings.indexOf(path[i]), 1);\n          } else {\n            this.clear();\n          }\n        } else {\n          calcBBox(path[i], this.toBBox);\n        }\n      }\n    };\n    function findItem(item, items, equalsFn) {\n      if (!equalsFn) {\n        return items.indexOf(item);\n      }\n      for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) {\n          return i;\n        }\n      }\n      return -1;\n    }\n\n    // calculate node's bbox from bboxes of its children\n    function calcBBox(node, toBBox) {\n      distBBox(node, 0, node.children.length, toBBox, node);\n    }\n\n    // min bounding rectangle of node children from k to p-1\n    function distBBox(node, k, p, toBBox, destNode) {\n      if (!destNode) {\n        destNode = createNode(null);\n      }\n      destNode.minX = Infinity;\n      destNode.minY = Infinity;\n      destNode.maxX = -Infinity;\n      destNode.maxY = -Infinity;\n      for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n      }\n      return destNode;\n    }\n    function extend(a, b) {\n      a.minX = Math.min(a.minX, b.minX);\n      a.minY = Math.min(a.minY, b.minY);\n      a.maxX = Math.max(a.maxX, b.maxX);\n      a.maxY = Math.max(a.maxY, b.maxY);\n      return a;\n    }\n    function compareNodeMinX(a, b) {\n      return a.minX - b.minX;\n    }\n    function compareNodeMinY(a, b) {\n      return a.minY - b.minY;\n    }\n    function bboxArea(a) {\n      return (a.maxX - a.minX) * (a.maxY - a.minY);\n    }\n    function bboxMargin(a) {\n      return a.maxX - a.minX + (a.maxY - a.minY);\n    }\n    function enlargedArea(a, b) {\n      return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) * (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n    }\n    function intersectionArea(a, b) {\n      var minX = Math.max(a.minX, b.minX);\n      var minY = Math.max(a.minY, b.minY);\n      var maxX = Math.min(a.maxX, b.maxX);\n      var maxY = Math.min(a.maxY, b.maxY);\n      return Math.max(0, maxX - minX) * Math.max(0, maxY - minY);\n    }\n    function contains(a, b) {\n      return a.minX <= b.minX && a.minY <= b.minY && b.maxX <= a.maxX && b.maxY <= a.maxY;\n    }\n    function intersects(a, b) {\n      return b.minX <= a.maxX && b.minY <= a.maxY && b.maxX >= a.minX && b.maxY >= a.minY;\n    }\n    function createNode(children) {\n      return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n      };\n    }\n\n    // sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n    // combines selection algorithm with binary divide & conquer approach\n\n    function multiSelect(arr, left, right, n, compare) {\n      var stack = [left, right];\n      while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n        if (right - left <= n) {\n          continue;\n        }\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n        stack.push(left, mid, mid, right);\n      }\n    }\n    return RBush;\n  });\n})(rbush);\nvar RBush = rbush.exports;\nvar Shape;\n(function (Shape) {\n  Shape[\"GROUP\"] = \"g\";\n  Shape[\"CIRCLE\"] = \"circle\";\n  Shape[\"ELLIPSE\"] = \"ellipse\";\n  Shape[\"IMAGE\"] = \"image\";\n  Shape[\"RECT\"] = \"rect\";\n  Shape[\"LINE\"] = \"line\";\n  Shape[\"POLYLINE\"] = \"polyline\";\n  Shape[\"POLYGON\"] = \"polygon\";\n  Shape[\"TEXT\"] = \"text\";\n  Shape[\"PATH\"] = \"path\";\n  Shape[\"HTML\"] = \"html\";\n  Shape[\"MESH\"] = \"mesh\";\n})(Shape || (Shape = {}));\nvar ClipSpaceNearZ;\n(function (ClipSpaceNearZ) {\n  ClipSpaceNearZ[ClipSpaceNearZ[\"ZERO\"] = 0] = \"ZERO\";\n  ClipSpaceNearZ[ClipSpaceNearZ[\"NEGATIVE_ONE\"] = 1] = \"NEGATIVE_ONE\";\n})(ClipSpaceNearZ || (ClipSpaceNearZ = {}));\nvar AbstractRendererPlugin = /** @class */function () {\n  function AbstractRendererPlugin() {\n    this.plugins = [];\n  }\n  AbstractRendererPlugin.prototype.addRenderingPlugin = function (plugin) {\n    this.plugins.push(plugin);\n    this.context.renderingPlugins.push(plugin);\n  };\n  AbstractRendererPlugin.prototype.removeAllRenderingPlugins = function () {\n    var _this = this;\n    this.plugins.forEach(function (plugin) {\n      var index = _this.context.renderingPlugins.indexOf(plugin);\n      if (index >= 0) {\n        _this.context.renderingPlugins.splice(index, 1);\n      }\n    });\n  };\n  return AbstractRendererPlugin;\n}();\nvar AbstractRenderer = /** @class */function () {\n  function AbstractRenderer(config) {\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.plugins = [];\n    this.config = __assign({\n      /**\n       * only dirty object will cause re-render\n       */\n      enableDirtyCheck: true,\n      enableCulling: false,\n      /**\n       * enable auto rendering by default\n       */\n      enableAutoRendering: true,\n      /**\n       * enable dirty rectangle rendering by default\n       */\n      enableDirtyRectangleRendering: true,\n      enableDirtyRectangleRenderingDebug: false,\n      enableSizeAttenuation: true\n    }, config);\n  }\n  AbstractRenderer.prototype.registerPlugin = function (plugin) {\n    var index = this.plugins.findIndex(function (p) {\n      return p === plugin;\n    });\n    if (index === -1) {\n      this.plugins.push(plugin);\n    }\n  };\n  AbstractRenderer.prototype.unregisterPlugin = function (plugin) {\n    var index = this.plugins.findIndex(function (p) {\n      return p === plugin;\n    });\n    if (index > -1) {\n      this.plugins.splice(index, 1);\n    }\n  };\n  AbstractRenderer.prototype.getPlugins = function () {\n    return this.plugins;\n  };\n  AbstractRenderer.prototype.getPlugin = function (name) {\n    return this.plugins.find(function (plugin) {\n      return plugin.name === name;\n    });\n  };\n  AbstractRenderer.prototype.getConfig = function () {\n    return this.config;\n  };\n  AbstractRenderer.prototype.setConfig = function (config) {\n    Object.assign(this.config, config);\n  };\n  return AbstractRenderer;\n}();\nfunction copyVec3(a, b) {\n  a[0] = b[0];\n  a[1] = b[1];\n  a[2] = b[2];\n  return a;\n}\nfunction subVec3(o, a, b) {\n  o[0] = a[0] - b[0];\n  o[1] = a[1] - b[1];\n  o[2] = a[2] - b[2];\n  return o;\n}\nfunction addVec3(o, a, b) {\n  o[0] = a[0] + b[0];\n  o[1] = a[1] + b[1];\n  o[2] = a[2] + b[2];\n  return o;\n}\nfunction scaleVec3(o, a, b) {\n  o[0] = a[0] * b;\n  o[1] = a[1] * b;\n  o[2] = a[2] * b;\n  return o;\n}\nfunction maxVec3(o, a, b) {\n  o[0] = Math.max(a[0], b[0]);\n  o[1] = Math.max(a[1], b[1]);\n  o[2] = Math.max(a[2], b[2]);\n  return o;\n}\nfunction minVec3(o, a, b) {\n  o[0] = Math.min(a[0], b[0]);\n  o[1] = Math.min(a[1], b[1]);\n  o[2] = Math.min(a[2], b[2]);\n  return o;\n}\nfunction getAngle(angle) {\n  if (angle === undefined) {\n    return 0;\n  } else if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\nfunction createVec3(x, y, z) {\n  if (y === void 0) {\n    y = 0;\n  }\n  if (z === void 0) {\n    z = 0;\n  }\n  if (Array.isArray(x) && x.length === 3) {\n    return vec3.clone(x);\n  }\n  if (isNumber(x)) {\n    return vec3.fromValues(x, y, z);\n  }\n  return vec3.fromValues(x[0], x[1] || y, x[2] || z);\n}\nfunction deg2rad(deg) {\n  return deg * (Math.PI / 180);\n}\nfunction rad2deg(rad) {\n  return rad * (180 / Math.PI);\n}\nfunction grad2deg(grads) {\n  grads = grads % 400;\n  if (grads < 0) {\n    grads += 400;\n  }\n  return grads / 400 * 360;\n}\nfunction deg2turn(deg) {\n  return deg / 360;\n}\nfunction turn2deg(turn) {\n  return 360 * turn;\n}\nfunction getEulerFromQuat(out, quat) {\n  var x = quat[0];\n  var y = quat[1];\n  var z = quat[2];\n  var w = quat[3];\n  var x2 = x * x;\n  var y2 = y * y;\n  var z2 = z * z;\n  var w2 = w * w;\n  var unit = x2 + y2 + z2 + w2;\n  var test = x * w - y * z;\n  if (test > 0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the north pole\n    out[0] = Math.PI / 2;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else if (test < -0.499995 * unit) {\n    //TODO: Use glmatrix.EPSILON\n    // singularity at the south pole\n    out[0] = -Math.PI / 2;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else {\n    out[0] = Math.asin(2 * (x * z - w * y));\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\n  }\n  // TODO: Return them as degrees and not as radians\n  return out;\n}\nfunction getEulerFromMat4(out, m) {\n  var x;\n  var z;\n  var halfPi = Math.PI * 0.5;\n  var _a = __read(mat4.getScaling(vec3.create(), m), 3),\n    sx = _a[0],\n    sy = _a[1],\n    sz = _a[2];\n  var y = Math.asin(-m[2] / sx);\n  if (y < halfPi) {\n    if (y > -halfPi) {\n      x = Math.atan2(m[6] / sy, m[10] / sz);\n      z = Math.atan2(m[1] / sx, m[0] / sx);\n    } else {\n      // Not a unique solution\n      z = 0;\n      x = -Math.atan2(m[4] / sy, m[5] / sy);\n    }\n  } else {\n    // Not a unique solution\n    z = 0;\n    x = Math.atan2(m[4] / sy, m[5] / sy);\n  }\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * @see https://github.com/toji/gl-matrix/issues/329\n * @see https://doc.babylonjs.com/divingDeeper/mesh/transforms/center_origin/rotation_conventions\n */\nfunction getEuler(out, quat) {\n  if (quat.length === 16) {\n    return getEulerFromMat4(out, quat);\n  } else {\n    return getEulerFromQuat(out, quat);\n  }\n}\nfunction fromRotationTranslationScale(rotation, x, y, scaleX, scaleY) {\n  var cos = Math.cos(rotation);\n  var sin = Math.sin(rotation);\n  return mat3.fromValues(scaleX * cos, scaleY * sin, 0, -scaleX * sin, scaleY * cos, 0, x, y, 1);\n}\nfunction makePerspective(out, left, right, top, bottom, near, far, zero) {\n  if (zero === void 0) {\n    zero = false;\n  }\n  var x = 2 * near / (right - left);\n  var y = 2 * near / (top - bottom);\n  var a = (right + left) / (right - left);\n  var b = (top + bottom) / (top - bottom);\n  var c;\n  var d;\n  if (zero) {\n    c = -far / (far - near);\n    d = -far * near / (far - near);\n  } else {\n    c = -(far + near) / (far - near);\n    d = -2 * far * near / (far - near);\n  }\n  out[0] = x;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = y;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = a;\n  out[9] = b;\n  out[10] = c;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = d;\n  out[15] = 0;\n  return out;\n}\nfunction decompose(mat) {\n  var row0x = mat[0];\n  var row0y = mat[1];\n  var row1x = mat[3];\n  var row1y = mat[4];\n  // decompose 3x3 matrix\n  // @see https://www.w3.org/TR/css-transforms-1/#decomposing-a-2d-matrix\n  var scalingX = Math.sqrt(row0x * row0x + row0y * row0y);\n  var scalingY = Math.sqrt(row1x * row1x + row1y * row1y);\n  // If determinant is negative, one axis was flipped.\n  var determinant = row0x * row1y - row0y * row1x;\n  if (determinant < 0) {\n    // Flip axis with minimum unit vector dot product.\n    if (row0x < row1y) {\n      scalingX = -scalingX;\n    } else {\n      scalingY = -scalingY;\n    }\n  }\n  // Renormalize matrix to remove scale.\n  if (scalingX) {\n    row0x *= 1 / scalingX;\n    row0y *= 1 / scalingX;\n  }\n  if (scalingY) {\n    row1x *= 1 / scalingY;\n    row1y *= 1 / scalingY;\n  }\n  // Compute rotation and renormalize matrix.\n  var rotation = Math.atan2(row0y, row0x);\n  var angle = rad2deg(rotation);\n  return [mat[6], mat[7], scalingX, scalingY, angle];\n}\nvar tmp = mat4.create();\nvar perspectiveMatrix = mat4.create();\nvar tmpVec4 = vec4.create();\nvar row = [vec3.create(), vec3.create(), vec3.create()];\nvar pdum3 = vec3.create();\n/*\nInput:  matrix      ; a 4x4 matrix\nOutput: translation ; a 3 component vector\n        scale       ; a 3 component vector\n        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector\n        perspective ; a 4 component vector\n        quaternion  ; a 4 component vector\nReturns false if the matrix cannot be decomposed, true if it can\n\n\nReferences:\nhttps://github.com/kamicane/matrix3d/blob/master/lib/Matrix3d.js\nhttps://github.com/ChromiumWebApps/chromium/blob/master/ui/gfx/transform_util.cc\nhttp://www.w3.org/TR/css3-transforms/#decomposing-a-3d-matrix\n*/\nfunction decomposeMat4(matrix, translation, scale, skew, perspective, quaternion) {\n  //normalize, if not possible then bail out early\n  if (!normalize(tmp, matrix)) return false;\n  // perspectiveMatrix is used to solve for perspective, but it also provides\n  // an easy way to test for singularity of the upper 3x3 component.\n  mat4.copy(perspectiveMatrix, tmp);\n  perspectiveMatrix[3] = 0;\n  perspectiveMatrix[7] = 0;\n  perspectiveMatrix[11] = 0;\n  perspectiveMatrix[15] = 1;\n  // If the perspectiveMatrix is not invertible, we are also unable to\n  // decompose, so we'll bail early. Constant taken from SkMatrix44::invert.\n  if (Math.abs(mat4.determinant(perspectiveMatrix)) < 1e-8) return false;\n  var a03 = tmp[3],\n    a13 = tmp[7],\n    a23 = tmp[11],\n    a30 = tmp[12],\n    a31 = tmp[13],\n    a32 = tmp[14],\n    a33 = tmp[15];\n  // First, isolate perspective.\n  if (a03 !== 0 || a13 !== 0 || a23 !== 0) {\n    tmpVec4[0] = a03;\n    tmpVec4[1] = a13;\n    tmpVec4[2] = a23;\n    tmpVec4[3] = a33;\n    // Solve the equation by inverting perspectiveMatrix and multiplying\n    // rightHandSide by the inverse.\n    // resuing the perspectiveMatrix here since it's no longer needed\n    var ret = mat4.invert(perspectiveMatrix, perspectiveMatrix);\n    if (!ret) return false;\n    mat4.transpose(perspectiveMatrix, perspectiveMatrix);\n    //multiply by transposed inverse perspective matrix, into perspective vec4\n    vec4.transformMat4(perspective, tmpVec4, perspectiveMatrix);\n  } else {\n    //no perspective\n    perspective[0] = perspective[1] = perspective[2] = 0;\n    perspective[3] = 1;\n  }\n  // Next take care of translation\n  translation[0] = a30;\n  translation[1] = a31;\n  translation[2] = a32;\n  // Now get scale and shear. 'row' is a 3 element array of 3 component vectors\n  mat3from4(row, tmp);\n  // Compute X scale factor and normalize first row.\n  scale[0] = vec3.length(row[0]);\n  vec3.normalize(row[0], row[0]);\n  // Compute XY shear factor and make 2nd row orthogonal to 1st.\n  skew[0] = vec3.dot(row[0], row[1]);\n  combine(row[1], row[1], row[0], 1.0, -skew[0]);\n  // Now, compute Y scale and normalize 2nd row.\n  scale[1] = vec3.length(row[1]);\n  vec3.normalize(row[1], row[1]);\n  skew[0] /= scale[1];\n  // Compute XZ and YZ shears, orthogonalize 3rd row\n  skew[1] = vec3.dot(row[0], row[2]);\n  combine(row[2], row[2], row[0], 1.0, -skew[1]);\n  skew[2] = vec3.dot(row[1], row[2]);\n  combine(row[2], row[2], row[1], 1.0, -skew[2]);\n  // Next, get Z scale and normalize 3rd row.\n  scale[2] = vec3.length(row[2]);\n  vec3.normalize(row[2], row[2]);\n  skew[1] /= scale[2];\n  skew[2] /= scale[2];\n  // At this point, the matrix (in rows) is orthonormal.\n  // Check for a coordinate system flip.  If the determinant\n  // is -1, then negate the matrix and the scaling factors.\n  vec3.cross(pdum3, row[1], row[2]);\n  if (vec3.dot(row[0], pdum3) < 0) {\n    for (var i = 0; i < 3; i++) {\n      scale[i] *= -1;\n      row[i][0] *= -1;\n      row[i][1] *= -1;\n      row[i][2] *= -1;\n    }\n  }\n  // Now, get the rotations out\n  quaternion[0] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] - row[1][1] - row[2][2], 0));\n  quaternion[1] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] + row[1][1] - row[2][2], 0));\n  quaternion[2] = 0.5 * Math.sqrt(Math.max(1 - row[0][0] - row[1][1] + row[2][2], 0));\n  quaternion[3] = 0.5 * Math.sqrt(Math.max(1 + row[0][0] + row[1][1] + row[2][2], 0));\n  if (row[2][1] > row[1][2]) quaternion[0] = -quaternion[0];\n  if (row[0][2] > row[2][0]) quaternion[1] = -quaternion[1];\n  if (row[1][0] > row[0][1]) quaternion[2] = -quaternion[2];\n  return true;\n}\nfunction normalize(out, mat) {\n  var m44 = mat[15];\n  // Cannot normalize.\n  if (m44 === 0) return false;\n  var scale = 1 / m44;\n  for (var i = 0; i < 16; i++) out[i] = mat[i] * scale;\n  return true;\n}\n//gets upper-left of a 4x4 matrix into a 3x3 of vectors\nfunction mat3from4(out, mat4x4) {\n  out[0][0] = mat4x4[0];\n  out[0][1] = mat4x4[1];\n  out[0][2] = mat4x4[2];\n  out[1][0] = mat4x4[4];\n  out[1][1] = mat4x4[5];\n  out[1][2] = mat4x4[6];\n  out[2][0] = mat4x4[8];\n  out[2][1] = mat4x4[9];\n  out[2][2] = mat4x4[10];\n}\nfunction combine(out, a, b, scale1, scale2) {\n  out[0] = a[0] * scale1 + b[0] * scale2;\n  out[1] = a[1] * scale1 + b[1] * scale2;\n  out[2] = a[2] * scale1 + b[2] * scale2;\n}\n\n/**\n * Axis-Aligned Bounding Box\n * 为了便于后续 Frustum Culling，通过查找表定义 p-vertex 和 n-vertex\n * @see https://github.com/antvis/GWebGPUEngine/issues/3\n */\nvar AABB = /** @class */function () {\n  function AABB() {\n    this.center = [0, 0, 0];\n    this.halfExtents = [0, 0, 0];\n    this.min = [0, 0, 0];\n    this.max = [0, 0, 0];\n  }\n  AABB.isEmpty = function (aabb) {\n    return !aabb || aabb.halfExtents[0] === 0 && aabb.halfExtents[1] === 0 && aabb.halfExtents[2] === 0;\n  };\n  // center: vec3 = vec3.create();\n  // halfExtents: vec3 = vec3.create();\n  // min: vec3 = vec3.create();\n  // max: vec3 = vec3.create();\n  AABB.prototype.update = function (center, halfExtents) {\n    copyVec3(this.center, center);\n    copyVec3(this.halfExtents, halfExtents);\n    subVec3(this.min, this.center, this.halfExtents);\n    addVec3(this.max, this.center, this.halfExtents);\n    // vec3.copy(this.center, center);\n    // vec3.copy(this.halfExtents, halfExtents);\n    // vec3.sub(this.min, this.center, this.halfExtents);\n    // vec3.add(this.max, this.center, this.halfExtents);\n  };\n  AABB.prototype.setMinMax = function (min, max) {\n    // vec3.add(this.center, max, min);\n    // vec3.scale(this.center, this.center, 0.5);\n    // vec3.sub(this.halfExtents, max, min);\n    // vec3.scale(this.halfExtents, this.halfExtents, 0.5);\n    // vec3.copy(this.min, min);\n    // vec3.copy(this.max, max);\n    addVec3(this.center, max, min);\n    scaleVec3(this.center, this.center, 0.5);\n    subVec3(this.halfExtents, max, min);\n    scaleVec3(this.halfExtents, this.halfExtents, 0.5);\n    copyVec3(this.min, min);\n    copyVec3(this.max, max);\n  };\n  AABB.prototype.getMin = function () {\n    return this.min;\n  };\n  AABB.prototype.getMax = function () {\n    return this.max;\n  };\n  AABB.prototype.add = function (aabb) {\n    if (AABB.isEmpty(aabb)) {\n      return;\n    }\n    if (AABB.isEmpty(this)) {\n      this.setMinMax(aabb.getMin(), aabb.getMax());\n      return;\n    }\n    var tc = this.center;\n    var tcx = tc[0];\n    var tcy = tc[1];\n    var tcz = tc[2];\n    var th = this.halfExtents;\n    var thx = th[0];\n    var thy = th[1];\n    var thz = th[2];\n    var tminx = tcx - thx;\n    var tmaxx = tcx + thx;\n    var tminy = tcy - thy;\n    var tmaxy = tcy + thy;\n    var tminz = tcz - thz;\n    var tmaxz = tcz + thz;\n    var oc = aabb.center;\n    var ocx = oc[0];\n    var ocy = oc[1];\n    var ocz = oc[2];\n    var oh = aabb.halfExtents;\n    var ohx = oh[0];\n    var ohy = oh[1];\n    var ohz = oh[2];\n    var ominx = ocx - ohx;\n    var omaxx = ocx + ohx;\n    var ominy = ocy - ohy;\n    var omaxy = ocy + ohy;\n    var ominz = ocz - ohz;\n    var omaxz = ocz + ohz;\n    if (ominx < tminx) {\n      tminx = ominx;\n    }\n    if (omaxx > tmaxx) {\n      tmaxx = omaxx;\n    }\n    if (ominy < tminy) {\n      tminy = ominy;\n    }\n    if (omaxy > tmaxy) {\n      tmaxy = omaxy;\n    }\n    if (ominz < tminz) {\n      tminz = ominz;\n    }\n    if (omaxz > tmaxz) {\n      tmaxz = omaxz;\n    }\n    tc[0] = (tminx + tmaxx) * 0.5;\n    tc[1] = (tminy + tmaxy) * 0.5;\n    tc[2] = (tminz + tmaxz) * 0.5;\n    th[0] = (tmaxx - tminx) * 0.5;\n    th[1] = (tmaxy - tminy) * 0.5;\n    th[2] = (tmaxz - tminz) * 0.5;\n    this.min[0] = tminx;\n    this.min[1] = tminy;\n    this.min[2] = tminz;\n    this.max[0] = tmaxx;\n    this.max[1] = tmaxy;\n    this.max[2] = tmaxz;\n  };\n  AABB.prototype.setFromTransformedAABB = function (aabb, m) {\n    var bc = this.center;\n    var br = this.halfExtents;\n    var ac = aabb.center;\n    var ar = aabb.halfExtents;\n    var mx0 = m[0];\n    var mx1 = m[4];\n    var mx2 = m[8];\n    var my0 = m[1];\n    var my1 = m[5];\n    var my2 = m[9];\n    var mz0 = m[2];\n    var mz1 = m[6];\n    var mz2 = m[10];\n    var mx0a = Math.abs(mx0);\n    var mx1a = Math.abs(mx1);\n    var mx2a = Math.abs(mx2);\n    var my0a = Math.abs(my0);\n    var my1a = Math.abs(my1);\n    var my2a = Math.abs(my2);\n    var mz0a = Math.abs(mz0);\n    var mz1a = Math.abs(mz1);\n    var mz2a = Math.abs(mz2);\n    bc[0] = m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2];\n    bc[1] = m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2];\n    bc[2] = m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2];\n    // vec3.set(\n    //   bc,\n    //   m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2],\n    //   m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2],\n    //   m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2],\n    // );\n    br[0] = mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2];\n    br[1] = my0a * ar[0] + my1a * ar[1] + my2a * ar[2];\n    br[2] = mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2];\n    // vec3.set(\n    //   br,\n    //   mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2],\n    //   my0a * ar[0] + my1a * ar[1] + my2a * ar[2],\n    //   mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2],\n    // );\n    // this.min = vec3.sub(this.min, bc, br);\n    // this.max = vec3.add(this.max, bc, br);\n    subVec3(this.min, bc, br);\n    addVec3(this.max, bc, br);\n  };\n  AABB.prototype.intersects = function (aabb) {\n    var aMax = this.getMax();\n    var aMin = this.getMin();\n    var bMax = aabb.getMax();\n    var bMin = aabb.getMin();\n    return aMin[0] <= bMax[0] && aMax[0] >= bMin[0] && aMin[1] <= bMax[1] && aMax[1] >= bMin[1] && aMin[2] <= bMax[2] && aMax[2] >= bMin[2];\n  };\n  AABB.prototype.intersection = function (aabb) {\n    if (!this.intersects(aabb)) {\n      return null;\n    }\n    var intersection = new AABB();\n    // const min = vec3.max(vec3.create(), this.getMin(), aabb.getMin());\n    // const max = vec3.min(vec3.create(), this.getMax(), aabb.getMax());\n    var min = maxVec3([0, 0, 0], this.getMin(), aabb.getMin());\n    var max = minVec3([0, 0, 0], this.getMax(), aabb.getMax());\n    intersection.setMinMax(min, max);\n    return intersection;\n  };\n  // containsPoint(point: vec3) {\n  //   const min = this.getMin();\n  //   const max = this.getMax();\n  //   return !(\n  //     point[0] < min[0] ||\n  //     point[0] > max[0] ||\n  //     point[1] < min[1] ||\n  //     point[1] > max[1] ||\n  //     point[2] < min[2] ||\n  //     point[2] > max[2]\n  //   );\n  // }\n  /**\n   * get n-vertex\n   * @param plane plane of CullingVolume\n   */\n  AABB.prototype.getNegativeFarPoint = function (plane) {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.min);\n      // return vec3.copy(vec3.create(), this.min);\n    } else if (plane.pnVertexFlag === 0x110) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    } else if (plane.pnVertexFlag === 0x101) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    } else if (plane.pnVertexFlag === 0x100) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    } else if (plane.pnVertexFlag === 0x011) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    } else if (plane.pnVertexFlag === 0x010) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    } else if (plane.pnVertexFlag === 0x001) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    } else {\n      return [this.max[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.max[2]);\n    }\n  };\n  /**\n   * get p-vertex\n   * @param plane plane of CullingVolume\n   */\n  AABB.prototype.getPositiveFarPoint = function (plane) {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.max);\n      // return vec3.copy(vec3.create(), this.max);\n    } else if (plane.pnVertexFlag === 0x110) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    } else if (plane.pnVertexFlag === 0x101) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    } else if (plane.pnVertexFlag === 0x100) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    } else if (plane.pnVertexFlag === 0x011) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    } else if (plane.pnVertexFlag === 0x010) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    } else if (plane.pnVertexFlag === 0x001) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    } else {\n      return [this.min[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.min[2]);\n    }\n  };\n  return AABB;\n}();\nvar Plane = /** @class */function () {\n  function Plane(distance, normal) {\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n  Plane.prototype.updatePNVertexFlag = function () {\n    this.pnVertexFlag = (Number(this.normal[0] >= 0) << 8) + (Number(this.normal[1] >= 0) << 4) + Number(this.normal[2] >= 0);\n  };\n  Plane.prototype.distanceToPoint = function (point) {\n    return vec3.dot(point, this.normal) - this.distance;\n  };\n  Plane.prototype.normalize = function () {\n    var invLen = 1 / vec3.len(this.normal);\n    vec3.scale(this.normal, this.normal, invLen);\n    this.distance *= invLen;\n  };\n  Plane.prototype.intersectsLine = function (start, end, point) {\n    var d0 = this.distanceToPoint(start);\n    var d1 = this.distanceToPoint(end);\n    var t = d0 / (d0 - d1);\n    var intersects = t >= 0 && t <= 1;\n    if (intersects && point) {\n      vec3.lerp(point, start, end, t);\n    }\n    return intersects;\n  };\n  return Plane;\n}();\nvar Mask;\n(function (Mask) {\n  Mask[Mask[\"OUTSIDE\"] = 4294967295] = \"OUTSIDE\";\n  Mask[Mask[\"INSIDE\"] = 0] = \"INSIDE\";\n  Mask[Mask[\"INDETERMINATE\"] = 2147483647] = \"INDETERMINATE\";\n})(Mask || (Mask = {}));\nvar Frustum = /** @class */function () {\n  function Frustum(planes) {\n    this.planes = [];\n    if (planes) {\n      this.planes = planes;\n    } else {\n      for (var i = 0; i < 6; i++) {\n        this.planes.push(new Plane());\n      }\n    }\n  }\n  /**\n   * extract 6 planes from projectionMatrix\n   * @see http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n   */\n  Frustum.prototype.extractFromVPMatrix = function (projectionMatrix) {\n    // @ts-ignore\n    var _a = __read(projectionMatrix, 16),\n      m0 = _a[0],\n      m1 = _a[1],\n      m2 = _a[2],\n      m3 = _a[3],\n      m4 = _a[4],\n      m5 = _a[5],\n      m6 = _a[6],\n      m7 = _a[7],\n      m8 = _a[8],\n      m9 = _a[9],\n      m10 = _a[10],\n      m11 = _a[11],\n      m12 = _a[12],\n      m13 = _a[13],\n      m14 = _a[14],\n      m15 = _a[15];\n    // right\n    vec3.set(this.planes[0].normal, m3 - m0, m7 - m4, m11 - m8);\n    this.planes[0].distance = m15 - m12;\n    // left\n    vec3.set(this.planes[1].normal, m3 + m0, m7 + m4, m11 + m8);\n    this.planes[1].distance = m15 + m12;\n    // bottom\n    vec3.set(this.planes[2].normal, m3 + m1, m7 + m5, m11 + m9);\n    this.planes[2].distance = m15 + m13;\n    // top\n    vec3.set(this.planes[3].normal, m3 - m1, m7 - m5, m11 - m9);\n    this.planes[3].distance = m15 - m13;\n    // far\n    vec3.set(this.planes[4].normal, m3 - m2, m7 - m6, m11 - m10);\n    this.planes[4].distance = m15 - m14;\n    // near\n    vec3.set(this.planes[5].normal, m3 + m2, m7 + m6, m11 + m10);\n    this.planes[5].distance = m15 + m14;\n    this.planes.forEach(function (plane) {\n      plane.normalize();\n      plane.updatePNVertexFlag();\n    });\n  };\n  return Frustum;\n}();\nvar Point = /** @class */function () {\n  function Point(x, y) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this.x = 0;\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  Point.prototype.clone = function () {\n    return new Point(this.x, this.y);\n  };\n  Point.prototype.copyFrom = function (p) {\n    this.x = p.x;\n    this.y = p.y;\n  };\n  return Point;\n}();\nvar Rectangle = /** @class */function () {\n  function Rectangle(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.left = x;\n    this.right = x + width;\n    this.top = y;\n    this.bottom = y + height;\n  }\n  Rectangle.prototype.toJSON = function () {};\n  return Rectangle;\n}();\nvar ERROR_MSG_METHOD_NOT_IMPLEMENTED = 'Method not implemented.';\nvar ERROR_MSG_USE_DOCUMENT_ELEMENT = 'Use document.documentElement instead.';\nvar ERROR_MSG_APPEND_DESTROYED_ELEMENT = 'Cannot append a destroyed element.';\n\n/**\n * Different type of cameras, eg. simple camera used in 2D scene or\n * advanced camera which can do actions & switch between landmarks.\n */\nvar CameraType;\n(function (CameraType) {\n  /**\n   * Performs all the rotational operations with the focal point instead of the camera position.\n   * This type of camera is useful in applications(like CAD) where 3D objects are being designed or explored.\n   * Camera cannot orbits over the north & south poles.\n   * @see http://voxelent.com/tutorial-cameras/\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/zh/controls/OrbitControls\n   */\n  CameraType[CameraType[\"ORBITING\"] = 0] = \"ORBITING\";\n  /**\n   * It's similar to the ORBITING camera, but it allows the camera to orbit over the north or south poles.\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/en/controls/TrackballControls\n   */\n  CameraType[CameraType[\"EXPLORING\"] = 1] = \"EXPLORING\";\n  /**\n   * Performs all the rotational operations with the camera position.\n   * It's useful in first person shooting games.\n   * Camera cannot orbits over the north & south poles.\n   *\n   * In Three.js it's used in FirstPersonControls.\n   * @see https://threejs.org/docs/#examples/en/controls/FirstPersonControls\n   */\n  CameraType[CameraType[\"TRACKING\"] = 2] = \"TRACKING\";\n})(CameraType || (CameraType = {}));\n/**\n * CameraType must be TRACKING\n */\nvar CameraTrackingMode;\n(function (CameraTrackingMode) {\n  CameraTrackingMode[CameraTrackingMode[\"DEFAULT\"] = 0] = \"DEFAULT\";\n  CameraTrackingMode[CameraTrackingMode[\"ROTATIONAL\"] = 1] = \"ROTATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"TRANSLATIONAL\"] = 2] = \"TRANSLATIONAL\";\n  CameraTrackingMode[CameraTrackingMode[\"CINEMATIC\"] = 3] = \"CINEMATIC\";\n})(CameraTrackingMode || (CameraTrackingMode = {}));\nvar CameraProjectionMode;\n(function (CameraProjectionMode) {\n  CameraProjectionMode[CameraProjectionMode[\"ORTHOGRAPHIC\"] = 0] = \"ORTHOGRAPHIC\";\n  CameraProjectionMode[CameraProjectionMode[\"PERSPECTIVE\"] = 1] = \"PERSPECTIVE\";\n})(CameraProjectionMode || (CameraProjectionMode = {}));\nvar CameraEvent = {\n  UPDATED: 'updated'\n};\nvar MIN_DISTANCE = 0.0002;\n/**\n * 参考「WebGL Insights - 23.Designing Cameras for WebGL Applications」，基于 Responsible Camera 思路设计\n * @see https://github.com/d13g0/nucleo.js/blob/master/source/camera/Camera.js\n *\n * 保存相机参数，定义相机动作：\n * 1. dolly 沿 n 轴移动\n * 2. pan 沿 u v 轴移动\n * 3. rotate 以方位角旋转\n * 4. 移动到 Landmark，具有平滑的动画效果，其间禁止其他用户交互\n */\nvar Camera = /** @class */function () {\n  function Camera() {\n    /**\n     * Clip space near Z, default to range `[-1, 1]`\n     */\n    this.clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n    this.eventEmitter = new EventEmitter();\n    /**\n     * Matrix of camera\n     */\n    this.matrix = mat4.create();\n    /**\n     * u axis +X is right\n     * @see http://learnwebgl.brown37.net/07_cameras/camera_introduction.html#a-camera-definition\n     */\n    this.right = vec3.fromValues(1, 0, 0);\n    /**\n     * v axis +Y is up\n     */\n    this.up = vec3.fromValues(0, 1, 0);\n    /**\n     * n axis +Z is inside\n     */\n    this.forward = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of camera.\n     */\n    this.position = vec3.fromValues(0, 0, 1);\n    /**\n     * Position of focal point.\n     */\n    this.focalPoint = vec3.fromValues(0, 0, 0);\n    /**\n     * vector from focalPoint to position\n     */\n    this.distanceVector = vec3.fromValues(0, 0, -1);\n    /**\n     * length(focalPoint - position)\n     */\n    this.distance = 1;\n    /**\n     * @see https://en.wikipedia.org/wiki/Azimuth\n     */\n    this.azimuth = 0;\n    this.elevation = 0;\n    this.roll = 0;\n    this.relAzimuth = 0;\n    this.relElevation = 0;\n    this.relRoll = 0;\n    /**\n     * 沿 n 轴移动时，保证移动速度从快到慢\n     */\n    this.dollyingStep = 0;\n    this.maxDistance = Infinity;\n    this.minDistance = -Infinity;\n    /**\n     * zoom factor of the camera, default is 1\n     * eg. https://threejs.org/docs/#api/en/cameras/OrthographicCamera.zoom\n     */\n    this.zoom = 1;\n    /**\n     * invert the horizontal coordinate system HCS\n     */\n    this.rotateWorld = false;\n    /**\n     * 投影矩阵参数\n     */\n    /**\n     * field of view [0-360]\n     * @see http://en.wikipedia.org/wiki/Angle_of_view\n     */\n    this.fov = 30;\n    this.near = 0.1;\n    this.far = 1000;\n    this.aspect = 1;\n    this.projectionMatrix = mat4.create();\n    this.projectionMatrixInverse = mat4.create();\n    this.jitteredProjectionMatrix = undefined;\n    this.enableUpdate = true;\n    // protected following = undefined;\n    this.type = CameraType.EXPLORING;\n    this.trackingMode = CameraTrackingMode.DEFAULT;\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    /**\n     * for culling use\n     */\n    this.frustum = new Frustum();\n    /**\n     * ortho matrix for Canvas2D & SVG\n     */\n    this.orthoMatrix = mat4.create();\n  }\n  // constructor(type = CameraType.EXPLORING, trackingMode = CameraTrackingMode.DEFAULT) {\n  //   this.setType(type, trackingMode);\n  // }\n  Camera.prototype.isOrtho = function () {\n    return this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC;\n  };\n  Camera.prototype.getProjectionMode = function () {\n    return this.projectionMode;\n  };\n  Camera.prototype.getPerspective = function () {\n    // account for TAA\n    return this.jitteredProjectionMatrix || this.projectionMatrix;\n  };\n  Camera.prototype.getPerspectiveInverse = function () {\n    return this.projectionMatrixInverse;\n  };\n  Camera.prototype.getFrustum = function () {\n    return this.frustum;\n  };\n  Camera.prototype.getPosition = function () {\n    return this.position;\n  };\n  Camera.prototype.getFocalPoint = function () {\n    return this.focalPoint;\n  };\n  Camera.prototype.getDollyingStep = function () {\n    return this.dollyingStep;\n  };\n  Camera.prototype.getNear = function () {\n    return this.near;\n  };\n  Camera.prototype.getFar = function () {\n    return this.far;\n  };\n  Camera.prototype.getZoom = function () {\n    return this.zoom;\n  };\n  Camera.prototype.getOrthoMatrix = function () {\n    return this.orthoMatrix;\n  };\n  Camera.prototype.getView = function () {\n    return this.view;\n  };\n  Camera.prototype.setEnableUpdate = function (enabled) {\n    this.enableUpdate = enabled;\n  };\n  Camera.prototype.setType = function (type, trackingMode) {\n    this.type = type;\n    if (this.type === CameraType.EXPLORING) {\n      this.setWorldRotation(true);\n    } else {\n      this.setWorldRotation(false);\n    }\n    this._getAngles();\n    if (this.type === CameraType.TRACKING && trackingMode !== undefined) {\n      this.setTrackingMode(trackingMode);\n    }\n    return this;\n  };\n  Camera.prototype.setProjectionMode = function (projectionMode) {\n    this.projectionMode = projectionMode;\n    return this;\n  };\n  Camera.prototype.setTrackingMode = function (trackingMode) {\n    if (this.type !== CameraType.TRACKING) {\n      throw new Error('Impossible to set a tracking mode if the camera is not of tracking type');\n    }\n    this.trackingMode = trackingMode;\n    return this;\n  };\n  /**\n   * If flag is true, it reverses the azimuth and elevation angles.\n   * Subsequent calls to rotate, setAzimuth, setElevation,\n   * changeAzimuth or changeElevation will cause the inverted effect.\n   * setRoll or changeRoll is not affected by this method.\n   *\n   * This inversion is useful when one wants to simulate that the world\n   * is moving, instead of the camera.\n   *\n   * By default the camera angles are not reversed.\n   * @param {Boolean} flag the boolean flag to reverse the angles.\n   */\n  Camera.prototype.setWorldRotation = function (flag) {\n    this.rotateWorld = flag;\n    this._getAngles();\n    return this;\n  };\n  /**\n   * 计算 MV 矩阵，为相机矩阵的逆矩阵\n   */\n  Camera.prototype.getViewTransform = function () {\n    return mat4.invert(mat4.create(), this.matrix);\n  };\n  Camera.prototype.getWorldTransform = function () {\n    return this.matrix;\n  };\n  Camera.prototype.jitterProjectionMatrix = function (x, y) {\n    var translation = mat4.fromTranslation(mat4.create(), [x, y, 0]);\n    this.jitteredProjectionMatrix = mat4.multiply(mat4.create(), translation, this.projectionMatrix);\n  };\n  Camera.prototype.clearJitterProjectionMatrix = function () {\n    this.jitteredProjectionMatrix = undefined;\n  };\n  /**\n   * 设置相机矩阵\n   */\n  Camera.prototype.setMatrix = function (matrix) {\n    this.matrix = matrix;\n    this._update();\n    return this;\n  };\n  Camera.prototype.setFov = function (fov) {\n    this.setPerspective(this.near, this.far, fov, this.aspect);\n    return this;\n  };\n  Camera.prototype.setAspect = function (aspect) {\n    this.setPerspective(this.near, this.far, this.fov, aspect);\n    return this;\n  };\n  Camera.prototype.setNear = function (near) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(this.left, this.rright, this.top, this.bottom, near, this.far);\n    }\n    return this;\n  };\n  Camera.prototype.setFar = function (far) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, far);\n    }\n    return this;\n  };\n  /**\n   * Sets an offset in a larger frustum, used in PixelPicking\n   */\n  Camera.prototype.setViewOffset = function (fullWidth, fullHeight, x, y, width, height) {\n    this.aspect = fullWidth / fullHeight;\n    if (this.view === undefined) {\n      this.view = {\n        enabled: true,\n        fullWidth: 1,\n        fullHeight: 1,\n        offsetX: 0,\n        offsetY: 0,\n        width: 1,\n        height: 1\n      };\n    }\n    this.view.enabled = true;\n    this.view.fullWidth = fullWidth;\n    this.view.fullHeight = fullHeight;\n    this.view.offsetX = x;\n    this.view.offsetY = y;\n    this.view.width = width;\n    this.view.height = height;\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n    }\n    return this;\n  };\n  Camera.prototype.clearViewOffset = function () {\n    if (this.view !== undefined) {\n      this.view.enabled = false;\n    }\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n    }\n    return this;\n  };\n  Camera.prototype.setZoom = function (zoom) {\n    this.zoom = zoom;\n    if (this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      this.setOrthographic(this.left, this.rright, this.top, this.bottom, this.near, this.far);\n    } else if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    }\n    return this;\n  };\n  /**\n   * Zoom by specified point in viewport coordinates.\n   */\n  Camera.prototype.setZoomByViewportPoint = function (zoom, viewportPoint) {\n    var _a = this.canvas.viewport2Canvas({\n        x: viewportPoint[0],\n        y: viewportPoint[1]\n      }),\n      ox = _a.x,\n      oy = _a.y;\n    var roll = this.roll;\n    this.rotate(0, 0, -roll);\n    this.setPosition(ox, oy);\n    this.setFocalPoint(ox, oy);\n    this.setZoom(zoom);\n    this.rotate(0, 0, roll);\n    var _b = this.canvas.viewport2Canvas({\n        x: viewportPoint[0],\n        y: viewportPoint[1]\n      }),\n      cx = _b.x,\n      cy = _b.y;\n    // project to rotated axis\n    var dvec = vec3.fromValues(cx - ox, cy - oy, 0);\n    var dx = vec3.dot(dvec, this.right) / vec3.length(this.right);\n    var dy = vec3.dot(dvec, this.up) / vec3.length(this.up);\n    this.pan(-dx, -dy);\n    return this;\n  };\n  Camera.prototype.setPerspective = function (near, far, fov, aspect) {\n    var _a;\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    this.fov = fov;\n    this.near = near;\n    this.far = far;\n    this.aspect = aspect;\n    var top = this.near * Math.tan(deg2rad(0.5 * this.fov)) / this.zoom;\n    var height = 2 * top;\n    var width = this.aspect * height;\n    var left = -0.5 * width;\n    if ((_a = this.view) === null || _a === void 0 ? void 0 : _a.enabled) {\n      var fullWidth = this.view.fullWidth;\n      var fullHeight = this.view.fullHeight;\n      left += this.view.offsetX * width / fullWidth;\n      top -= this.view.offsetY * height / fullHeight;\n      width *= this.view.width / fullWidth;\n      height *= this.view.height / fullHeight;\n    }\n    makePerspective(this.projectionMatrix, left, left + width, top, top - height, near, this.far, this.clipSpaceNearZ === ClipSpaceNearZ.ZERO);\n    // flipY since the origin of OpenGL/WebGL is bottom-left compared with top-left in Canvas2D\n    mat4.scale(this.projectionMatrix, this.projectionMatrix, vec3.fromValues(1, -1, 1));\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.setOrthographic = function (l, r, t, b, near, far) {\n    var _a;\n    this.projectionMode = CameraProjectionMode.ORTHOGRAPHIC;\n    this.rright = r;\n    this.left = l;\n    this.top = t;\n    this.bottom = b;\n    this.near = near;\n    this.far = far;\n    var dx = (this.rright - this.left) / (2 * this.zoom);\n    var dy = (this.top - this.bottom) / (2 * this.zoom);\n    var cx = (this.rright + this.left) / 2;\n    var cy = (this.top + this.bottom) / 2;\n    var left = cx - dx;\n    var right = cx + dx;\n    var top = cy + dy;\n    var bottom = cy - dy;\n    if ((_a = this.view) === null || _a === void 0 ? void 0 : _a.enabled) {\n      var scaleW = (this.rright - this.left) / this.view.fullWidth / this.zoom;\n      var scaleH = (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n      left += scaleW * this.view.offsetX;\n      right = left + scaleW * this.view.width;\n      top -= scaleH * this.view.offsetY;\n      bottom = top - scaleH * this.view.height;\n    }\n    if (this.clipSpaceNearZ === ClipSpaceNearZ.NEGATIVE_ONE) {\n      mat4.ortho(this.projectionMatrix, left, right, bottom, top, near, far);\n    } else {\n      mat4.orthoZO(this.projectionMatrix, left, right, bottom, top, near, far);\n    }\n    // flipY since the origin of OpenGL/WebGL is bottom-left compared with top-left in Canvas2D\n    mat4.scale(this.projectionMatrix, this.projectionMatrix, vec3.fromValues(1, -1, 1));\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n    this._getOrthoMatrix();\n    this.triggerUpdate();\n    return this;\n  };\n  /**\n   * Move the camera in world coordinates.\n   * It will keep looking at the current focal point.\n   *\n   * support scalars or vectors.\n   * @example\n   * setPosition(1, 2, 3);\n   * setPosition([1, 2, 3]);\n   */\n  Camera.prototype.setPosition = function (x, y, z) {\n    if (y === void 0) {\n      y = this.position[1];\n    }\n    if (z === void 0) {\n      z = this.position[2];\n    }\n    var position = createVec3(x, y, z);\n    this._setPosition(position);\n    this.setFocalPoint(this.focalPoint);\n    this.triggerUpdate();\n    return this;\n  };\n  /**\n   * Sets the focal point of this camera in world coordinates.\n   *\n   * support scalars or vectors.\n   * @example\n   * setFocalPoint(1, 2, 3);\n   * setFocalPoint([1, 2, 3]);\n   */\n  Camera.prototype.setFocalPoint = function (x, y, z) {\n    if (y === void 0) {\n      y = this.focalPoint[1];\n    }\n    if (z === void 0) {\n      z = this.focalPoint[2];\n    }\n    var up = vec3.fromValues(0, 1, 0);\n    this.focalPoint = createVec3(x, y, z);\n    if (this.trackingMode === CameraTrackingMode.CINEMATIC) {\n      var d = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n      x = d[0];\n      y = d[1];\n      z = d[2];\n      var r = vec3.length(d);\n      var el = rad2deg(Math.asin(y / r));\n      var az = 90 + rad2deg(Math.atan2(z, x));\n      var m = mat4.create();\n      mat4.rotateY(m, m, deg2rad(az));\n      mat4.rotateX(m, m, deg2rad(el));\n      up = vec3.transformMat4(vec3.create(), [0, 1, 0], m);\n    }\n    mat4.invert(this.matrix, mat4.lookAt(mat4.create(), this.position, this.focalPoint, up));\n    this._getAxes();\n    this._getDistance();\n    this._getAngles();\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.getDistance = function () {\n    return this.distance;\n  };\n  Camera.prototype.getDistanceVector = function () {\n    return this.distanceVector;\n  };\n  /**\n   * Moves the camera towards/from the focal point.\n   */\n  Camera.prototype.setDistance = function (d) {\n    if (this.distance === d || d < 0) {\n      return this;\n    }\n    this.distance = d;\n    if (this.distance < MIN_DISTANCE) {\n      this.distance = MIN_DISTANCE;\n    }\n    this.dollyingStep = this.distance / 100;\n    var pos = vec3.create();\n    d = this.distance;\n    var n = this.forward;\n    var f = this.focalPoint;\n    pos[0] = d * n[0] + f[0];\n    pos[1] = d * n[1] + f[1];\n    pos[2] = d * n[2] + f[2];\n    this._setPosition(pos);\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.setMaxDistance = function (d) {\n    this.maxDistance = d;\n    return this;\n  };\n  Camera.prototype.setMinDistance = function (d) {\n    this.minDistance = d;\n    return this;\n  };\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   * the azimuth in degrees\n   */\n  Camera.prototype.setAzimuth = function (az) {\n    this.azimuth = getAngle(az);\n    this.computeMatrix();\n    this._getAxes();\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.getAzimuth = function () {\n    return this.azimuth;\n  };\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  Camera.prototype.setElevation = function (el) {\n    this.elevation = getAngle(el);\n    this.computeMatrix();\n    this._getAxes();\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.getElevation = function () {\n    return this.elevation;\n  };\n  /**\n   * 设置相机方位角，不同相机模式下需要重新计算相机位置或者是视点位置\n   */\n  Camera.prototype.setRoll = function (angle) {\n    this.roll = getAngle(angle);\n    this.computeMatrix();\n    this._getAxes();\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n    this.triggerUpdate();\n    return this;\n  };\n  Camera.prototype.getRoll = function () {\n    return this.roll;\n  };\n  /**\n   * 根据相机矩阵重新计算各种相机参数\n   */\n  Camera.prototype._update = function () {\n    this._getAxes();\n    this._getPosition();\n    this._getDistance();\n    this._getAngles();\n    this._getOrthoMatrix();\n    this.triggerUpdate();\n  };\n  /**\n   * 计算相机矩阵\n   */\n  Camera.prototype.computeMatrix = function () {\n    // 使用四元数描述 3D 旋转\n    // @see https://xiaoiver.github.io/coding/2018/12/28/Camera-%E8%AE%BE%E8%AE%A1-%E4%B8%80.html\n    var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], deg2rad(this.roll));\n    mat4.identity(this.matrix);\n    // only consider HCS for EXPLORING and ORBITING cameras\n    var rotX = quat$1.setAxisAngle(quat$1.create(), [1, 0, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.elevation));\n    var rotY = quat$1.setAxisAngle(quat$1.create(), [0, 1, 0], deg2rad((this.rotateWorld && this.type !== CameraType.TRACKING || this.type === CameraType.TRACKING ? 1 : -1) * this.azimuth));\n    var rotQ = quat$1.multiply(quat$1.create(), rotY, rotX);\n    rotQ = quat$1.multiply(quat$1.create(), rotQ, rotZ);\n    var rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n    if (this.type === CameraType.ORBITING || this.type === CameraType.EXPLORING) {\n      mat4.translate(this.matrix, this.matrix, this.focalPoint);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else if (this.type === CameraType.TRACKING) {\n      mat4.translate(this.matrix, this.matrix, this.position);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n    }\n  };\n  /**\n   * Sets the camera position in the camera matrix\n   */\n  Camera.prototype._setPosition = function (x, y, z) {\n    this.position = createVec3(x, y, z);\n    var m = this.matrix;\n    m[12] = this.position[0];\n    m[13] = this.position[1];\n    m[14] = this.position[2];\n    m[15] = 1;\n    this._getOrthoMatrix();\n  };\n  /**\n   * Recalculates axes based on the current matrix\n   */\n  Camera.prototype._getAxes = function () {\n    vec3.copy(this.right, createVec3(vec4.transformMat4(vec4.create(), [1, 0, 0, 0], this.matrix)));\n    vec3.copy(this.up, createVec3(vec4.transformMat4(vec4.create(), [0, 1, 0, 0], this.matrix)));\n    vec3.copy(this.forward, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 1, 0], this.matrix)));\n    vec3.normalize(this.right, this.right);\n    vec3.normalize(this.up, this.up);\n    vec3.normalize(this.forward, this.forward);\n  };\n  /**\n   * Recalculates euler angles based on the current state\n   */\n  Camera.prototype._getAngles = function () {\n    // Recalculates angles\n    var x = this.distanceVector[0];\n    var y = this.distanceVector[1];\n    var z = this.distanceVector[2];\n    var r = vec3.length(this.distanceVector);\n    // FAST FAIL: If there is no distance we cannot compute angles\n    if (r === 0) {\n      this.elevation = 0;\n      this.azimuth = 0;\n      return;\n    }\n    if (this.type === CameraType.TRACKING) {\n      this.elevation = rad2deg(Math.asin(y / r));\n      this.azimuth = rad2deg(Math.atan2(-x, -z));\n    } else {\n      if (this.rotateWorld) {\n        this.elevation = rad2deg(Math.asin(y / r));\n        this.azimuth = rad2deg(Math.atan2(-x, -z));\n      } else {\n        this.elevation = -rad2deg(Math.asin(y / r));\n        this.azimuth = -rad2deg(Math.atan2(-x, -z));\n      }\n    }\n  };\n  /**\n   * 重新计算相机位置，只有 ORBITING 模式相机位置才会发生变化\n   */\n  Camera.prototype._getPosition = function () {\n    vec3.copy(this.position, createVec3(vec4.transformMat4(vec4.create(), [0, 0, 0, 1], this.matrix)));\n    // 相机位置变化，需要重新计算视距\n    this._getDistance();\n  };\n  /**\n   * 重新计算视点，只有 TRACKING 模式视点才会发生变化\n   */\n  Camera.prototype._getFocalPoint = function () {\n    vec3.transformMat3(this.distanceVector, [0, 0, -this.distance], mat3.fromMat4(mat3.create(), this.matrix));\n    vec3.add(this.focalPoint, this.position, this.distanceVector);\n    // 视点变化，需要重新计算视距\n    this._getDistance();\n  };\n  /**\n   * 重新计算视距\n   */\n  Camera.prototype._getDistance = function () {\n    this.distanceVector = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n    this.distance = vec3.length(this.distanceVector);\n    this.dollyingStep = this.distance / 100;\n  };\n  Camera.prototype._getOrthoMatrix = function () {\n    if (this.projectionMode !== CameraProjectionMode.ORTHOGRAPHIC) {\n      return;\n    }\n    var position = this.position;\n    var rotZ = quat$1.setAxisAngle(quat$1.create(), [0, 0, 1], -this.roll * Math.PI / 180);\n    mat4.fromRotationTranslationScaleOrigin(this.orthoMatrix, rotZ, vec3.fromValues((this.rright - this.left) / 2 - position[0], (this.top - this.bottom) / 2 - position[1], 0), vec3.fromValues(this.zoom, this.zoom, 1), position);\n  };\n  Camera.prototype.triggerUpdate = function () {\n    if (this.enableUpdate) {\n      // update frustum\n      var viewMatrix = this.getViewTransform();\n      var vpMatrix = mat4.multiply(mat4.create(), this.getPerspective(), viewMatrix);\n      this.getFrustum().extractFromVPMatrix(vpMatrix);\n      this.eventEmitter.emit(CameraEvent.UPDATED);\n    }\n  };\n  Camera.prototype.rotate = function (azimuth, elevation, roll) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Camera.prototype.pan = function (tx, ty) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Camera.prototype.dolly = function (value) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Camera.prototype.createLandmark = function (name, params) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Camera.prototype.gotoLandmark = function (name, options) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Camera.prototype.cancelLandmarkAnimation = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  return Camera;\n}();\nfunction memoize(func, resolver) {\n  if (typeof func !== 'function' || resolver != null && typeof resolver !== 'function') {\n    throw new TypeError('Expected a function');\n  }\n  var memoized = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var key = resolver ? resolver.apply(this, args) : args[0];\n    var cache = memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || Map)();\n  return memoized;\n}\nmemoize.Cache = Map;\n\n// These units are iterated through, so be careful when adding or changing the\n// order.\nvar UnitType;\n(function (UnitType) {\n  UnitType[UnitType[\"kUnknown\"] = 0] = \"kUnknown\";\n  UnitType[UnitType[\"kNumber\"] = 1] = \"kNumber\";\n  UnitType[UnitType[\"kPercentage\"] = 2] = \"kPercentage\";\n  // Length units\n  UnitType[UnitType[\"kEms\"] = 3] = \"kEms\";\n  // kExs,\n  UnitType[UnitType[\"kPixels\"] = 4] = \"kPixels\";\n  // kCentimeters,\n  // kMillimeters,\n  // kInches,\n  // kPoints,\n  // kPicas,\n  // kQuarterMillimeters,\n  // https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n  //\n  // See also IsViewportPercentageLength.\n  // kViewportWidth,\n  // kViewportHeight,\n  // kViewportInlineSize,\n  // kViewportBlockSize,\n  // kViewportMin,\n  // kViewportMax,\n  // kSmallViewportWidth,\n  // kSmallViewportHeight,\n  // kSmallViewportInlineSize,\n  // kSmallViewportBlockSize,\n  // kSmallViewportMin,\n  // kSmallViewportMax,\n  // kLargeViewportWidth,\n  // kLargeViewportHeight,\n  // kLargeViewportInlineSize,\n  // kLargeViewportBlockSize,\n  // kLargeViewportMin,\n  // kLargeViewportMax,\n  // kDynamicViewportWidth,\n  // kDynamicViewportHeight,\n  // kDynamicViewportInlineSize,\n  // kDynamicViewportBlockSize,\n  // kDynamicViewportMin,\n  // kDynamicViewportMax,\n  // https://drafts.csswg.org/css-contain-3/#container-lengths\n  //\n  // See also IsContainerPercentageLength.\n  // kContainerWidth,\n  // kContainerHeight,\n  // kContainerInlineSize,\n  // kContainerBlockSize,\n  // kContainerMin,\n  // kContainerMax,\n  UnitType[UnitType[\"kRems\"] = 5] = \"kRems\";\n  // kChs,\n  // kUserUnits, // The SVG term for unitless lengths\n  // Angle units\n  UnitType[UnitType[\"kDegrees\"] = 6] = \"kDegrees\";\n  UnitType[UnitType[\"kRadians\"] = 7] = \"kRadians\";\n  UnitType[UnitType[\"kGradians\"] = 8] = \"kGradians\";\n  UnitType[UnitType[\"kTurns\"] = 9] = \"kTurns\";\n  // Time units\n  UnitType[UnitType[\"kMilliseconds\"] = 10] = \"kMilliseconds\";\n  UnitType[UnitType[\"kSeconds\"] = 11] = \"kSeconds\";\n  // kHertz,\n  // kKilohertz,\n  // Resolution\n  // kDotsPerPixel,\n  // kDotsPerInch,\n  // kDotsPerCentimeter,\n  // Other units\n  // kFraction,\n  UnitType[UnitType[\"kInteger\"] = 12] = \"kInteger\";\n  // This value is used to handle quirky margins in reflow roots (body, td,\n  // and th) like WinIE. The basic idea is that a stylesheet can use the value\n  // __qem (for quirky em) instead of em. When the quirky value is used, if\n  // you're in quirks mode, the margin will collapse away inside a table cell.\n  // This quirk is specified in the HTML spec but our impl is different.\n  // TODO: Remove this. crbug.com/443952\n  // kQuirkyEms,\n})(UnitType || (UnitType = {}));\nvar UnitCategory;\n(function (UnitCategory) {\n  UnitCategory[UnitCategory[\"kUNumber\"] = 0] = \"kUNumber\";\n  UnitCategory[UnitCategory[\"kUPercent\"] = 1] = \"kUPercent\";\n  UnitCategory[UnitCategory[\"kULength\"] = 2] = \"kULength\";\n  UnitCategory[UnitCategory[\"kUAngle\"] = 3] = \"kUAngle\";\n  UnitCategory[UnitCategory[\"kUTime\"] = 4] = \"kUTime\";\n  // kUFrequency,\n  // kUResolution,\n  UnitCategory[UnitCategory[\"kUOther\"] = 5] = \"kUOther\";\n})(UnitCategory || (UnitCategory = {}));\nvar ValueRange;\n(function (ValueRange) {\n  ValueRange[ValueRange[\"kAll\"] = 0] = \"kAll\";\n  ValueRange[ValueRange[\"kNonNegative\"] = 1] = \"kNonNegative\";\n  ValueRange[ValueRange[\"kInteger\"] = 2] = \"kInteger\";\n  ValueRange[ValueRange[\"kNonNegativeInteger\"] = 3] = \"kNonNegativeInteger\";\n  ValueRange[ValueRange[\"kPositiveInteger\"] = 4] = \"kPositiveInteger\";\n})(ValueRange || (ValueRange = {}));\nvar Nested;\n(function (Nested) {\n  Nested[Nested[\"kYes\"] = 0] = \"kYes\";\n  Nested[Nested[\"kNo\"] = 1] = \"kNo\";\n})(Nested || (Nested = {}));\nvar ParenLess;\n(function (ParenLess) {\n  ParenLess[ParenLess[\"kYes\"] = 0] = \"kYes\";\n  ParenLess[ParenLess[\"kNo\"] = 1] = \"kNo\";\n})(ParenLess || (ParenLess = {}));\n\n// This file specifies the unit strings used in CSSPrimitiveValues.\nvar data = [{\n  name: 'em',\n  unit_type: UnitType.kEms\n},\n// {\n//   name: 'ex',\n//   unit_type: UnitType.kExs,\n// },\n{\n  name: 'px',\n  unit_type: UnitType.kPixels\n},\n// {\n//   name: \"cm\",\n//   unit_type: UnitType.kCentimeters,\n// },\n// {\n//   name: \"mm\",\n//   unit_type: UnitType.kMillimeters,\n// },\n// {\n//   name: \"q\",\n//   unit_type: UnitType.kQuarterMillimeters,\n// },\n// {\n//   name: \"in\",\n//   unit_type: UnitType.kInches,\n// },\n// {\n//   name: \"pt\",\n//   unit_type: UnitType.kPoints,\n// },\n// {\n//   name: \"pc\",\n//   unit_type: UnitType.kPicas,\n// },\n{\n  name: 'deg',\n  unit_type: UnitType.kDegrees\n}, {\n  name: 'rad',\n  unit_type: UnitType.kRadians\n}, {\n  name: 'grad',\n  unit_type: UnitType.kGradians\n}, {\n  name: 'ms',\n  unit_type: UnitType.kMilliseconds\n}, {\n  name: 's',\n  unit_type: UnitType.kSeconds\n},\n// {\n//   name: \"hz\",\n//   unit_type: UnitType.kHertz,\n// },\n// {\n//   name: \"khz\",\n//   unit_type: UnitType.kKilohertz,\n// },\n// {\n//   name: \"dpi\",\n//   unit_type: \"kDotsPerInch\",\n// },\n// {\n//   name: \"dpcm\",\n//   unit_type: \"kDotsPerCentimeter\",\n// },\n// {\n//   name: \"dppx\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"x\",\n//   unit_type: \"kDotsPerPixel\",\n// },\n// {\n//   name: \"vw\",\n//   unit_type: \"kViewportWidth\",\n// },\n// {\n//   name: \"vh\",\n//   unit_type: \"kViewportHeight\",\n// },\n// {\n//   name: \"vi\",\n//   unit_type: \"kViewportInlineSize\",\n// },\n// {\n//   name: \"vb\",\n//   unit_type: \"kViewportBlockSize\",\n// },\n// {\n//   name: \"vmin\",\n//   unit_type: UnitType.kViewportMin,\n// },\n// {\n//   name: \"vmax\",\n//   unit_type: UnitType.kViewportMax,\n// },\n// {\n//   name: \"svw\",\n//   unit_type: \"kSmallViewportWidth\",\n// },\n// {\n//   name: \"svh\",\n//   unit_type: \"kSmallViewportHeight\",\n// },\n// {\n//   name: \"svi\",\n//   unit_type: \"kSmallViewportInlineSize\",\n// },\n// {\n//   name: \"svb\",\n//   unit_type: \"kSmallViewportBlockSize\",\n// },\n// {\n//   name: \"svmin\",\n//   unit_type: \"kSmallViewportMin\",\n// },\n// {\n//   name: \"svmax\",\n//   unit_type: \"kSmallViewportMax\",\n// },\n// {\n//   name: \"lvw\",\n//   unit_type: \"kLargeViewportWidth\",\n// },\n// {\n//   name: \"lvh\",\n//   unit_type: \"kLargeViewportHeight\",\n// },\n// {\n//   name: \"lvi\",\n//   unit_type: \"kLargeViewportInlineSize\",\n// },\n// {\n//   name: \"lvb\",\n//   unit_type: \"kLargeViewportBlockSize\",\n// },\n// {\n//   name: \"lvmin\",\n//   unit_type: UnitType.kLargeViewportMin,\n// },\n// {\n//   name: \"lvmax\",\n//   unit_type: UnitType.kLargeViewportMax,\n// },\n// {\n//   name: \"dvw\",\n//   unit_type: UnitType.kDynamicViewportWidth,\n// },\n// {\n//   name: \"dvh\",\n//   unit_type: UnitType.kDynamicViewportHeight,\n// },\n// {\n//   name: \"dvi\",\n//   unit_type: UnitType.kDynamicViewportInlineSize,\n// },\n// {\n//   name: \"dvb\",\n//   unit_type: UnitType.kDynamicViewportBlockSize,\n// },\n// {\n//   name: \"dvmin\",\n//   unit_type: UnitType.kDynamicViewportMin,\n// },\n// {\n//   name: \"dvmax\",\n//   unit_type: UnitType.kDynamicViewportMax,\n// },\n// {\n//   name: \"cqw\",\n//   unit_type: UnitType.kContainerWidth,\n// },\n// {\n//   name: \"cqh\",\n//   unit_type: UnitType.kContainerHeight,\n// },\n// {\n//   name: \"cqi\",\n//   unit_type: UnitType.kContainerInlineSize,\n// },\n// {\n//   name: \"cqb\",\n//   unit_type: UnitType.kContainerBlockSize,\n// },\n// {\n//   name: \"cqmin\",\n//   unit_type: UnitType.kContainerMin,\n// },\n// {\n//   name: \"cqmax\",\n//   unit_type: UnitType.kContainerMax,\n// },\n{\n  name: 'rem',\n  unit_type: UnitType.kRems\n},\n// {\n//   name: 'fr',\n//   unit_type: UnitType.kFraction,\n// },\n{\n  name: 'turn',\n  unit_type: UnitType.kTurns\n}\n// {\n//   name: 'ch',\n//   unit_type: UnitType.kChs,\n// },\n// {\n//   name: '__qem',\n//   unit_type: UnitType.kQuirkyEms,\n// },\n];\nvar CSSStyleValueType;\n(function (CSSStyleValueType) {\n  CSSStyleValueType[CSSStyleValueType[\"kUnknownType\"] = 0] = \"kUnknownType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnparsedType\"] = 1] = \"kUnparsedType\";\n  CSSStyleValueType[CSSStyleValueType[\"kKeywordType\"] = 2] = \"kKeywordType\";\n  // Start of CSSNumericValue subclasses\n  CSSStyleValueType[CSSStyleValueType[\"kUnitType\"] = 3] = \"kUnitType\";\n  CSSStyleValueType[CSSStyleValueType[\"kSumType\"] = 4] = \"kSumType\";\n  CSSStyleValueType[CSSStyleValueType[\"kProductType\"] = 5] = \"kProductType\";\n  CSSStyleValueType[CSSStyleValueType[\"kNegateType\"] = 6] = \"kNegateType\";\n  CSSStyleValueType[CSSStyleValueType[\"kInvertType\"] = 7] = \"kInvertType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMinType\"] = 8] = \"kMinType\";\n  CSSStyleValueType[CSSStyleValueType[\"kMaxType\"] = 9] = \"kMaxType\";\n  CSSStyleValueType[CSSStyleValueType[\"kClampType\"] = 10] = \"kClampType\";\n  // End of CSSNumericValue subclasses\n  CSSStyleValueType[CSSStyleValueType[\"kTransformType\"] = 11] = \"kTransformType\";\n  CSSStyleValueType[CSSStyleValueType[\"kPositionType\"] = 12] = \"kPositionType\";\n  CSSStyleValueType[CSSStyleValueType[\"kURLImageType\"] = 13] = \"kURLImageType\";\n  CSSStyleValueType[CSSStyleValueType[\"kColorType\"] = 14] = \"kColorType\";\n  CSSStyleValueType[CSSStyleValueType[\"kUnsupportedColorType\"] = 15] = \"kUnsupportedColorType\";\n})(CSSStyleValueType || (CSSStyleValueType = {}));\n// function parseCSSStyleValue(propertyName: string, value: string): CSSStyleValue[] {\n//   // const propertyId = cssPropertyID(propertyName);\n//   // if (propertyId === CSSPropertyID.kInvalid) {\n//   //   return [];\n//   // }\n//   // const customPropertyName = propertyId === CSSPropertyID.kVariable ? propertyName : null;\n//   // return fromString(propertyId, customPropertyName, value);\n//   return [];\n// }\nvar stringToUnitType = function (name) {\n  return data.find(function (item) {\n    return item.name === name;\n  }).unit_type;\n};\nvar unitFromName = function (name) {\n  if (!name) {\n    return UnitType.kUnknown;\n  }\n  if (name === 'number') {\n    return UnitType.kNumber;\n  }\n  if (name === 'percent' || name === '%') {\n    return UnitType.kPercentage;\n  }\n  return stringToUnitType(name);\n};\nvar unitTypeToUnitCategory = function (type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      return UnitCategory.kUNumber;\n    case UnitType.kPercentage:\n      return UnitCategory.kUPercent;\n    case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      return UnitCategory.kULength;\n    case UnitType.kMilliseconds:\n    case UnitType.kSeconds:\n      return UnitCategory.kUTime;\n    case UnitType.kDegrees:\n    case UnitType.kRadians:\n    case UnitType.kGradians:\n    case UnitType.kTurns:\n      return UnitCategory.kUAngle;\n    // case UnitType.kHertz:\n    // case UnitType.kKilohertz:\n    //   return UnitCategory.kUFrequency;\n    // case UnitType.kDotsPerPixel:\n    // case UnitType.kDotsPerInch:\n    // case UnitType.kDotsPerCentimeter:\n    //   return UnitCategory.kUResolution;\n    default:\n      return UnitCategory.kUOther;\n  }\n};\nvar canonicalUnitTypeForCategory = function (category) {\n  // The canonical unit type is chosen according to the way\n  // CSSPropertyParser.ValidUnit() chooses the default unit in each category\n  // (based on unitflags).\n  switch (category) {\n    case UnitCategory.kUNumber:\n      return UnitType.kNumber;\n    case UnitCategory.kULength:\n      return UnitType.kPixels;\n    case UnitCategory.kUPercent:\n      return UnitType.kPercentage;\n    // return UnitType.kUnknown; // Cannot convert between numbers and percent.\n    case UnitCategory.kUTime:\n      return UnitType.kSeconds;\n    case UnitCategory.kUAngle:\n      return UnitType.kDegrees;\n    // case UnitCategory.kUFrequency:\n    //   return UnitType.kHertz;\n    // case UnitCategory.kUResolution:\n    //   return UnitType.kDotsPerPixel;\n    default:\n      return UnitType.kUnknown;\n  }\n};\n/**\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/css_primitive_value.cc#353\n */\nvar conversionToCanonicalUnitsScaleFactor = function (unit_type) {\n  var factor = 1.0;\n  // FIXME: the switch can be replaced by an array of scale factors.\n  switch (unit_type) {\n    // These are \"canonical\" units in their respective categories.\n    case UnitType.kPixels:\n    // case UnitType.kUserUnits:\n    case UnitType.kDegrees:\n    case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      break;\n    case UnitType.kMilliseconds:\n      factor = 0.001;\n      break;\n    // case UnitType.kCentimeters:\n    //   // factor = kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kDotsPerCentimeter:\n    //   // factor = 1 / kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kMillimeters:\n    //   // factor = kCssPixelsPerMillimeter;\n    //   break;\n    // case UnitType.kQuarterMillimeters:\n    //   // factor = kCssPixelsPerQuarterMillimeter;\n    //   break;\n    // case UnitType.kInches:\n    //   // factor = kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kDotsPerInch:\n    //   // factor = 1 / kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kPoints:\n    //   // factor = kCssPixelsPerPoint;\n    //   break;\n    // case UnitType.kPicas:\n    //   // factor = kCssPixelsPerPica;\n    //   break;\n    case UnitType.kRadians:\n      factor = 180 / Math.PI;\n      break;\n    case UnitType.kGradians:\n      factor = 0.9;\n      break;\n    case UnitType.kTurns:\n      factor = 360;\n      break;\n  }\n  return factor;\n};\nvar unitTypeToString = function (type) {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      // case UnitType.kUserUnits:\n      return '';\n    case UnitType.kPercentage:\n      return '%';\n    case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      return 'em';\n    // case UnitType.kExs:\n    //   return 'ex';\n    case UnitType.kRems:\n      return 'rem';\n    // case UnitType.kChs:\n    //   return 'ch';\n    case UnitType.kPixels:\n      return 'px';\n    // case UnitType.kCentimeters:\n    //   return 'cm';\n    // case UnitType.kDotsPerPixel:\n    //   return 'dppx';\n    // case UnitType.kDotsPerInch:\n    //   return 'dpi';\n    // case UnitType.kDotsPerCentimeter:\n    //   return 'dpcm';\n    // case UnitType.kMillimeters:\n    //   return 'mm';\n    // case UnitType.kQuarterMillimeters:\n    //   return 'q';\n    // case UnitType.kInches:\n    //   return 'in';\n    // case UnitType.kPoints:\n    //   return 'pt';\n    // case UnitType.kPicas:\n    //   return 'pc';\n    case UnitType.kDegrees:\n      return 'deg';\n    case UnitType.kRadians:\n      return 'rad';\n    case UnitType.kGradians:\n      return 'grad';\n    case UnitType.kMilliseconds:\n      return 'ms';\n    case UnitType.kSeconds:\n      return 's';\n    // case UnitType.kHertz:\n    //   return 'hz';\n    // case UnitType.kKilohertz:\n    //   return 'khz';\n    case UnitType.kTurns:\n      return 'turn';\n  }\n  return '';\n};\n/**\n * CSSStyleValue is the base class for all CSS values accessible from Typed OM.\n * Values that are not yet supported as specific types are also returned as base CSSStyleValues.\n *\n * Spec @see https://drafts.css-houdini.org/css-typed-om/#stylevalue-objects\n * Docs @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleValue\n */\nvar CSSStyleValue = /** @class */function () {\n  function CSSStyleValue() {}\n  // static parse(propertyName: string, value: string): CSSStyleValue {\n  //   return parseCSSStyleValue(propertyName, value)[0];\n  // }\n  // static parseAll(propertyName: string, value: string): CSSStyleValue[] {\n  //   return parseCSSStyleValue(propertyName, value);\n  // }\n  CSSStyleValue.isAngle = function (unit) {\n    return unit === UnitType.kDegrees || unit === UnitType.kRadians || unit === UnitType.kGradians || unit === UnitType.kTurns;\n  };\n  // static isViewportPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kViewportWidth && type <= UnitType.kDynamicViewportMax;\n  // }\n  // static isContainerPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kContainerWidth && type <= UnitType.kContainerMax;\n  // }\n  CSSStyleValue.isLength = function (type) {\n    // return (type >= UnitType.kEms && type <= UnitType.kUserUnits) || type == UnitType.kQuirkyEms;\n    return type >= UnitType.kEms && type < UnitType.kDegrees;\n  };\n  CSSStyleValue.isRelativeUnit = function (type) {\n    return type === UnitType.kPercentage || type === UnitType.kEms ||\n    // type === UnitType.kExs ||\n    type === UnitType.kRems\n    // type === UnitType.kChs ||\n    // this.isViewportPercentageLength(type) ||\n    // this.isContainerPercentageLength(type)\n    ;\n  };\n  CSSStyleValue.isTime = function (unit) {\n    return unit === UnitType.kSeconds || unit === UnitType.kMilliseconds;\n  };\n  // protected abstract toCSSValue(): CSSValue;\n  CSSStyleValue.prototype.toString = function () {\n    return this.buildCSSText(Nested.kNo, ParenLess.kNo, '');\n  };\n  CSSStyleValue.prototype.isNumericValue = function () {\n    return this.getType() >= CSSStyleValueType.kUnitType && this.getType() <= CSSStyleValueType.kClampType;\n  };\n  return CSSStyleValue;\n}();\n\n/**\n * CSSColorValue is the base class used for the various CSS color interfaces.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#colorvalue-objects\n */\nvar CSSColorValue = /** @class */function (_super) {\n  __extends(CSSColorValue, _super);\n  function CSSColorValue(colorSpace) {\n    var _this = _super.call(this) || this;\n    _this.colorSpace = colorSpace;\n    return _this;\n  }\n  CSSColorValue.prototype.getType = function () {\n    return CSSStyleValueType.kColorType;\n  };\n  // buildCSSText(n: Nested, p: ParenLess, result: string): string {\n  //   let text = '';\n  //   if (this.colorSpace === 'rgb') {\n  //     text = `rgba(${this.channels.join(',')},${this.alpha})`;\n  //   }\n  //   return (result += text);\n  // }\n  /**\n   * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-to\n   */\n  CSSColorValue.prototype.to = function (colorSpace) {\n    return this;\n  };\n  return CSSColorValue;\n}(CSSStyleValue);\nvar GradientType;\n(function (GradientType) {\n  GradientType[GradientType[\"Constant\"] = 0] = \"Constant\";\n  GradientType[GradientType[\"LinearGradient\"] = 1] = \"LinearGradient\";\n  GradientType[GradientType[\"RadialGradient\"] = 2] = \"RadialGradient\";\n})(GradientType || (GradientType = {}));\nvar CSSGradientValue = /** @class */function (_super) {\n  __extends(CSSGradientValue, _super);\n  function CSSGradientValue(type, value) {\n    var _this = _super.call(this) || this;\n    _this.type = type;\n    _this.value = value;\n    return _this;\n  }\n  CSSGradientValue.prototype.clone = function () {\n    return new CSSGradientValue(this.type, this.value);\n  };\n  CSSGradientValue.prototype.buildCSSText = function (n, p, result) {\n    return result;\n  };\n  CSSGradientValue.prototype.getType = function () {\n    return CSSStyleValueType.kColorType;\n  };\n  return CSSGradientValue;\n}(CSSStyleValue);\n\n/**\n * CSSKeywordValue represents CSS Values that are specified as keywords\n * eg. 'initial'\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSKeywordValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_keyword_value.idl\n */\nvar CSSKeywordValue = /** @class */function (_super) {\n  __extends(CSSKeywordValue, _super);\n  function CSSKeywordValue(value) {\n    var _this = _super.call(this) || this;\n    _this.value = value;\n    return _this;\n  }\n  CSSKeywordValue.prototype.clone = function () {\n    return new CSSKeywordValue(this.value);\n  };\n  CSSKeywordValue.prototype.getType = function () {\n    return CSSStyleValueType.kKeywordType;\n  };\n  CSSKeywordValue.prototype.buildCSSText = function (n, p, result) {\n    return result + this.value;\n  };\n  return CSSKeywordValue;\n}(CSSStyleValue);\nvar camelCase = memoize(function (str) {\n  if (str === void 0) {\n    str = '';\n  }\n  return str.replace(/-([a-z])/g, function (g) {\n    return g[1].toUpperCase();\n  });\n});\nvar kebabize = function (str) {\n  return str.split('').map(function (letter, idx) {\n    return letter.toUpperCase() === letter ? \"\".concat(idx !== 0 ? '-' : '').concat(letter.toLowerCase()) : letter;\n  }).join('');\n};\nfunction DCHECK(bool) {\n  if (!bool) {\n    throw new Error();\n  }\n}\nfunction isFunction(func) {\n  return typeof func === 'function';\n}\nfunction isSymbol(value) {\n  // @see https://github.com/lodash/lodash/blob/master/isSymbol.js\n  return typeof value === 'symbol';\n}\nvar definedProps = function (obj) {\n  return Object.fromEntries(Object.entries(obj).filter(function (_a) {\n    var _b = __read(_a, 2),\n      v = _b[1];\n    return v !== undefined;\n  }));\n};\nvar FORMAT_ATTR_MAP = {\n  d: {\n    alias: 'path'\n  },\n  strokeDasharray: {\n    alias: 'lineDash'\n  },\n  strokeWidth: {\n    alias: 'lineWidth'\n  },\n  textAnchor: {\n    alias: 'textAlign'\n  },\n  src: {\n    alias: 'img'\n  }\n};\nvar formatAttributeName = memoize(function (name) {\n  var attributeName = camelCase(name);\n  var map = FORMAT_ATTR_MAP[attributeName];\n  attributeName = (map === null || map === void 0 ? void 0 : map.alias) || attributeName;\n  return attributeName;\n});\n\n// type CSSNumericBaseType =\n//   | 'length'\n//   | 'angle'\n//   | 'time'\n//   | 'frequency'\n//   | 'resolution'\n//   | 'flex'\n//   | 'percent';\n// https://drafts.css-houdini.org/css-typed-om/#dictdef-cssnumerictype\n// interface CSSNumericType {\n//   length: number;\n//   angle: number;\n//   time: number;\n//   frequency: number;\n//   resolution: number;\n//   flex: number;\n//   percent: number;\n//   percentHint: CSSNumericBaseType;\n// }\nvar formatInfinityOrNaN = function (number, suffix) {\n  if (suffix === void 0) {\n    suffix = '';\n  }\n  var result = '';\n  if (!Number.isFinite(number)) {\n    if (number > 0) result = 'infinity';else result = '-infinity';\n  } else {\n    DCHECK(Number.isNaN(number));\n    result = 'NaN';\n  }\n  return result += suffix;\n};\nvar toCanonicalUnit = function (unit) {\n  return canonicalUnitTypeForCategory(unitTypeToUnitCategory(unit));\n};\n/**\n * CSSNumericValue is the base class for numeric and length typed CSS Values.\n * @see https://drafts.css-houdini.org/css-typed-om/#numeric-objects\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSNumericValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_numeric_value.idl\n */\n/**\n * Represents numeric values that can be expressed as a single number plus a\n * unit (or a naked number or percentage).\n * @see https://drafts.css-houdini.org/css-typed-om/#cssunitvalue\n */\nvar CSSUnitValue = /** @class */function (_super) {\n  __extends(CSSUnitValue, _super);\n  function CSSUnitValue(value, unitOrName) {\n    if (unitOrName === void 0) {\n      unitOrName = UnitType.kNumber;\n    }\n    var _this = _super.call(this) || this;\n    var unit;\n    if (typeof unitOrName === 'string') {\n      unit = unitFromName(unitOrName);\n    } else {\n      unit = unitOrName;\n    }\n    _this.unit = unit;\n    _this.value = value;\n    return _this;\n  }\n  CSSUnitValue.prototype.clone = function () {\n    return new CSSUnitValue(this.value, this.unit);\n  };\n  CSSUnitValue.prototype.equals = function (other) {\n    var other_unit_value = other;\n    return this.value === other_unit_value.value && this.unit === other_unit_value.unit;\n  };\n  CSSUnitValue.prototype.getType = function () {\n    return CSSStyleValueType.kUnitType;\n  };\n  CSSUnitValue.prototype.convertTo = function (target_unit) {\n    if (this.unit === target_unit) {\n      return new CSSUnitValue(this.value, this.unit);\n    }\n    // Instead of defining the scale factors for every unit to every other unit,\n    // we simply convert to the canonical unit and back since we already have\n    // the scale factors for canonical units.\n    var canonical_unit = toCanonicalUnit(this.unit);\n    if (canonical_unit !== toCanonicalUnit(target_unit) || canonical_unit === UnitType.kUnknown) {\n      return null;\n    }\n    var scale_factor = conversionToCanonicalUnitsScaleFactor(this.unit) / conversionToCanonicalUnitsScaleFactor(target_unit);\n    return new CSSUnitValue(this.value * scale_factor, target_unit);\n  };\n  CSSUnitValue.prototype.buildCSSText = function (n, p, result) {\n    var text;\n    switch (this.unit) {\n      case UnitType.kUnknown:\n        // FIXME\n        break;\n      case UnitType.kInteger:\n        text = Number(this.value).toFixed(0);\n        break;\n      case UnitType.kNumber:\n      case UnitType.kPercentage:\n      case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      // case UnitType.kExs:\n      case UnitType.kRems:\n      // case UnitType.kChs:\n      case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kDotsPerPixel:\n      // case UnitType.kDotsPerInch:\n      // case UnitType.kDotsPerCentimeter:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      case UnitType.kDegrees:\n      case UnitType.kRadians:\n      case UnitType.kGradians:\n      case UnitType.kMilliseconds:\n      case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      // case UnitType.kKilohertz:\n      case UnitType.kTurns:\n        // case UnitType.kContainerMax: { // case UnitType.kContainerMin: // case UnitType.kContainerBlockSize: // case UnitType.kContainerInlineSize: // case UnitType.kContainerHeight: // case UnitType.kContainerWidth: // case UnitType.kDynamicViewportMax: // case UnitType.kDynamicViewportMin: // case UnitType.kDynamicViewportBlockSize: // case UnitType.kDynamicViewportInlineSize: // case UnitType.kDynamicViewportHeight: // case UnitType.kDynamicViewportWidth: // case UnitType.kLargeViewportMax: // case UnitType.kLargeViewportMin: // case UnitType.kLargeViewportBlockSize: // case UnitType.kLargeViewportInlineSize: // case UnitType.kLargeViewportHeight: // case UnitType.kLargeViewportWidth: // case UnitType.kSmallViewportMax: // case UnitType.kSmallViewportMin: // case UnitType.kSmallViewportBlockSize: // case UnitType.kSmallViewportInlineSize: // case UnitType.kSmallViewportHeight: // case UnitType.kSmallViewportWidth: // case UnitType.kViewportMax: // case UnitType.kViewportMin: // case UnitType.kViewportBlockSize: // case UnitType.kViewportInlineSize: // case UnitType.kViewportHeight: // case UnitType.kViewportWidth: // case UnitType.kFraction:\n        {\n          var kMinInteger = -999999;\n          var kMaxInteger = 999999;\n          var value = this.value;\n          var unit = unitTypeToString(this.unit);\n          if (value < kMinInteger || value > kMaxInteger) {\n            var unit_1 = unitTypeToString(this.unit);\n            if (!Number.isFinite(value) || Number.isNaN(value)) {\n              text = formatInfinityOrNaN(value, unit_1);\n            } else {\n              text = value + (unit_1 || '');\n            }\n          } else {\n            text = \"\".concat(value).concat(unit);\n          }\n        }\n    }\n    result += text;\n    return result;\n  };\n  return CSSUnitValue;\n}(CSSStyleValue);\nvar Opx = new CSSUnitValue(0, 'px');\nnew CSSUnitValue(1, 'px');\nvar Odeg = new CSSUnitValue(0, 'deg');\n\n/**\n * The CSSRGB class represents the CSS rgb()/rgba() functions.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#cssrgb\n */\nvar CSSRGB = /** @class */function (_super) {\n  __extends(CSSRGB, _super);\n  function CSSRGB(r, g, b, alpha,\n  /**\n   * 'transparent' & 'none' has the same rgba data\n   */\n  isNone) {\n    if (alpha === void 0) {\n      alpha = 1;\n    }\n    if (isNone === void 0) {\n      isNone = false;\n    }\n    var _this = _super.call(this, 'rgb') || this;\n    _this.r = r;\n    _this.g = g;\n    _this.b = b;\n    _this.alpha = alpha;\n    _this.isNone = isNone;\n    return _this;\n  }\n  CSSRGB.prototype.clone = function () {\n    return new CSSRGB(this.r, this.g, this.b, this.alpha);\n  };\n  CSSRGB.prototype.buildCSSText = function (n, p, result) {\n    return result + \"rgba(\".concat(this.r, \",\").concat(this.g, \",\").concat(this.b, \",\").concat(this.alpha, \")\");\n  };\n  return CSSRGB;\n}(CSSColorValue);\n\n/**\n * CSSKeywordValue\n */\nvar unsetKeywordValue = new CSSKeywordValue('unset');\nvar initialKeywordValue = new CSSKeywordValue('initial');\nvar inheritKeywordValue = new CSSKeywordValue('inherit');\nvar keywordCache = {\n  '': unsetKeywordValue,\n  unset: unsetKeywordValue,\n  initial: initialKeywordValue,\n  inherit: inheritKeywordValue\n};\nvar getOrCreateKeyword = function (name) {\n  if (!keywordCache[name]) {\n    keywordCache[name] = new CSSKeywordValue(name);\n  }\n  return keywordCache[name];\n};\n/**\n * CSSColor\n */\nvar noneColor = new CSSRGB(0, 0, 0, 0, true);\nvar transparentColor = new CSSRGB(0, 0, 0, 0);\nvar getOrCreateRGBA = memoize(function (r, g, b, a) {\n  return new CSSRGB(r, g, b, a);\n}, function (r, g, b, a) {\n  return \"rgba(\".concat(r, \",\").concat(g, \",\").concat(b, \",\").concat(a, \")\");\n});\n// export const getOrCreateUnitValue = memoize(\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return new CSSUnitValue(value, unitOrName);\n//   },\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return `${value}${unitOrName}`;\n//   },\n// );\nvar getOrCreateUnitValue = function (value, unitOrName) {\n  if (unitOrName === void 0) {\n    unitOrName = UnitType.kNumber;\n  }\n  return new CSSUnitValue(value, unitOrName);\n};\nvar PECENTAGE_50 = new CSSUnitValue(50, '%');\n\n/**\n * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n */\nvar Strategy;\n(function (Strategy) {\n  Strategy[Strategy[\"Standard\"] = 0] = \"Standard\";\n})(Strategy || (Strategy = {}));\nvar SortReason;\n(function (SortReason) {\n  SortReason[SortReason[\"ADDED\"] = 0] = \"ADDED\";\n  SortReason[SortReason[\"REMOVED\"] = 1] = \"REMOVED\";\n  SortReason[SortReason[\"Z_INDEX_CHANGED\"] = 2] = \"Z_INDEX_CHANGED\";\n})(SortReason || (SortReason = {}));\nvar EMPTY_PARSED_PATH = {\n  absolutePath: [],\n  hasArc: false,\n  segments: [],\n  polygons: [],\n  polylines: [],\n  curve: null,\n  totalLength: 0,\n  rect: new Rectangle(0, 0, 0, 0)\n};\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type\n */\nvar PropertySyntax;\n(function (PropertySyntax) {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#coordinate\n   */\n  PropertySyntax[\"COORDINATE\"] = \"<coordinate>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#color\n   */\n  PropertySyntax[\"COLOR\"] = \"<color>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#paint\n   */\n  PropertySyntax[\"PAINT\"] = \"<paint>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#number\n   */\n  PropertySyntax[\"NUMBER\"] = \"<number>\";\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/angle\n   */\n  PropertySyntax[\"ANGLE\"] = \"<angle>\";\n  /**\n   * <number> with range 0..1\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#opacity_value\n   */\n  PropertySyntax[\"OPACITY_VALUE\"] = \"<opacity-value>\";\n  /**\n   * <number> with range 0..Infinity\n   */\n  PropertySyntax[\"SHADOW_BLUR\"] = \"<shadow-blur>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#length\n   */\n  PropertySyntax[\"LENGTH\"] = \"<length>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#percentage\n   */\n  PropertySyntax[\"PERCENTAGE\"] = \"<percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE\"] = \"<length> | <percentage>\";\n  PropertySyntax[\"LENGTH_PERCENTAGE_12\"] = \"[<length> | <percentage>]{1,2}\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/margin#formal_syntax\n   */\n  PropertySyntax[\"LENGTH_PERCENTAGE_14\"] = \"[<length> | <percentage>]{1,4}\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#list-of-ts\n   */\n  PropertySyntax[\"LIST_OF_POINTS\"] = \"<list-of-points>\";\n  PropertySyntax[\"PATH\"] = \"<path>\";\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter#formal_syntax\n   */\n  PropertySyntax[\"FILTER\"] = \"<filter>\";\n  PropertySyntax[\"Z_INDEX\"] = \"<z-index>\";\n  PropertySyntax[\"OFFSET_DISTANCE\"] = \"<offset-distance>\";\n  PropertySyntax[\"DEFINED_PATH\"] = \"<defined-path>\";\n  PropertySyntax[\"MARKER\"] = \"<marker>\";\n  PropertySyntax[\"TRANSFORM\"] = \"<transform>\";\n  PropertySyntax[\"TRANSFORM_ORIGIN\"] = \"<transform-origin>\";\n  PropertySyntax[\"TEXT\"] = \"<text>\";\n  PropertySyntax[\"TEXT_TRANSFORM\"] = \"<text-transform>\";\n})(PropertySyntax || (PropertySyntax = {}));\n\n/**\n * borrow from gradient-parser, but we delete some browser compatible prefix such as `-webkit-`\n * @see https://github.com/rafaelcaricio/gradient-parser\n */\nfunction colorStopToString(colorStop) {\n  var type = colorStop.type,\n    value = colorStop.value;\n  if (type === 'hex') {\n    return \"#\".concat(value);\n  } else if (type === 'literal') {\n    return value;\n  } else if (type === 'rgb') {\n    return \"rgb(\".concat(value.join(','), \")\");\n  } else {\n    return \"rgba(\".concat(value.join(','), \")\");\n  }\n}\nvar parseGradient$1 = function () {\n  var tokens = {\n    linearGradient: /^(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(repeating\\-radial\\-gradient)/i,\n    /**\n     * @see https://projects.verou.me/conic-gradient/\n     */\n    conicGradient: /^(conic\\-gradient)/i,\n    sideOrCorner: /^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,\n    extentKeywords: /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/\n  };\n  var input = '';\n  function error(msg) {\n    throw new Error(input + ': ' + msg);\n  }\n  function getAST() {\n    var ast = matchListDefinitions();\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n    return ast;\n  }\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n  function matchDefinition() {\n    return matchGradient('linear-gradient', tokens.linearGradient, matchLinearOrientation) || matchGradient('repeating-linear-gradient', tokens.repeatingLinearGradient, matchLinearOrientation) || matchGradient('radial-gradient', tokens.radialGradient, matchListRadialOrientations) || matchGradient('repeating-radial-gradient', tokens.repeatingRadialGradient, matchListRadialOrientations) || matchGradient('conic-gradient', tokens.conicGradient, matchListRadialOrientations);\n  }\n  function matchGradient(gradientType, pattern, orientationMatcher) {\n    return matchCall(pattern, function (captures) {\n      var orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n      return {\n        type: gradientType,\n        orientation: orientation,\n        colorStops: matchListing(matchColorStop)\n      };\n    });\n  }\n  function matchCall(pattern, callback) {\n    var captures = scan(pattern);\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n      var result = callback(captures);\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n      return result;\n    }\n  }\n  function matchLinearOrientation() {\n    return matchSideOrCorner() || matchAngle();\n  }\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n  function matchListRadialOrientations() {\n    var radialOrientations,\n      radialOrientation = matchRadialOrientation(),\n      lookaheadCache;\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n    return radialOrientations;\n  }\n  function matchRadialOrientation() {\n    var radialType = matchCircle() || matchEllipse();\n    if (radialType) {\n      // @ts-ignore\n      radialType.at = matchAtPosition();\n    } else {\n      var extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        var positionAt = matchAtPosition();\n        if (positionAt) {\n          // @ts-ignore\n          radialType.at = positionAt;\n        }\n      } else {\n        var defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            // @ts-ignore\n            at: defaultPosition\n          };\n        }\n      }\n    }\n    return radialType;\n  }\n  function matchCircle() {\n    var circle = match('shape', /^(circle)/i, 0);\n    if (circle) {\n      // @ts-ignore\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n    return circle;\n  }\n  function matchEllipse() {\n    var ellipse = match('shape', /^(ellipse)/i, 0);\n    if (ellipse) {\n      // @ts-ignore\n      ellipse.style = matchDistance() || matchExtentKeyword();\n    }\n    return ellipse;\n  }\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      var positioning = matchPositioning();\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n      return positioning;\n    }\n  }\n  function matchPositioning() {\n    var location = matchCoordinates();\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location\n      };\n    }\n  }\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance()\n    };\n  }\n  function matchListing(matcher) {\n    var captures = matcher();\n    var result = [];\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n    return result;\n  }\n  function matchColorStop() {\n    var color = matchColor();\n    if (!color) {\n      error('Expected color definition');\n    }\n    color.length = matchDistance();\n    return color;\n  }\n  function matchColor() {\n    return matchHexColor() || matchRGBAColor() || matchRGBColor() || matchLiteralColor();\n  }\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function () {\n      return {\n        type: 'rgb',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function () {\n      return {\n        type: 'rgba',\n        value: matchListing(matchNumber)\n      };\n    });\n  }\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n  function matchDistance() {\n    return match('%', tokens.percentageValue, 1) || matchPositionKeyword() || matchLength();\n  }\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) || match('em', tokens.emValue, 1);\n  }\n  function match(type, pattern, captureIndex) {\n    var captures = scan(pattern);\n    if (captures) {\n      return {\n        type: type,\n        value: captures[captureIndex]\n      };\n    }\n  }\n  function scan(regexp) {\n    var blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n      consume(blankCaptures[0].length);\n    }\n    var captures = regexp.exec(input);\n    if (captures) {\n      consume(captures[0].length);\n    }\n    return captures;\n  }\n  function consume(size) {\n    input = input.substring(size);\n  }\n  return function (code) {\n    input = code;\n    return getAST();\n  };\n}();\nfunction computeLinearGradient(width, height, angle) {\n  var rad = deg2rad(angle.value);\n  var rx = 0;\n  var ry = 0;\n  var rcx = rx + width / 2;\n  var rcy = ry + height / 2;\n  // get the length of gradient line\n  // @see https://observablehq.com/@danburzo/css-gradient-line\n  var length = Math.abs(width * Math.cos(rad)) + Math.abs(height * Math.sin(rad));\n  var x1 = rcx - Math.cos(rad) * length / 2;\n  var y1 = rcy - Math.sin(rad) * length / 2;\n  var x2 = rcx + Math.cos(rad) * length / 2;\n  var y2 = rcy + Math.sin(rad) * length / 2;\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2\n  };\n}\nfunction computeRadialGradient(width, height, cx, cy, size) {\n  // 'px'\n  var x = cx.value;\n  var y = cy.value;\n  // TODO: 'em'\n  // '%'\n  if (cx.unit === UnitType.kPercentage) {\n    x = cx.value / 100 * width;\n  }\n  if (cy.unit === UnitType.kPercentage) {\n    y = cy.value / 100 * height;\n  }\n  // default to farthest-side\n  var r = Math.max(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n  if (size) {\n    if (size instanceof CSSUnitValue) {\n      r = size.value;\n    } else if (size instanceof CSSKeywordValue) {\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#example_closest-side_for_circles\n      if (size.value === 'closest-side') {\n        r = Math.min(x, width - x, y, height - y);\n      } else if (size.value === 'farthest-side') {\n        r = Math.max(x, width - x, y, height - y);\n      } else if (size.value === 'closest-corner') {\n        r = Math.min(distanceSquareRoot([0, 0], [x, y]), distanceSquareRoot([0, height], [x, y]), distanceSquareRoot([width, height], [x, y]), distanceSquareRoot([width, 0], [x, y]));\n      }\n    }\n  }\n  return {\n    x: x,\n    y: y,\n    r: r\n  };\n}\nvar regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\nfunction spaceColorStops(colorStops) {\n  var _a, _b, _c;\n  var length = colorStops.length;\n  colorStops[length - 1].length = (_a = colorStops[length - 1].length) !== null && _a !== void 0 ? _a : {\n    type: '%',\n    value: '100'\n  };\n  if (length > 1) {\n    colorStops[0].length = (_b = colorStops[0].length) !== null && _b !== void 0 ? _b : {\n      type: '%',\n      value: '0'\n    };\n  }\n  var previousIndex = 0;\n  var previousOffset = Number(colorStops[0].length.value);\n  for (var i = 1; i < length; i++) {\n    // support '%' & 'px'\n    var offset = (_c = colorStops[i].length) === null || _c === void 0 ? void 0 : _c.value;\n    if (!isNil(offset) && !isNil(previousOffset)) {\n      for (var j = 1; j < i - previousIndex; j++) colorStops[previousIndex + j].length = {\n        type: '%',\n        value: \"\".concat(previousOffset + (Number(offset) - previousOffset) * j / (i - previousIndex))\n      };\n      previousIndex = i;\n      previousOffset = Number(offset);\n    }\n  }\n}\n// The position of the gradient line's starting point.\n// different from CSS side(to top) @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#values\nvar SideOrCornerToDegMap = {\n  left: 270 - 90,\n  top: 0 - 90,\n  bottom: 180 - 90,\n  right: 90 - 90,\n  'left top': 315 - 90,\n  'top left': 315 - 90,\n  'left bottom': 225 - 90,\n  'bottom left': 225 - 90,\n  'right top': 45 - 90,\n  'top right': 45 - 90,\n  'right bottom': 135 - 90,\n  'bottom right': 135 - 90\n};\nvar angleToDeg = memoize(function (orientation) {\n  var angle;\n  if (orientation.type === 'angular') {\n    angle = Number(orientation.value);\n  } else {\n    angle = SideOrCornerToDegMap[orientation.value] || 0;\n  }\n  return getOrCreateUnitValue(angle, 'deg');\n});\nvar positonToCSSUnitValue = memoize(function (position) {\n  var cx = 50;\n  var cy = 50;\n  var unitX = '%';\n  var unitY = '%';\n  if ((position === null || position === void 0 ? void 0 : position.type) === 'position') {\n    var _a = position.value,\n      x = _a.x,\n      y = _a.y;\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'position-keyword') {\n      if (x.value === 'left') {\n        cx = 0;\n      } else if (x.value === 'center') {\n        cx = 50;\n      } else if (x.value === 'right') {\n        cx = 100;\n      } else if (x.value === 'top') {\n        cy = 0;\n      } else if (x.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'position-keyword') {\n      if (y.value === 'left') {\n        cx = 0;\n      } else if (y.value === 'center') {\n        cy = 50;\n      } else if (y.value === 'right') {\n        cx = 100;\n      } else if (y.value === 'top') {\n        cy = 0;\n      } else if (y.value === 'bottom') {\n        cy = 100;\n      }\n    }\n    if ((x === null || x === void 0 ? void 0 : x.type) === 'px' || (x === null || x === void 0 ? void 0 : x.type) === '%' || (x === null || x === void 0 ? void 0 : x.type) === 'em') {\n      unitX = x === null || x === void 0 ? void 0 : x.type;\n      cx = Number(x.value);\n    }\n    if ((y === null || y === void 0 ? void 0 : y.type) === 'px' || (y === null || y === void 0 ? void 0 : y.type) === '%' || (y === null || y === void 0 ? void 0 : y.type) === 'em') {\n      unitY = y === null || y === void 0 ? void 0 : y.type;\n      cy = Number(y.value);\n    }\n  }\n  return {\n    cx: getOrCreateUnitValue(cx, unitX),\n    cy: getOrCreateUnitValue(cy, unitY)\n  };\n});\nvar parseGradient = memoize(function (colorStr) {\n  var _a;\n  if (colorStr.indexOf('linear') > -1 || colorStr.indexOf('radial') > -1) {\n    var ast = parseGradient$1(colorStr);\n    return ast.map(function (_a) {\n      var type = _a.type,\n        orientation = _a.orientation,\n        colorStops = _a.colorStops;\n      spaceColorStops(colorStops);\n      var steps = colorStops.map(function (colorStop) {\n        // TODO: only support % for now, should calc percentage of axis length when using px/em\n        return {\n          offset: getOrCreateUnitValue(Number(colorStop.length.value), '%'),\n          color: colorStopToString(colorStop)\n        };\n      });\n      if (type === 'linear-gradient') {\n        return new CSSGradientValue(GradientType.LinearGradient, {\n          angle: orientation ? angleToDeg(orientation) : Odeg,\n          steps: steps\n        });\n      } else if (type === 'radial-gradient') {\n        if (!orientation) {\n          orientation = [{\n            type: 'shape',\n            value: 'circle'\n          }];\n        }\n        if (orientation[0].type === 'shape' && orientation[0].value === 'circle') {\n          var _b = positonToCSSUnitValue(orientation[0].at),\n            cx = _b.cx,\n            cy = _b.cy;\n          var size = void 0;\n          if (orientation[0].style) {\n            var _c = orientation[0].style,\n              type_1 = _c.type,\n              value = _c.value;\n            if (type_1 === 'extent-keyword') {\n              size = getOrCreateKeyword(value);\n            } else {\n              size = getOrCreateUnitValue(value, type_1);\n            }\n          }\n          return new CSSGradientValue(GradientType.RadialGradient, {\n            cx: cx,\n            cy: cy,\n            size: size,\n            steps: steps\n          });\n        }\n        // TODO: support ellipse shape\n        // TODO: repeating-linear-gradient & repeating-radial-gradient\n        // } else if (type === 'repeating-linear-gradient') {\n        // } else if (type === 'repeating-radial-gradient') {\n      }\n    });\n  }\n  // legacy format, should be deprecated later\n  var type = colorStr[0];\n  if (colorStr[1] === '(' || colorStr[2] === '(') {\n    if (type === 'l') {\n      var arr = regexLG.exec(colorStr);\n      if (arr) {\n        var steps = ((_a = arr[2].match(regexColorStop)) === null || _a === void 0 ? void 0 : _a.map(function (stop) {\n          return stop.split(':');\n        })) || [];\n        return [new CSSGradientValue(GradientType.LinearGradient, {\n          angle: getOrCreateUnitValue(parseFloat(arr[1]), 'deg'),\n          steps: steps.map(function (_a) {\n            var _b = __read(_a, 2),\n              offset = _b[0],\n              color = _b[1];\n            return {\n              offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n              color: color\n            };\n          })\n        })];\n      }\n    } else if (type === 'r') {\n      var parsedRadialGradient = parseRadialGradient(colorStr);\n      if (parsedRadialGradient) {\n        if (isString(parsedRadialGradient)) {\n          colorStr = parsedRadialGradient;\n        } else {\n          return [new CSSGradientValue(GradientType.RadialGradient, parsedRadialGradient)];\n        }\n      }\n    } else if (type === 'p') {\n      return parsePattern(colorStr);\n    }\n  }\n});\nfunction parseRadialGradient(gradientStr) {\n  var _a;\n  var arr = regexRG.exec(gradientStr);\n  if (arr) {\n    var steps = ((_a = arr[4].match(regexColorStop)) === null || _a === void 0 ? void 0 : _a.map(function (stop) {\n      return stop.split(':');\n    })) || [];\n    return {\n      cx: getOrCreateUnitValue(50, '%'),\n      cy: getOrCreateUnitValue(50, '%'),\n      steps: steps.map(function (_a) {\n        var _b = __read(_a, 2),\n          offset = _b[0],\n          color = _b[1];\n        return {\n          offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n          color: color\n        };\n      })\n    };\n  }\n  return null;\n}\nfunction parsePattern(patternStr) {\n  var arr = regexPR.exec(patternStr);\n  if (arr) {\n    var repetition = arr[1];\n    var src = arr[2];\n    switch (repetition) {\n      case 'a':\n        repetition = 'repeat';\n        break;\n      case 'x':\n        repetition = 'repeat-x';\n        break;\n      case 'y':\n        repetition = 'repeat-y';\n        break;\n      case 'n':\n        repetition = 'no-repeat';\n        break;\n      default:\n        repetition = 'no-repeat';\n    }\n    return {\n      image: src,\n      // @ts-ignore\n      repetition: repetition\n    };\n  }\n  return null;\n}\nfunction isCSSGradientValue(object) {\n  return !!object.type && !!object.value;\n}\nfunction isPattern(object) {\n  return object && !!object.image;\n}\nfunction isCSSRGB(object) {\n  return object && !isNil(object.r) && !isNil(object.g) && !isNil(object.b);\n}\n/**\n * @see https://github.com/WebKit/WebKit/blob/main/Source/WebCore/css/parser/CSSParser.cpp#L97\n */\nvar parseColor = memoize(function (colorStr) {\n  if (isPattern(colorStr)) {\n    return __assign({\n      repetition: 'repeat'\n    }, colorStr);\n  }\n  if (isNil(colorStr)) {\n    colorStr = '';\n  }\n  if (colorStr === 'transparent') {\n    // transparent black\n    return transparentColor;\n  } else if (colorStr === 'currentColor') {\n    // @see https://github.com/adobe-webplatform/Snap.svg/issues/526\n    colorStr = 'black';\n  }\n  // support CSS gradient syntax\n  var g = parseGradient(colorStr);\n  if (g) {\n    return g;\n  }\n  // constants\n  var color = d3.color(colorStr);\n  var rgba = [0, 0, 0, 0];\n  if (color !== null) {\n    rgba[0] = color.r || 0;\n    rgba[1] = color.g || 0;\n    rgba[2] = color.b || 0;\n    rgba[3] = color.opacity;\n  }\n  // return new CSSRGB(...rgba);\n  return getOrCreateRGBA.apply(void 0, __spreadArray([], __read(rgba), false));\n});\nfunction mergeColors(left, right) {\n  // only support constant value, exclude gradient & pattern\n  if (!isCSSRGB(left) || !isCSSRGB(right)) {\n    return;\n  }\n  return [[Number(left.r), Number(left.g), Number(left.b), Number(left.alpha)], [Number(right.r), Number(right.g), Number(right.b), Number(right.alpha)], function (color) {\n    var rgba = color.slice();\n    if (rgba[3]) {\n      for (var i = 0; i < 3; i++) rgba[i] = Math.round(clamp(rgba[i], 0, 255));\n    }\n    rgba[3] = clamp(rgba[3], 0, 1);\n    return \"rgba(\".concat(rgba.join(','), \")\");\n  }];\n}\nfunction parseDimension(unitRegExp, string) {\n  if (isNil(string)) {\n    return getOrCreateUnitValue(0, 'px');\n  }\n  string = \"\".concat(string).trim().toLowerCase();\n  if (isFinite(Number(string))) {\n    if ('px'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'px');\n    } else if ('deg'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'deg');\n    }\n  }\n  var matchedUnits = [];\n  string = string.replace(unitRegExp, function (match) {\n    matchedUnits.push(match);\n    return 'U' + match;\n  });\n  var taggedUnitRegExp = 'U(' + unitRegExp.source + ')';\n  return matchedUnits.map(function (unit) {\n    return getOrCreateUnitValue(Number(string.replace(new RegExp('U' + unit, 'g'), '').replace(new RegExp(taggedUnitRegExp, 'g'), '*0')), unit);\n  })[0];\n}\n/**\n * <length>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length\n * length with only absolute unit, eg. 1px\n */\nvar parseLengthUnmemoize = function (css) {\n  return parseDimension(new RegExp('px', 'g'), css);\n};\nvar parseLength = memoize(parseLengthUnmemoize);\n/**\n * <percentage>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage\n */\nvar parserPercentageUnmemoize = function (css) {\n  return parseDimension(new RegExp('%', 'g'), css);\n};\nmemoize(parserPercentageUnmemoize);\n/**\n * length with absolute or relative unit,\n * eg. 1px, 0.7em, 50%, calc(100% - 200px);\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length-percentage\n */\nvar parseLengthOrPercentageUnmemoize = function (css) {\n  if (isNumber(css) || isFinite(Number(css))) {\n    // Number(css) is NaN\n    return getOrCreateUnitValue(Number(css) || 0, 'px');\n    // return Number(css);\n  }\n  return parseDimension(new RegExp('px|%|em|rem', 'g'), css);\n};\nvar parseLengthOrPercentage = memoize(parseLengthOrPercentageUnmemoize);\nvar parseAngleUnmemoize = function (css) {\n  return parseDimension(new RegExp('deg|rad|grad|turn', 'g'), css);\n};\nvar parseAngle = memoize(parseAngleUnmemoize);\n/**\n * merge CSSUnitValue\n *\n * @example\n * 10px + 20px = 30px\n * 10deg + 10rad\n * 10% + 20% = 30%\n */\nfunction mergeDimensions(left, right, target, nonNegative, index) {\n  if (index === void 0) {\n    index = 0;\n  }\n  var unit = '';\n  var leftValue = left.value || 0;\n  var rightValue = right.value || 0;\n  var canonicalUnit = toCanonicalUnit(left.unit);\n  var leftCanonicalUnitValue = left.convertTo(canonicalUnit);\n  var rightCanonicalUnitValue = right.convertTo(canonicalUnit);\n  if (leftCanonicalUnitValue && rightCanonicalUnitValue) {\n    leftValue = leftCanonicalUnitValue.value;\n    rightValue = rightCanonicalUnitValue.value;\n    unit = unitTypeToString(left.unit);\n  } else {\n    // format '%' to 'px'\n    if (CSSUnitValue.isLength(left.unit) || CSSUnitValue.isLength(right.unit)) {\n      leftValue = convertPercentUnit(left, index, target);\n      rightValue = convertPercentUnit(right, index, target);\n      unit = 'px';\n    }\n  }\n  // // format 'rad' 'turn' to 'deg'\n  // if (CSSUnitValue.isAngle(left.unit) || CSSUnitValue.isAngle(right.unit)) {\n  //   leftValue = convertAngleUnit(left);\n  //   rightValue = convertAngleUnit(right);\n  //   unit = 'deg';\n  // }\n  return [leftValue, rightValue, function (value) {\n    if (nonNegative) {\n      value = Math.max(value, 0);\n    }\n    return value + unit;\n  }];\n}\nfunction convertAngleUnit(value) {\n  var deg = 0;\n  if (value.unit === UnitType.kDegrees) {\n    deg = value.value;\n  } else if (value.unit === UnitType.kRadians) {\n    deg = rad2deg(Number(value.value));\n  } else if (value.unit === UnitType.kTurns) {\n    deg = turn2deg(Number(value.value));\n  }\n  return deg;\n}\nfunction parseDimensionArrayFormat(string, size) {\n  var parsed;\n  if (Array.isArray(string)) {\n    // [1, '2px', 3]\n    parsed = string.map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isString(string)) {\n    parsed = string.split(' ').map(function (segment) {\n      return Number(segment);\n    });\n  } else if (isNumber(string)) {\n    parsed = [string];\n  }\n  if (size === 2) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0]];\n    } else {\n      return [parsed[0], parsed[1]];\n    }\n  } else {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0], parsed[0], parsed[0]];\n    } else if (parsed.length === 2) {\n      return [parsed[0], parsed[1], parsed[0], parsed[1]];\n    } else if (parsed.length === 3) {\n      return [parsed[0], parsed[1], parsed[2], parsed[1]];\n    } else {\n      return [parsed[0], parsed[1], parsed[2], parsed[3]];\n    }\n  }\n}\nfunction parseDimensionArray(string) {\n  if (isString(string)) {\n    // \"1px 2px 3px\"\n    return string.split(' ').map(function (segment) {\n      return parseLengthOrPercentage(segment);\n    });\n  } else {\n    // [1, '2px', 3]\n    return string.map(function (segment) {\n      return parseLengthOrPercentage(segment.toString());\n    });\n  }\n}\n// export function mergeDimensionList(\n//   left: CSSUnitValue[],\n//   right: CSSUnitValue[],\n//   target: IElement | null,\n// ): [number[], number[], (list: number[]) => string] | undefined {\n//   if (left.length !== right.length) {\n//     return;\n//   }\n//   const unit = left[0].unit;\n//   return [\n//     left.map((l) => l.value),\n//     right.map((l) => l.value),\n//     (values: number[]) => {\n//       return values.map((n) => new CSSUnitValue(n, unit)).join(' ');\n//     },\n//   ];\n// }\nfunction convertPercentUnit(valueWithUnit, vec3Index, target) {\n  if (valueWithUnit.value === 0) {\n    return 0;\n  }\n  if (valueWithUnit.unit === UnitType.kPixels) {\n    return Number(valueWithUnit.value);\n  } else if (valueWithUnit.unit === UnitType.kPercentage && target) {\n    var bounds = target.nodeName === Shape.GROUP ? target.getLocalBounds() :\n    // : target.getGeometryBounds();\n    target.geometry.contentBounds;\n    return valueWithUnit.value / 100 * bounds.halfExtents[vec3Index] * 2;\n  }\n  return 0;\n}\nvar parseParam = function (css) {\n  return parseDimension(/deg|rad|grad|turn|px|%/g, css);\n};\nvar supportedFilters = ['blur', 'brightness', 'drop-shadow', 'contrast', 'grayscale', 'sepia', 'saturate', 'hue-rotate', 'invert'];\nfunction parseFilter(filterStr) {\n  if (filterStr === void 0) {\n    filterStr = '';\n  }\n  filterStr = filterStr.toLowerCase().trim();\n  if (filterStr === 'none') {\n    return [];\n  }\n  var filterRegExp = /\\s*([\\w-]+)\\(([^)]*)\\)/g;\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  while (match = filterRegExp.exec(filterStr)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    if (supportedFilters.indexOf(match[1]) > -1) {\n      result.push({\n        name: match[1],\n        params: match[2].split(' ').map(function (p) {\n          return parseParam(p) || parseColor(p);\n        })\n      });\n    }\n    if (filterRegExp.lastIndex === filterStr.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction numberToString(x) {\n  // scale(0.00000001) -> scale(0)\n  // return x.toFixed(6).replace(/0+$/, '').replace(/\\.$/, '');\n  return x.toString();\n}\n/**\n * parse string or number to CSSUnitValue(numeric)\n *\n * eg.\n * * 0 -> CSSUnitValue(0)\n * * '2' -> CSSUnitValue(2)\n */\nvar parseNumberUnmemoize = function (string) {\n  if (typeof string === 'number') {\n    return getOrCreateUnitValue(string);\n  }\n  if (/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(string)) {\n    return getOrCreateUnitValue(Number(string));\n  } else {\n    return getOrCreateUnitValue(0);\n  }\n};\nvar parseNumber = memoize(parseNumberUnmemoize);\nmemoize(function (string) {\n  if (isString(string)) {\n    return string.split(' ').map(parseNumber);\n  } else {\n    return string.map(parseNumber);\n  }\n});\nfunction mergeNumbers(left, right) {\n  return [left, right, numberToString];\n}\nfunction clampedMergeNumbers(min, max) {\n  return function (left, right) {\n    return [left, right, function (x) {\n      return numberToString(clamp(x, min, max));\n    }];\n  };\n}\nfunction mergeNumberLists(left, right) {\n  if (left.length !== right.length) {\n    return;\n  }\n  return [left, right, function (numberList) {\n    return numberList;\n  }];\n}\nfunction getOrCalculatePathTotalLength(path) {\n  if (path.parsedStyle.path.totalLength === 0) {\n    path.parsedStyle.path.totalLength = getTotalLength(path.parsedStyle.path.absolutePath);\n  }\n  return path.parsedStyle.path.totalLength;\n}\nfunction removeRedundantMCommand(path) {\n  for (var i = 0; i < path.length; i++) {\n    var prevSegment = path[i - 1];\n    var segment = path[i];\n    var cmd = segment[0];\n    if (cmd === 'M') {\n      if (prevSegment) {\n        var prevCmd = prevSegment[0];\n        var srcPoint = [segment[1], segment[2]];\n        var destPoint = void 0;\n        if (prevCmd === 'L' || prevCmd === 'M') {\n          destPoint = [prevSegment[1], prevSegment[2]];\n        } else if (prevCmd === 'C' || prevCmd === 'A' || prevCmd === 'Q') {\n          destPoint = [prevSegment[prevSegment.length - 2], prevSegment[prevSegment.length - 1]];\n        }\n        if (destPoint && isSamePoint(srcPoint, destPoint)) {\n          path.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n}\nfunction hasArcOrBezier(path) {\n  var hasArc = false;\n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    var cmd = params[0];\n    if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n      hasArc = true;\n      break;\n    }\n  }\n  return hasArc;\n}\nfunction extractPolygons(pathArray) {\n  var polygons = [];\n  var polylines = [];\n  var points = []; // 防止第一个命令不是 'M'\n  for (var i = 0; i < pathArray.length; i++) {\n    var params = pathArray[i];\n    var cmd = params[0];\n    if (cmd === 'M') {\n      // 遇到 'M' 判定是否是新数组，新数组中没有点\n      if (points.length) {\n        // 如果存在点，则说明没有遇到 'Z'，开始了一个新的多边形\n        polylines.push(points);\n        points = []; // 创建新的点\n      }\n      points.push([params[1], params[2]]);\n    } else if (cmd === 'Z') {\n      if (points.length) {\n        // 存在点\n        polygons.push(points);\n        points = []; // 开始新的点集合\n      }\n      // 如果不存在点，同时 'Z'，则说明是错误，不处理\n    } else {\n      points.push([params[1], params[2]]);\n    }\n  }\n  // 说明 points 未放入 polygons 或者 polyline\n  // 仅当只有一个 M，没有 Z 时会发生这种情况\n  if (points.length > 0) {\n    polylines.push(points);\n  }\n  return {\n    polygons: polygons,\n    polylines: polylines\n  };\n}\nfunction isSamePoint(point1, point2) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\nfunction getPathBBox(segments, lineWidth) {\n  var xArr = [];\n  var yArr = [];\n  var segmentsWithAngle = [];\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    var currentPoint = segment.currentPoint,\n      params = segment.params,\n      prePoint = segment.prePoint;\n    var box = void 0;\n    switch (segment.command) {\n      case 'Q':\n        box = quadBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);\n        break;\n      case 'C':\n        box = cubicBox(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);\n        break;\n      case 'A':\n        var arcParams = segment.arcParams;\n        box = arcBox(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);\n        break;\n      default:\n        xArr.push(currentPoint[0]);\n        yArr.push(currentPoint[1]);\n        break;\n    }\n    if (box) {\n      segment.box = box;\n      xArr.push(box.x, box.x + box.width);\n      yArr.push(box.y, box.y + box.height);\n    }\n    if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {\n      segmentsWithAngle.push(segment);\n    }\n  }\n  // bbox calculation should ignore NaN for path attribute\n  // ref: https://github.com/antvis/g/issues/210\n  // ref: https://github.com/antvis/G2/issues/3109\n  xArr = xArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  yArr = yArr.filter(function (item) {\n    return !Number.isNaN(item) && item !== Infinity && item !== -Infinity;\n  });\n  var minX = min(xArr);\n  var minY = min(yArr);\n  var maxX = max(xArr);\n  var maxY = max(yArr);\n  if (segmentsWithAngle.length === 0) {\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY\n    };\n  }\n  for (var i = 0; i < segmentsWithAngle.length; i++) {\n    var segment = segmentsWithAngle[i];\n    var currentPoint = segment.currentPoint;\n    var extra = void 0;\n    if (currentPoint[0] === minX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minX = minX - extra.xExtra;\n    } else if (currentPoint[0] === maxX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxX = maxX + extra.xExtra;\n    }\n    if (currentPoint[1] === minY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minY = minY - extra.yExtra;\n    } else if (currentPoint[1] === maxY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxY = maxY + extra.yExtra;\n    }\n  }\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getExtraFromSegmentWithAngle(segment, lineWidth) {\n  var prePoint = segment.prePoint,\n    currentPoint = segment.currentPoint,\n    nextPoint = segment.nextPoint;\n  var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);\n  var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);\n  var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);\n  // 以 currentPoint 为顶点的夹角\n  var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));\n  // 夹角为空、 0 或 PI 时，不需要计算夹角处的额外宽度\n  // 注意: 由于计算精度问题，夹角为 0 的情况计算出来的角度可能是一个很小的值，还需要判断其与 0 是否近似相等\n  if (!currentAngle || Math.sin(currentAngle) === 0 || isNumberEqual(currentAngle, 0)) {\n    return {\n      xExtra: 0,\n      yExtra: 0\n    };\n  }\n  var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));\n  var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));\n  // 将夹角转为锐角\n  xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n  yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n  // 这里不考虑在水平和垂直方向的投影，直接使用最大差值\n  // 由于上层统一加减了二分之一线宽，这里需要进行弥补\n  var extra = {\n    // 水平方向投影\n    xExtra: Math.cos(currentAngle / 2 - xAngle) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,\n    // 垂直方向投影\n    yExtra: Math.cos(yAngle - currentAngle / 2) * (lineWidth / 2 * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0\n  };\n  return extra;\n}\n// 点对称\nfunction toSymmetry(point, center) {\n  return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];\n}\nvar angleBetween = function (v0, v1) {\n  var p = v0.x * v1.x + v0.y * v1.y;\n  var n = Math.sqrt((Math.pow(v0.x, 2) + Math.pow(v0.y, 2)) * (Math.pow(v1.x, 2) + Math.pow(v1.y, 2)));\n  var sign = v0.x * v1.y - v0.y * v1.x < 0 ? -1 : 1;\n  var angle = sign * Math.acos(p / n);\n  return angle;\n};\n/**\n * @see https://github.com/rveciana/svg-path-properties/blob/b6bd9a322966f6ef7a311872d80c56e3718de861/src/arc.ts#L121\n */\nvar pointOnEllipticalArc = function (p0, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, p1, t) {\n  // In accordance to: http://www.w3.org/TR/SVG/implnote.html#ArcOutOfRangeParameters\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  xAxisRotation = mod(xAxisRotation, 360);\n  var xAxisRotationRadians = deg2rad(xAxisRotation);\n  // If the endpoints are identical, then this is equivalent to omitting the elliptical arc segment entirely.\n  if (p0.x === p1.x && p0.y === p1.y) {\n    return {\n      x: p0.x,\n      y: p0.y,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n  // If rx = 0 or ry = 0 then this arc is treated as a straight line segment joining the endpoints.\n  if (rx === 0 || ry === 0) {\n    //return this.pointOnLine(p0, p1, t);\n    return {\n      x: 0,\n      y: 0,\n      ellipticalArcAngle: 0\n    }; // Check if angle is correct\n  }\n  // Following \"Conversion from endpoint to center parameterization\"\n  // http://www.w3.org/TR/SVG/implnote.html#ArcConversionEndpointToCenter\n  // Step #1: Compute transformedPoint\n  var dx = (p0.x - p1.x) / 2;\n  var dy = (p0.y - p1.y) / 2;\n  var transformedPoint = {\n    x: Math.cos(xAxisRotationRadians) * dx + Math.sin(xAxisRotationRadians) * dy,\n    y: -Math.sin(xAxisRotationRadians) * dx + Math.cos(xAxisRotationRadians) * dy\n  };\n  // Ensure radii are large enough\n  var radiiCheck = Math.pow(transformedPoint.x, 2) / Math.pow(rx, 2) + Math.pow(transformedPoint.y, 2) / Math.pow(ry, 2);\n  if (radiiCheck > 1) {\n    rx = Math.sqrt(radiiCheck) * rx;\n    ry = Math.sqrt(radiiCheck) * ry;\n  }\n  // Step #2: Compute transformedCenter\n  var cSquareNumerator = Math.pow(rx, 2) * Math.pow(ry, 2) - Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) - Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cSquareRootDenom = Math.pow(rx, 2) * Math.pow(transformedPoint.y, 2) + Math.pow(ry, 2) * Math.pow(transformedPoint.x, 2);\n  var cRadicand = cSquareNumerator / cSquareRootDenom;\n  // Make sure this never drops below zero because of precision\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  var cCoef = (largeArcFlag !== sweepFlag ? 1 : -1) * Math.sqrt(cRadicand);\n  var transformedCenter = {\n    x: cCoef * (rx * transformedPoint.y / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx)\n  };\n  // Step #3: Compute center\n  var center = {\n    x: Math.cos(xAxisRotationRadians) * transformedCenter.x - Math.sin(xAxisRotationRadians) * transformedCenter.y + (p0.x + p1.x) / 2,\n    y: Math.sin(xAxisRotationRadians) * transformedCenter.x + Math.cos(xAxisRotationRadians) * transformedCenter.y + (p0.y + p1.y) / 2\n  };\n  // Step #4: Compute start/sweep angles\n  // Start angle of the elliptical arc prior to the stretch and rotate operations.\n  // Difference between the start and end angles\n  var startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry\n  };\n  var startAngle = angleBetween({\n    x: 1,\n    y: 0\n  }, startVector);\n  var endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry\n  };\n  var sweepAngle = angleBetween(startVector, endVector);\n  if (!sweepFlag && sweepAngle > 0) {\n    sweepAngle -= 2 * Math.PI;\n  } else if (sweepFlag && sweepAngle < 0) {\n    sweepAngle += 2 * Math.PI;\n  }\n  // We use % instead of `mod(..)` because we want it to be -360deg to 360deg(but actually in radians)\n  sweepAngle %= 2 * Math.PI;\n  // From http://www.w3.org/TR/SVG/implnote.html#ArcParameterizationAlternatives\n  var angle = startAngle + sweepAngle * t;\n  var ellipseComponentX = rx * Math.cos(angle);\n  var ellipseComponentY = ry * Math.sin(angle);\n  var point = {\n    x: Math.cos(xAxisRotationRadians) * ellipseComponentX - Math.sin(xAxisRotationRadians) * ellipseComponentY + center.x,\n    y: Math.sin(xAxisRotationRadians) * ellipseComponentX + Math.cos(xAxisRotationRadians) * ellipseComponentY + center.y,\n    ellipticalArcStartAngle: startAngle,\n    ellipticalArcEndAngle: startAngle + sweepAngle,\n    ellipticalArcAngle: angle,\n    ellipticalArcCenter: center,\n    resultantRx: rx,\n    resultantRy: ry\n  };\n  return point;\n};\nfunction path2Segments(path) {\n  var segments = [];\n  var currentPoint = null; // 当前图形\n  var nextParams = null; // 下一节点的 path 参数\n  var startMovePoint = null; // 开始 M 的点，可能会有多个\n  var lastStartMovePointIndex = 0; // 最近一个开始点 M 的索引\n  var count = path.length;\n  for (var i = 0; i < count; i++) {\n    var params = path[i];\n    nextParams = path[i + 1];\n    var command = params[0];\n    // 数学定义上的参数，便于后面的计算\n    var segment = {\n      command: command,\n      prePoint: currentPoint,\n      params: params,\n      startTangent: null,\n      endTangent: null,\n      currentPoint: null,\n      nextPoint: null,\n      arcParams: null,\n      box: null,\n      cubicParams: null\n    };\n    switch (command) {\n      case 'M':\n        startMovePoint = [params[1], params[2]];\n        lastStartMovePointIndex = i;\n        break;\n      case 'A':\n        var arcParams = getArcParams(currentPoint, params);\n        segment.arcParams = arcParams;\n        break;\n    }\n    if (command === 'Z') {\n      // 有了 Z 后，当前节点从开始 M 的点开始\n      currentPoint = startMovePoint;\n      // 如果当前点的命令为 Z，相当于当前点为最近一个 M 点，则下一个点直接指向最近一个 M 点的下一个点\n      nextParams = path[lastStartMovePointIndex + 1];\n    } else {\n      var len = params.length;\n      currentPoint = [params[len - 2], params[len - 1]];\n    }\n    if (nextParams && nextParams[0] === 'Z') {\n      // 如果下一个点的命令为 Z，则下一个点直接指向最近一个 M 点\n      nextParams = path[lastStartMovePointIndex];\n      if (segments[lastStartMovePointIndex]) {\n        // 如果下一个点的命令为 Z，则最近一个 M 点的前一个点为当前点\n        segments[lastStartMovePointIndex].prePoint = currentPoint;\n      }\n    }\n    segment.currentPoint = currentPoint;\n    // 如果当前点与最近一个 M 点相同，则最近一个 M 点的前一个点为当前点的前一个点\n    if (segments[lastStartMovePointIndex] && isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {\n      segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n    }\n    var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;\n    segment.nextPoint = nextPoint;\n    // Add startTangent and endTangent\n    var prePoint = segment.prePoint;\n    if (['L', 'H', 'V'].includes(command)) {\n      segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n      segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n    } else if (command === 'Q') {\n      // 二次贝塞尔曲线只有一个控制点\n      var cp = [params[1], params[2]];\n      // 二次贝塞尔曲线的终点为 currentPoint\n      segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n      segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n    } else if (command === 'T') {\n      var preSegment = segments[i - 1];\n      var cp = toSymmetry(preSegment.currentPoint, prePoint);\n      if (preSegment.command === 'Q') {\n        segment.command = 'Q';\n        segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n        segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'TL';\n        segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];\n        segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];\n      }\n    } else if (command === 'C') {\n      // 三次贝塞尔曲线有两个控制点\n      var cp1 = [params[1], params[2]];\n      var cp2 = [params[3], params[4]];\n      segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n      segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n      // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]\n      if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {\n        segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];\n      }\n      if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {\n        segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];\n      }\n    } else if (command === 'S') {\n      var preSegment = segments[i - 1];\n      var cp1 = toSymmetry(preSegment.currentPoint, prePoint);\n      var cp2 = [params[1], params[2]];\n      if (preSegment.command === 'C') {\n        segment.command = 'C'; // 将 S 命令变换为 C 命令\n        segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n        segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'SQ'; // 将 S 命令变换为 SQ 命令\n        segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\n        segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n      }\n    } else if (command === 'A') {\n      var _a = getTangentAtRatio(segment, 0),\n        dx1 = _a.x,\n        dy1 = _a.y;\n      var _b = getTangentAtRatio(segment, 1, false),\n        dx2 = _b.x,\n        dy2 = _b.y;\n      segment.startTangent = [dx1, dy1];\n      segment.endTangent = [dx2, dy2];\n    }\n    segments.push(segment);\n  }\n  return segments;\n}\n/**\n * Use length instead of ratio\n */\nfunction getTangentAtRatio(segment, ratio, sign) {\n  if (sign === void 0) {\n    sign = true;\n  }\n  var _a = segment.arcParams,\n    _b = _a.rx,\n    rx = _b === void 0 ? 0 : _b,\n    _c = _a.ry,\n    ry = _c === void 0 ? 0 : _c,\n    xRotation = _a.xRotation,\n    arcFlag = _a.arcFlag,\n    sweepFlag = _a.sweepFlag;\n  var p1 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, ratio);\n  var p2 = pointOnEllipticalArc({\n    x: segment.prePoint[0],\n    y: segment.prePoint[1]\n  }, rx, ry, xRotation, !!arcFlag, !!sweepFlag, {\n    x: segment.currentPoint[0],\n    y: segment.currentPoint[1]\n  }, sign ? ratio + 0.005 : ratio - 0.005);\n  var xDist = p2.x - p1.x;\n  var yDist = p2.y - p1.y;\n  var dist = Math.sqrt(xDist * xDist + yDist * yDist);\n  return {\n    x: -xDist / dist,\n    y: -yDist / dist\n  };\n}\n// 向量长度\nfunction vMag(v) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n// u.v/|u||v|，计算夹角的余弦值\nfunction vRatio(u, v) {\n  // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1\n  return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;\n}\n// 向量角度\nfunction vAngle(u, v) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\nfunction getArcParams(startPoint, params) {\n  var rx = params[1];\n  var ry = params[2];\n  var xRotation = mod(deg2rad(params[3]), Math.PI * 2);\n  var arcFlag = params[4];\n  var sweepFlag = params[5];\n  // 弧形起点坐标\n  var x1 = startPoint[0];\n  var y1 = startPoint[1];\n  // 弧形终点坐标\n  var x2 = params[6];\n  var y2 = params[7];\n  var xp = Math.cos(xRotation) * (x1 - x2) / 2.0 + Math.sin(xRotation) * (y1 - y2) / 2.0;\n  var yp = -1 * Math.sin(xRotation) * (x1 - x2) / 2.0 + Math.cos(xRotation) * (y1 - y2) / 2.0;\n  var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n  var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n  // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理\n  var cxp = ry ? f * rx * yp / ry : 0;\n  var cyp = rx ? f * -ry * xp / rx : 0;\n  // 椭圆圆心坐标\n  var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n  // 起始点的单位向量\n  var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // 终止点的单位向量\n  var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  // 计算起始点和圆心的连线，与 x 轴正方向的夹角\n  var theta = vAngle([1, 0], u);\n  // 计算圆弧起始点和终止点与椭圆圆心连线的夹角\n  var dTheta = vAngle(u, v);\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta = dTheta - 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta = dTheta + 2 * Math.PI;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理\n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation: xRotation,\n    arcFlag: arcFlag,\n    sweepFlag: sweepFlag\n  };\n}\nfunction commandsToPathString(commands, object, transform) {\n  var _a = object.parsedStyle,\n    _b = _a.defX,\n    defX = _b === void 0 ? 0 : _b,\n    _c = _a.defY,\n    defY = _c === void 0 ? 0 : _c;\n  return commands.reduce(function (prev, cur) {\n    var path = '';\n    if (cur[0] === 'M' || cur[0] === 'L') {\n      var p = vec3.fromValues(cur[1] - defX, cur[2] - defY, 0);\n      if (transform) {\n        vec3.transformMat4(p, p, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p[0], \",\").concat(p[1]);\n    } else if (cur[0] === 'Z') {\n      path = cur[0];\n    } else if (cur[0] === 'C') {\n      var p1 = vec3.fromValues(cur[1] - defX, cur[2] - defY, 0);\n      var p2 = vec3.fromValues(cur[3] - defX, cur[4] - defY, 0);\n      var p3 = vec3.fromValues(cur[5] - defX, cur[6] - defY, 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n        vec3.transformMat4(p3, p3, transform);\n      }\n      path = \"\".concat(cur[0]).concat(p1[0], \",\").concat(p1[1], \",\").concat(p2[0], \",\").concat(p2[1], \",\").concat(p3[0], \",\").concat(p3[1]);\n    } else if (cur[0] === 'A') {\n      var c = vec3.fromValues(cur[6] - defX, cur[7] - defY, 0);\n      if (transform) {\n        vec3.transformMat4(c, c, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \",\").concat(cur[5], \",\").concat(c[0], \",\").concat(c[1]);\n    } else if (cur[0] === 'Q') {\n      var p1 = vec3.fromValues(cur[1] - defX, cur[2] - defY, 0);\n      var p2 = vec3.fromValues(cur[3] - defX, cur[4] - defY, 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n      }\n      path = \"\".concat(cur[0]).concat(cur[1], \",\").concat(cur[2], \",\").concat(cur[3], \",\").concat(cur[4], \"}\");\n    }\n    return prev += path;\n  }, '');\n}\nfunction lineToCommands(x1, y1, x2, y2) {\n  return [['M', x1, y1], ['L', x2, y2]];\n}\nfunction ellipseToCommands(rx, ry, cx, cy) {\n  var factor = (-1 + Math.sqrt(2)) / 3 * 4;\n  var dx = rx * factor;\n  var dy = ry * factor;\n  var left = cx - rx;\n  var right = cx + rx;\n  var top = cy - ry;\n  var bottom = cy + ry;\n  return [['M', left, cy], ['C', left, cy - dy, cx - dx, top, cx, top], ['C', cx + dx, top, right, cy - dy, right, cy], ['C', right, cy + dy, cx + dx, bottom, cx, bottom], ['C', cx - dx, bottom, left, cy + dy, left, cy], ['Z']];\n}\nfunction polygonToCommands(points, closed) {\n  var result = points.map(function (point, i) {\n    return [i === 0 ? 'M' : 'L', point[0], point[1]];\n  });\n  if (closed) {\n    result.push(['Z']);\n  }\n  return result;\n}\nfunction rectToCommands(width, height, x, y, radius) {\n  // @see https://gist.github.com/danielpquinn/dd966af424030d47e476\n  if (radius) {\n    var _a = __read(radius, 4),\n      tlr = _a[0],\n      trr = _a[1],\n      brr = _a[2],\n      blr = _a[3];\n    var signX = width > 0 ? 1 : -1;\n    var signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    var sweepFlag = signX + signY !== 0 ? 1 : 0;\n    return [['M', signX * tlr + x, y], ['L', width - signX * trr + x, y], trr ? ['A', trr, trr, 0, 0, sweepFlag, width + x, signY * trr + y] : null, ['L', width + x, height - signY * brr + y], brr ? ['A', brr, brr, 0, 0, sweepFlag, width + x - signX * brr, height + y] : null, ['L', x + signX * blr, height + y], blr ? ['A', blr, blr, 0, 0, sweepFlag, x, height + y - signY * blr] : null, ['L', x, signY * tlr + y], tlr ? ['A', tlr, tlr, 0, 0, sweepFlag, signX * tlr + x, y] : null, ['Z']].filter(function (command) {\n      return command;\n    });\n  }\n  return [['M', x, y], ['L', x + width, y], ['L', x + width, y + height], ['L', x, y + height], ['Z']];\n}\n/**\n * convert object to path, should account for:\n * * transform & origin\n * * anchor\n * * lineWidth\n */\nfunction convertToPath(object, transform) {\n  if (transform === void 0) {\n    transform = object.getLocalTransform();\n  }\n  var commands = [];\n  switch (object.nodeName) {\n    case Shape.LINE:\n      var _a = object.parsedStyle,\n        _b = _a.x1,\n        x1 = _b === void 0 ? 0 : _b,\n        _c = _a.y1,\n        y1 = _c === void 0 ? 0 : _c,\n        _d = _a.x2,\n        x2 = _d === void 0 ? 0 : _d,\n        _e = _a.y2,\n        y2 = _e === void 0 ? 0 : _e;\n      commands = lineToCommands(x1, y1, x2, y2);\n      break;\n    case Shape.CIRCLE:\n      {\n        var _f = object.parsedStyle,\n          _g = _f.r,\n          r = _g === void 0 ? 0 : _g,\n          _h = _f.cx,\n          cx = _h === void 0 ? 0 : _h,\n          _j = _f.cy,\n          cy = _j === void 0 ? 0 : _j;\n        commands = ellipseToCommands(r, r, cx, cy);\n        break;\n      }\n    case Shape.ELLIPSE:\n      {\n        var _k = object.parsedStyle,\n          _l = _k.rx,\n          rx = _l === void 0 ? 0 : _l,\n          _m = _k.ry,\n          ry = _m === void 0 ? 0 : _m,\n          _o = _k.cx,\n          cx = _o === void 0 ? 0 : _o,\n          _p = _k.cy,\n          cy = _p === void 0 ? 0 : _p;\n        commands = ellipseToCommands(rx, ry, cx, cy);\n        break;\n      }\n    case Shape.POLYLINE:\n    case Shape.POLYGON:\n      var points = object.parsedStyle.points;\n      commands = polygonToCommands(points.points, object.nodeName === Shape.POLYGON);\n      break;\n    case Shape.RECT:\n      var _q = object.parsedStyle,\n        _r = _q.width,\n        width_1 = _r === void 0 ? 0 : _r,\n        _s = _q.height,\n        height_1 = _s === void 0 ? 0 : _s,\n        _t = _q.x,\n        x = _t === void 0 ? 0 : _t,\n        _u = _q.y,\n        y = _u === void 0 ? 0 : _u,\n        radius = _q.radius;\n      var hasRadius = radius && radius.some(function (r) {\n        return r !== 0;\n      });\n      commands = rectToCommands(width_1, height_1, x, y, hasRadius && radius.map(function (r) {\n        return clamp(r, 0, Math.min(Math.abs(width_1) / 2, Math.abs(height_1) / 2));\n      }));\n      break;\n    case Shape.PATH:\n      var absolutePath = object.parsedStyle.path.absolutePath;\n      commands = __spreadArray([], __read(absolutePath), false);\n      break;\n  }\n  if (commands.length) {\n    return commandsToPathString(commands, object, transform);\n  }\n}\nfunction translatePathToString(absolutePath, defX, defY, startOffsetX, startOffsetY, endOffsetX, endOffsetY) {\n  if (startOffsetX === void 0) {\n    startOffsetX = 0;\n  }\n  if (startOffsetY === void 0) {\n    startOffsetY = 0;\n  }\n  if (endOffsetX === void 0) {\n    endOffsetX = 0;\n  }\n  if (endOffsetY === void 0) {\n    endOffsetY = 0;\n  }\n  var newValue = absolutePath.map(function (params, i) {\n    var command = params[0];\n    var nextSegment = absolutePath[i + 1];\n    var useStartOffset = i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    var useEndOffset = (i === absolutePath.length - 1 || nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z')) && endOffsetX !== 0 && endOffsetY !== 0;\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        if (useStartOffset) {\n          return \"M \".concat(params[1] - defX + startOffsetX, \",\").concat(params[2] - defY + startOffsetY, \" L \").concat(params[1] - defX, \",\").concat(params[2] - defY);\n        } else {\n          return \"M \".concat(params[1] - defX, \",\").concat(params[2] - defY);\n        }\n      case 'L':\n        return \"L \".concat(params[1] - defX + (useEndOffset ? endOffsetX : 0), \",\").concat(params[2] - defY + (useEndOffset ? endOffsetY : 0));\n      case 'Q':\n        return \"Q \".concat(params[1] - defX, \" \").concat(params[2] - defY, \",\").concat(params[3] - defX, \" \").concat(params[4] - defY) + (useEndOffset ? \" L \".concat(params[3] - defX + endOffsetX, \",\").concat(params[4] - defY + endOffsetY) : '');\n      case 'C':\n        return \"C \".concat(params[1] - defX, \" \").concat(params[2] - defY, \",\").concat(params[3] - defX, \" \").concat(params[4] - defY, \",\").concat(params[5] - defX, \" \").concat(params[6] - defY) + (useEndOffset ? \" L \".concat(params[5] - defX + endOffsetX, \",\").concat(params[6] - defY + endOffsetY) : '');\n      case 'A':\n        return \"A \".concat(params[1], \" \").concat(params[2], \" \").concat(params[3], \" \").concat(params[4], \" \").concat(params[5], \" \").concat(params[6] - defX, \" \").concat(params[7] - defY) + (useEndOffset ? \" L \".concat(params[6] - defX + endOffsetX, \",\").concat(params[7] - defY + endOffsetY) : '');\n      case 'Z':\n        return 'Z';\n    }\n  }).join(' ');\n  if (~newValue.indexOf('NaN')) {\n    return '';\n  }\n  return newValue;\n}\nvar internalParsePath = function (path) {\n  // empty path\n  if (path === '' || Array.isArray(path) && path.length === 0) {\n    return {\n      absolutePath: [],\n      hasArc: false,\n      segments: [],\n      polygons: [],\n      polylines: [],\n      curve: null,\n      totalLength: 0,\n      rect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n  }\n  var absolutePath;\n  try {\n    absolutePath = normalizePath(path);\n  } catch (e) {\n    absolutePath = normalizePath('');\n    console.error(\"[g]: Invalid SVG Path definition: \".concat(path));\n  }\n  removeRedundantMCommand(absolutePath);\n  var hasArc = hasArcOrBezier(absolutePath);\n  var _a = extractPolygons(absolutePath),\n    polygons = _a.polygons,\n    polylines = _a.polylines;\n  // for later use\n  var segments = path2Segments(absolutePath);\n  // Only calculate bbox here since we don't need length now.\n  var _b = getPathBBox(segments, 0),\n    x = _b.x,\n    y = _b.y,\n    width = _b.width,\n    height = _b.height;\n  return {\n    absolutePath: absolutePath,\n    hasArc: hasArc,\n    segments: segments,\n    polygons: polygons,\n    polylines: polylines,\n    // curve,\n    // Delay the calculation of length.\n    totalLength: 0,\n    rect: {\n      x: Number.isFinite(x) ? x : 0,\n      y: Number.isFinite(y) ? y : 0,\n      width: Number.isFinite(width) ? width : 0,\n      height: Number.isFinite(height) ? height : 0\n    }\n  };\n};\nvar memoizedParsePath = memoize(internalParsePath);\nfunction parsePath(path) {\n  return isString(path) ? memoizedParsePath(path) : internalParsePath(path);\n}\nfunction mergePaths(left, right, object) {\n  var curve1 = left.curve;\n  var curve2 = right.curve;\n  if (!curve1 || curve1.length === 0) {\n    // convert to curves to do morphing & picking later\n    // @see http://thednp.github.io/kute.js/svgCubicMorph.html\n    curve1 = path2Curve(left.absolutePath, false);\n    left.curve = curve1;\n  }\n  if (!curve2 || curve2.length === 0) {\n    curve2 = path2Curve(right.absolutePath, false);\n    right.curve = curve2;\n  }\n  var curves = [curve1, curve2];\n  if (curve1.length !== curve2.length) {\n    curves = equalizeSegments(curve1, curve2);\n  }\n  var curve0 = getDrawDirection(curves[0]) !== getDrawDirection(curves[1]) ? reverseCurve(curves[0]) : clonePath(curves[0]);\n  return [curve0, getRotatedCurve(curves[1], curve0), function (pathArray) {\n    // need converting to path string?\n    return pathArray;\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/points\n *\n * @example\n * points=\"100,10 250,150 200,110\"\n */\nfunction parsePoints(pointsOrStr, object) {\n  var points;\n  if (isString(pointsOrStr)) {\n    points = pointsOrStr.split(' ').map(function (pointStr) {\n      var _a = __read(pointStr.split(','), 2),\n        x = _a[0],\n        y = _a[1];\n      return [Number(x), Number(y)];\n    });\n  } else {\n    points = pointsOrStr;\n  }\n  var segments = [];\n  var tempLength = 0;\n  var segmentT;\n  var segmentL;\n  var totalLength = polylineLength(points);\n  points.forEach(function (p, i) {\n    if (points[i + 1]) {\n      segmentT = [0, 0];\n      segmentT[0] = tempLength / totalLength;\n      segmentL = lineLength(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n      tempLength += segmentL;\n      segmentT[1] = tempLength / totalLength;\n      segments.push(segmentT);\n    }\n  });\n  var minX = Math.min.apply(Math, __spreadArray([], __read(points.map(function (point) {\n    return point[0];\n  })), false));\n  var minY = Math.min.apply(Math, __spreadArray([], __read(points.map(function (point) {\n    return point[1];\n  })), false));\n  if (object) {\n    object.parsedStyle.defX = minX;\n    object.parsedStyle.defY = minY;\n  }\n  return {\n    points: points,\n    totalLength: totalLength,\n    segments: segments\n  };\n}\nfunction mergePoints(left, right) {\n  return [left.points, right.points, function (points) {\n    return points;\n  }];\n}\nvar _ = null;\nfunction cast(pattern) {\n  return function (contents) {\n    var i = 0;\n    return pattern.map(function (x) {\n      return x === _ ? contents[i++] : x;\n    });\n  };\n}\nfunction id(x) {\n  return x;\n}\n// type: [argTypes, convertTo3D, convertTo2D]\n// In the argument types string, lowercase characters represent optional arguments\nvar transformFunctions = {\n  // @ts-ignore\n  matrix: ['NNNNNN', [_, _, 0, 0, _, _, 0, 0, 0, 0, 1, 0, _, _, 0, 1], id],\n  matrix3d: ['NNNNNNNNNNNNNNNN', id],\n  rotate: ['A'],\n  rotatex: ['A'],\n  rotatey: ['A'],\n  rotatez: ['A'],\n  rotate3d: ['NNNA'],\n  perspective: ['L'],\n  scale: ['Nn', cast([_, _, new CSSUnitValue(1)]), id],\n  scalex: ['N', cast([_, new CSSUnitValue(1), new CSSUnitValue(1)]), cast([_, new CSSUnitValue(1)])],\n  scaley: ['N', cast([new CSSUnitValue(1), _, new CSSUnitValue(1)]), cast([new CSSUnitValue(1), _])],\n  scalez: ['N', cast([new CSSUnitValue(1), new CSSUnitValue(1), _])],\n  scale3d: ['NNN', id],\n  skew: ['Aa', null, id],\n  skewx: ['A', null, cast([_, Odeg])],\n  skewy: ['A', null, cast([Odeg, _])],\n  translate: ['Tt', cast([_, _, Opx]), id],\n  translatex: ['T', cast([_, Opx, Opx]), cast([_, Opx])],\n  translatey: ['T', cast([Opx, _, Opx]), cast([Opx, _])],\n  translatez: ['L', cast([Opx, Opx, _])],\n  translate3d: ['TTL', id]\n};\n/**\n * none\n * scale(1) scale(1, 2)\n * scaleX(1)\n */\nfunction parseTransform(string) {\n  string = (string || 'none').toLowerCase().trim();\n  if (string === 'none') {\n    return [];\n  }\n  var transformRegExp = /\\s*(\\w+)\\(([^)]*)\\)/g;\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  while (match = transformRegExp.exec(string)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function (s) {\n            return s.trim() === '0' ? Odeg : parseAngle(s);\n          },\n          N: parseNumber,\n          T: parseLengthOrPercentage,\n          L: parseLength\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n    if (transformRegExp.lastIndex === string.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction parseTransformUnmemoize(string) {\n  string = (string || 'none').toLowerCase().trim();\n  if (string === 'none') {\n    return [];\n  }\n  var transformRegExp = /\\s*(\\w+)\\(([^)]*)\\)/g;\n  var result = [];\n  var match;\n  var prevLastIndex = 0;\n  while (match = transformRegExp.exec(string)) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    var functionName = match[1]; // scale\n    var functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    var args = match[2].split(','); // 1,2\n    var argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n    var parsedArgs = [];\n    for (var i = 0; i < argTypes.length; i++) {\n      var arg = args[i];\n      var type = argTypes[i];\n      var parsedArg = void 0;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: function (s) {\n            return s.trim() === '0' ? Odeg : parseAngleUnmemoize(s);\n          },\n          N: parseNumberUnmemoize,\n          T: parseLengthOrPercentageUnmemoize,\n          L: parseLengthUnmemoize\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({\n      t: functionName,\n      d: parsedArgs\n    }); // { t: scale, d: [1, 2] }\n    if (transformRegExp.lastIndex === string.length) {\n      return result;\n    }\n  }\n  return [];\n}\nfunction convertItemToMatrix(item) {\n  var x;\n  var y;\n  var z;\n  var angle;\n  switch (item.t) {\n    case 'rotatex':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, 0, Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotatey':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), 0, -Math.sin(angle), 0, 0, 1, 0, 0, Math.sin(angle), 0, Math.cos(angle), 0, 0, 0, 0, 1];\n    case 'rotate':\n    case 'rotatez':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [Math.cos(angle), Math.sin(angle), 0, 0, -Math.sin(angle), Math.cos(angle), 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'rotate3d':\n      x = item.d[0].value;\n      y = item.d[1].value;\n      z = item.d[2].value;\n      angle = deg2rad(convertAngleUnit(item.d[3]));\n      var sqrLength = x * x + y * y + z * z;\n      if (sqrLength === 0) {\n        x = 1;\n        y = 0;\n        z = 0;\n      } else if (sqrLength !== 1) {\n        var length_1 = Math.sqrt(sqrLength);\n        x /= length_1;\n        y /= length_1;\n        z /= length_1;\n      }\n      var s = Math.sin(angle / 2);\n      var sc = s * Math.cos(angle / 2);\n      var sq = s * s;\n      return [1 - 2 * (y * y + z * z) * sq, 2 * (x * y * sq + z * sc), 2 * (x * z * sq - y * sc), 0, 2 * (x * y * sq - z * sc), 1 - 2 * (x * x + z * z) * sq, 2 * (y * z * sq + x * sc), 0, 2 * (x * z * sq + y * sc), 2 * (y * z * sq - x * sc), 1 - 2 * (x * x + y * y) * sq, 0, 0, 0, 0, 1];\n    case 'scale':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scalex':\n      return [item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaley':\n      return [1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scalez':\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1];\n    case 'scale3d':\n      return [item.d[0].value, 0, 0, 0, 0, item.d[1].value, 0, 0, 0, 0, item.d[2].value, 0, 0, 0, 0, 1];\n    case 'skew':\n      var xAngle = deg2rad(convertAngleUnit(item.d[0]));\n      var yAngle = deg2rad(convertAngleUnit(item.d[1]));\n      return [1, Math.tan(yAngle), 0, 0, Math.tan(xAngle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewx':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, Math.tan(angle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewy':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, Math.tan(angle), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'translate':\n      // TODO: pass target\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, 0, 1];\n    case 'translatex':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n    case 'translatey':\n      y = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, y, 0, 1];\n    case 'translatez':\n      z = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, z, 1];\n    case 'translate3d':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      z = convertPercentUnit(item.d[2], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1];\n    case 'perspective':\n      var t = convertPercentUnit(item.d[0], 0, null) || 0;\n      var p = t ? -1 / t : 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, p, 0, 0, 0, 1];\n    case 'matrix':\n      return [item.d[0].value, item.d[1].value, 0, 0, item.d[2].value, item.d[3].value, 0, 0, 0, 0, 1, 0, item.d[4].value, item.d[5].value, 0, 1];\n    case 'matrix3d':\n      return item.d.map(function (d) {\n        return d.value;\n      });\n  }\n}\nfunction multiplyMatrices(a, b) {\n  return [a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3], a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3], a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3], a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3], a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7], a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7], a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7], a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7], a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11], a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11], a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11], a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11], a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15], a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15], a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15], a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15]];\n}\nfunction convertToMatrix(transformList) {\n  if (transformList.length === 0) {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  }\n  return transformList.map(convertItemToMatrix).reduce(multiplyMatrices);\n}\nfunction makeMatrixDecomposition(transformList) {\n  var translate = [0, 0, 0];\n  var scale = [1, 1, 1];\n  var skew = [0, 0, 0];\n  var perspective = [0, 0, 0, 1];\n  var quaternion = [0, 0, 0, 1];\n  decomposeMat4(\n  // @ts-ignore\n  convertToMatrix(transformList), translate, scale, skew, perspective, quaternion);\n  return [[translate, scale, skew, quaternion, perspective]];\n}\nvar composeMatrix = function () {\n  function multiply(a, b) {\n    var result = [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]];\n    for (var i = 0; i < 4; i++) {\n      for (var j = 0; j < 4; j++) {\n        for (var k = 0; k < 4; k++) {\n          result[i][j] += b[i][k] * a[k][j];\n        }\n      }\n    }\n    return result;\n  }\n  function is2D(m) {\n    return m[0][2] == 0 && m[0][3] == 0 && m[1][2] == 0 && m[1][3] == 0 && m[2][0] == 0 && m[2][1] == 0 && m[2][2] == 1 && m[2][3] == 0 && m[3][2] == 0 && m[3][3] == 1;\n  }\n  function composeMatrix(translate, scale, skew, quat, perspective) {\n    var matrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    for (var i = 0; i < 4; i++) {\n      matrix[i][3] = perspective[i];\n    }\n    for (var i = 0; i < 3; i++) {\n      for (var j = 0; j < 3; j++) {\n        matrix[3][i] += translate[j] * matrix[j][i];\n      }\n    }\n    var x = quat[0],\n      y = quat[1],\n      z = quat[2],\n      w = quat[3];\n    var rotMatrix = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    rotMatrix[0][0] = 1 - 2 * (y * y + z * z);\n    rotMatrix[0][1] = 2 * (x * y - z * w);\n    rotMatrix[0][2] = 2 * (x * z + y * w);\n    rotMatrix[1][0] = 2 * (x * y + z * w);\n    rotMatrix[1][1] = 1 - 2 * (x * x + z * z);\n    rotMatrix[1][2] = 2 * (y * z - x * w);\n    rotMatrix[2][0] = 2 * (x * z - y * w);\n    rotMatrix[2][1] = 2 * (y * z + x * w);\n    rotMatrix[2][2] = 1 - 2 * (x * x + y * y);\n    matrix = multiply(matrix, rotMatrix);\n    var temp = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];\n    if (skew[2]) {\n      temp[2][1] = skew[2];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[1]) {\n      temp[2][1] = 0;\n      temp[2][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    if (skew[0]) {\n      temp[2][0] = 0;\n      temp[1][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n    for (var i = 0; i < 3; i++) {\n      for (var j = 0; j < 3; j++) {\n        matrix[i][j] *= scale[i];\n      }\n    }\n    if (is2D(matrix)) {\n      return [matrix[0][0], matrix[0][1], matrix[1][0], matrix[1][1], matrix[3][0], matrix[3][1]];\n    }\n    return matrix[0].concat(matrix[1], matrix[2], matrix[3]);\n  }\n  return composeMatrix;\n}();\nfunction numberToLongString(x) {\n  return x.toFixed(6).replace('.000000', '');\n}\nfunction mergeMatrices(left, right) {\n  var leftArgs;\n  var rightArgs;\n  // @ts-ignore\n  if (left.decompositionPair !== right) {\n    // @ts-ignore\n    left.decompositionPair = right;\n    // @ts-ignore\n    leftArgs = makeMatrixDecomposition(left);\n  }\n  // @ts-ignore\n  if (right.decompositionPair !== left) {\n    // @ts-ignore\n    right.decompositionPair = left;\n    // @ts-ignore\n    rightArgs = makeMatrixDecomposition(right);\n  }\n  if (leftArgs[0] === null || rightArgs[0] === null) return [\n  // @ts-ignore\n  [false],\n  // @ts-ignore\n  [true],\n  // @ts-ignore\n  function (x) {\n    return x ? right[0].d : left[0].d;\n  }];\n  leftArgs[0].push(0);\n  rightArgs[0].push(1);\n  return [leftArgs, rightArgs,\n  // @ts-ignore\n  function (list) {\n    // @ts-ignore\n    var q = quat(leftArgs[0][3], rightArgs[0][3], list[5]);\n    var mat = composeMatrix(list[0], list[1], list[2], q, list[4]);\n    var stringifiedArgs = mat.map(numberToLongString).join(',');\n    return stringifiedArgs;\n  }];\n}\nfunction dot(v1, v2) {\n  var result = 0;\n  for (var i = 0; i < v1.length; i++) {\n    result += v1[i] * v2[i];\n  }\n  return result;\n}\nfunction quat(fromQ, toQ, f) {\n  var product = dot(fromQ, toQ);\n  product = clamp(product, -1.0, 1.0);\n  var quat = [];\n  if (product === 1.0) {\n    quat = fromQ;\n  } else {\n    var theta = Math.acos(product);\n    var w = Math.sin(f * theta) * 1 / Math.sqrt(1 - product * product);\n    for (var i = 0; i < 4; i++) {\n      quat.push(fromQ[i] * (Math.cos(f * theta) - product * w) + toQ[i] * w);\n    }\n  }\n  return quat;\n}\n// scalex/y/z -> scale\nfunction typeTo2D(type) {\n  return type.replace(/[xy]/, '');\n}\n// scalex/y/z -> scale3d\nfunction typeTo3D(type) {\n  return type.replace(/(x|y|z|3d)?$/, '3d');\n}\nvar isMatrixOrPerspective = function (lt, rt) {\n  return lt === 'perspective' && rt === 'perspective' || (lt === 'matrix' || lt === 'matrix3d') && (rt === 'matrix' || rt === 'matrix3d');\n};\nfunction mergeTransforms(left, right, target) {\n  var flipResults = false;\n  // padding empty transform, eg. merge 'scale(10)' with 'none' -> scale(1)\n  if (!left.length || !right.length) {\n    if (!left.length) {\n      flipResults = true;\n      left = right;\n      right = [];\n    }\n    var _loop_1 = function (i) {\n      var _a = left[i],\n        type = _a.t,\n        args = _a.d;\n      // none -> scale(1)/translateX(0)\n      var defaultValue = type.substring(0, 5) === 'scale' ? 1 : 0;\n      right.push({\n        t: type,\n        d: args.map(function (arg) {\n          if (typeof arg === 'number') {\n            return getOrCreateUnitValue(defaultValue);\n          }\n          return getOrCreateUnitValue(defaultValue, arg.unit);\n          //   {\n          //     unit: arg.unit,\n          //     value: defaultValue,\n          //   };\n        })\n      });\n    };\n    for (var i = 0; i < left.length; i++) {\n      _loop_1(i);\n    }\n  }\n  var leftResult = [];\n  var rightResult = [];\n  var types = [];\n  // merge matrix() with matrix3d()\n  if (left.length !== right.length) {\n    var merged = mergeMatrices(left, right);\n    // @ts-ignore\n    leftResult = [merged[0]];\n    // @ts-ignore\n    rightResult = [merged[1]];\n    types = [['matrix', [merged[2]]]];\n  } else {\n    for (var i = 0; i < left.length; i++) {\n      var leftType = left[i].t;\n      var rightType = right[i].t;\n      var leftArgs = left[i].d;\n      var rightArgs = right[i].d;\n      var leftFunctionData = transformFunctions[leftType];\n      var rightFunctionData = transformFunctions[rightType];\n      var type = void 0;\n      if (isMatrixOrPerspective(leftType, rightType)) {\n        var merged = mergeMatrices([left[i]], [right[i]]);\n        // @ts-ignore\n        leftResult.push(merged[0]);\n        // @ts-ignore\n        rightResult.push(merged[1]);\n        types.push(['matrix', [merged[2]]]);\n        continue;\n      } else if (leftType === rightType) {\n        type = leftType;\n      } else if (leftFunctionData[2] && rightFunctionData[2] && typeTo2D(leftType) === typeTo2D(rightType)) {\n        type = typeTo2D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[2](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[2](rightArgs);\n      } else if (leftFunctionData[1] && rightFunctionData[1] && typeTo3D(leftType) === typeTo3D(rightType)) {\n        type = typeTo3D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[1](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[1](rightArgs);\n      } else {\n        var merged = mergeMatrices(left, right);\n        // @ts-ignore\n        leftResult = [merged[0]];\n        // @ts-ignore\n        rightResult = [merged[1]];\n        types = [['matrix', [merged[2]]]];\n        break;\n      }\n      var leftArgsCopy = [];\n      var rightArgsCopy = [];\n      var stringConversions = [];\n      for (var j = 0; j < leftArgs.length; j++) {\n        // const merge = leftArgs[j].unit === UnitType.kNumber ? mergeDimensions : mergeDimensions;\n        var merged = mergeDimensions(leftArgs[j], rightArgs[j], target, false, j);\n        leftArgsCopy[j] = merged[0];\n        rightArgsCopy[j] = merged[1];\n        stringConversions.push(merged[2]);\n      }\n      leftResult.push(leftArgsCopy);\n      rightResult.push(rightArgsCopy);\n      types.push([type, stringConversions]);\n    }\n  }\n  if (flipResults) {\n    var tmp = leftResult;\n    leftResult = rightResult;\n    rightResult = tmp;\n  }\n  return [leftResult, rightResult, function (list) {\n    return list.map(function (args, i) {\n      var stringifiedArgs = args.map(function (arg, j) {\n        return types[i][1][j](arg);\n      }).join(',');\n      if (types[i][0] === 'matrix' && stringifiedArgs.split(',').length === 16) {\n        types[i][0] = 'matrix3d';\n      }\n      if (types[i][0] === 'matrix3d' && stringifiedArgs.split(',').length === 6) {\n        types[i][0] = 'matrix';\n      }\n      return types[i][0] + '(' + stringifiedArgs + ')';\n    }).join(' ');\n  }];\n}\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * eg. 'center' 'top left' '50px 50px'\n */\nvar parseTransformOrigin = memoize(function (value) {\n  if (isString(value)) {\n    if (value === 'text-anchor') {\n      return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n    }\n    var values = value.split(' ');\n    if (values.length === 1) {\n      if (values[0] === 'top' || values[0] === 'bottom') {\n        // 'top' -> 'center top'\n        values[1] = values[0];\n        values[0] = 'center';\n      } else {\n        // '50px' -> '50px center'\n        values[1] = 'center';\n      }\n    }\n    if (values.length !== 2) {\n      return null;\n    }\n    // eg. center bottom\n    return [parseLengthOrPercentage(convertKeyword2Percent(values[0])), parseLengthOrPercentage(convertKeyword2Percent(values[1]))];\n  } else {\n    return [getOrCreateUnitValue(value[0] || 0, 'px'), getOrCreateUnitValue(value[1] || 0, 'px')];\n  }\n});\nvar parseTransformOriginUnmemoize = function (value) {\n  if (isString(value)) {\n    if (value === 'text-anchor') {\n      return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n    }\n    var values = value.split(' ');\n    if (values.length === 1) {\n      if (values[0] === 'top' || values[0] === 'bottom') {\n        // 'top' -> 'center top'\n        values[1] = values[0];\n        values[0] = 'center';\n      } else {\n        // '50px' -> '50px center'\n        values[1] = 'center';\n      }\n    }\n    if (values.length !== 2) {\n      return null;\n    }\n    // eg. center bottom\n    return [parseLengthOrPercentageUnmemoize(convertKeyword2Percent(values[0])), parseLengthOrPercentageUnmemoize(convertKeyword2Percent(values[1]))];\n  } else {\n    return [getOrCreateUnitValue(value[0] || 0, 'px'), getOrCreateUnitValue(value[1] || 0, 'px')];\n  }\n};\nfunction convertKeyword2Percent(keyword) {\n  if (keyword === 'center') {\n    return '50%';\n  } else if (keyword === 'left' || keyword === 'top') {\n    return '0';\n  } else if (keyword === 'right' || keyword === 'bottom') {\n    return '100%';\n  }\n  return keyword;\n}\n\n/**\n * Blink used them in code generation(css_properties.json5)\n */\nvar BUILT_IN_PROPERTIES = [{\n  /**\n   * used in CSS Layout API\n   * eg. `display: 'flex'`\n   */\n  n: 'display',\n  k: ['none']\n}, {\n  /**\n   * range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\n   */\n  n: 'opacity',\n  int: true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#FillOpacity\n   */\n  n: 'fillOpacity',\n  int: true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * inheritable, range [0.0, 1.0]\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-opacity\n   * @see https://svgwg.org/svg2-draft/painting.html#StrokeOpacity\n   */\n  n: 'strokeOpacity',\n  int: true,\n  inh: true,\n  d: '1',\n  syntax: PropertySyntax.OPACITY_VALUE\n}, {\n  /**\n   * background-color is not inheritable\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes\n   */\n  n: 'fill',\n  int: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT\n}, {\n  n: 'fillRule',\n  k: ['nonzero', 'evenodd'],\n  d: 'nonzero'\n},\n/**\n * default to none\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#usage_notes\n */\n{\n  n: 'stroke',\n  int: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.PAINT,\n  /**\n   * Stroke 'none' won't affect geometry but others will.\n   */\n  l: true\n}, {\n  n: 'shadowType',\n  k: ['inner', 'outer', 'both'],\n  d: 'outer',\n  l: true\n}, {\n  n: 'shadowColor',\n  int: true,\n  syntax: PropertySyntax.COLOR\n}, {\n  n: 'shadowOffsetX',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowOffsetY',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'shadowBlur',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.SHADOW_BLUR\n}, {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n   */\n  n: 'lineWidth',\n  int: true,\n  inh: true,\n  d: '1',\n  l: true,\n  a: ['strokeWidth'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'increasedLineWidthForHitTesting',\n  inh: true,\n  d: '0',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'lineJoin',\n  inh: true,\n  l: true,\n  a: ['strokeLinejoin'],\n  k: ['miter', 'bevel', 'round'],\n  d: 'miter'\n}, {\n  n: 'lineCap',\n  inh: true,\n  l: true,\n  a: ['strokeLinecap'],\n  k: ['butt', 'round', 'square'],\n  d: 'butt'\n}, {\n  n: 'lineDash',\n  int: true,\n  inh: true,\n  k: ['none'],\n  a: ['strokeDasharray'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_12\n}, {\n  n: 'lineDashOffset',\n  int: true,\n  inh: true,\n  d: '0',\n  a: ['strokeDashoffset'],\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'offsetPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'offsetDistance',\n  int: true,\n  syntax: PropertySyntax.OFFSET_DISTANCE\n}, {\n  n: 'dx',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'dy',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'zIndex',\n  ind: true,\n  int: true,\n  d: '0',\n  k: ['auto'],\n  syntax: PropertySyntax.Z_INDEX\n}, {\n  n: 'visibility',\n  k: ['visible', 'hidden'],\n  ind: true,\n  inh: true,\n  /**\n   * support interpolation\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation\n   */\n  int: true,\n  d: 'visible'\n}, {\n  n: 'pointerEvents',\n  inh: true,\n  k: ['none', 'auto', 'stroke', 'fill', 'painted', 'visible', 'visiblestroke', 'visiblefill', 'visiblepainted',\n  // 'bounding-box',\n  'all'],\n  d: 'auto'\n}, {\n  n: 'filter',\n  ind: true,\n  l: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.FILTER\n}, {\n  n: 'clipPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPath',\n  syntax: PropertySyntax.DEFINED_PATH\n}, {\n  n: 'textPathSide',\n  k: ['left', 'right'],\n  d: 'left'\n}, {\n  n: 'textPathStartOffset',\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'transform',\n  p: 100,\n  int: true,\n  k: ['none'],\n  d: 'none',\n  syntax: PropertySyntax.TRANSFORM\n}, {\n  n: 'transformOrigin',\n  p: 100,\n  // int: true,\n  d: function (nodeName) {\n    if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n      return 'center';\n    }\n    if (nodeName === Shape.TEXT) {\n      return 'text-anchor';\n    }\n    return 'left top';\n  },\n  l: true,\n  syntax: PropertySyntax.TRANSFORM_ORIGIN\n}, {\n  n: 'anchor',\n  p: 99,\n  d: function (nodeName) {\n    if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n      return '0.5 0.5';\n    }\n    return '0 0';\n  },\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_12\n},\n// <circle> & <ellipse>\n{\n  n: 'cx',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cy',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'cz',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'r',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'rx',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'ry',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n},\n// Rect Image Group\n{\n  // x in local space\n  n: 'x',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // y in local space\n  n: 'y',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  // z in local space\n  n: 'z',\n  int: true,\n  d: '0',\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'width',\n  int: true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/width\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'height',\n  int: true,\n  l: true,\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/height\n   */\n  k: ['auto', 'fit-content', 'min-content', 'max-content'],\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'radius',\n  int: true,\n  l: true,\n  d: '0',\n  syntax: PropertySyntax.LENGTH_PERCENTAGE_14\n},\n// Line\n{\n  n: 'x1',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y1',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z1',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'x2',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'y2',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n}, {\n  n: 'z2',\n  int: true,\n  l: true,\n  syntax: PropertySyntax.COORDINATE\n},\n// Path\n{\n  n: 'path',\n  int: true,\n  l: true,\n  d: '',\n  a: ['d'],\n  syntax: PropertySyntax.PATH,\n  p: 50\n},\n// Polyline & Polygon\n{\n  n: 'points',\n  /**\n   * support interpolation\n   */\n  int: true,\n  l: true,\n  syntax: PropertySyntax.LIST_OF_POINTS,\n  p: 50\n},\n// Text\n{\n  n: 'text',\n  l: true,\n  d: '',\n  syntax: PropertySyntax.TEXT,\n  p: 50\n}, {\n  n: 'textTransform',\n  l: true,\n  inh: true,\n  k: ['capitalize', 'uppercase', 'lowercase', 'none'],\n  d: 'none',\n  syntax: PropertySyntax.TEXT_TRANSFORM,\n  p: 51 // it must get parsed after text\n}, {\n  n: 'font',\n  l: true\n}, {\n  n: 'fontSize',\n  int: true,\n  inh: true,\n  /**\n   * @see https://www.w3schools.com/css/css_font_size.asp\n   */\n  d: '16px',\n  l: true,\n  syntax: PropertySyntax.LENGTH_PERCENTAGE\n}, {\n  n: 'fontFamily',\n  l: true,\n  inh: true,\n  d: 'sans-serif'\n}, {\n  n: 'fontStyle',\n  l: true,\n  inh: true,\n  k: ['normal', 'italic', 'oblique'],\n  d: 'normal'\n}, {\n  n: 'fontWeight',\n  l: true,\n  inh: true,\n  k: ['normal', 'bold', 'bolder', 'lighter'],\n  d: 'normal'\n}, {\n  n: 'fontVariant',\n  l: true,\n  inh: true,\n  k: ['normal', 'small-caps'],\n  d: 'normal'\n}, {\n  n: 'lineHeight',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  int: true,\n  d: '0'\n}, {\n  n: 'letterSpacing',\n  l: true,\n  syntax: PropertySyntax.LENGTH,\n  int: true,\n  d: '0'\n}, {\n  n: 'miterLimit',\n  l: true,\n  syntax: PropertySyntax.NUMBER,\n  d: function (nodeName) {\n    if (nodeName === Shape.PATH || nodeName === Shape.POLYGON || nodeName === Shape.POLYLINE) {\n      return '4';\n    }\n    return '10';\n  }\n}, {\n  n: 'wordWrap',\n  l: true\n}, {\n  n: 'wordWrapWidth',\n  l: true\n}, {\n  n: 'maxLines',\n  l: true\n}, {\n  n: 'textOverflow',\n  l: true,\n  d: 'clip'\n}, {\n  n: 'leading',\n  l: true\n}, {\n  n: 'textBaseline',\n  l: true,\n  inh: true,\n  k: ['top', 'hanging', 'middle', 'alphabetic', 'ideographic', 'bottom'],\n  d: 'alphabetic'\n}, {\n  n: 'textAlign',\n  l: true,\n  inh: true,\n  k: ['start', 'center', 'middle', 'end', 'left', 'right'],\n  d: 'start'\n},\n// {\n//   n: 'whiteSpace',\n//   l: true,\n// },\n{\n  n: 'markerStart',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerEnd',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerMid',\n  syntax: PropertySyntax.MARKER\n}, {\n  n: 'markerStartOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  int: true,\n  d: '0'\n}, {\n  n: 'markerEndOffset',\n  syntax: PropertySyntax.LENGTH,\n  l: true,\n  int: true,\n  d: '0'\n}];\nvar GEOMETRY_ATTRIBUTE_NAMES = BUILT_IN_PROPERTIES.filter(function (n) {\n  return !!n.l;\n}).map(function (n) {\n  return n.n;\n});\nvar propertyMetadataCache = {};\nvar unresolvedProperties = new WeakMap();\n// const uniqueAttributeSet = new Set<string>();\n// const tmpVec3a = vec3.create();\n// const tmpVec3b = vec3.create();\n// const tmpVec3c = vec3.create();\nvar isPropertyResolved = function (object, name) {\n  var properties = unresolvedProperties.get(object);\n  if (!properties || properties.length === 0) {\n    return true;\n  }\n  return properties.includes(name);\n};\nvar DefaultStyleValueRegistry = /** @class */function () {\n  /**\n   * need recalc later\n   */\n  // dirty = false;\n  function DefaultStyleValueRegistry(runtime) {\n    var _this = this;\n    this.runtime = runtime;\n    BUILT_IN_PROPERTIES.forEach(function (property) {\n      _this.registerMetadata(property);\n    });\n  }\n  DefaultStyleValueRegistry.prototype.registerMetadata = function (metadata) {\n    __spreadArray([metadata.n], __read(metadata.a || []), false).forEach(function (name) {\n      propertyMetadataCache[name] = metadata;\n    });\n  };\n  DefaultStyleValueRegistry.prototype.unregisterMetadata = function (name) {\n    delete propertyMetadataCache[name];\n  };\n  DefaultStyleValueRegistry.prototype.getPropertySyntax = function (syntax) {\n    return this.runtime.CSSPropertySyntaxFactory[syntax];\n  };\n  /**\n   * * parse value, eg.\n   * fill: 'red' => CSSRGB\n   * translateX: '10px' => CSSUnitValue { unit: 'px', value: 10 }\n   * fontSize: '2em' => { unit: 'px', value: 32 }\n   *\n   * * calculate used value\n   * * post process\n   */\n  DefaultStyleValueRegistry.prototype.processProperties = function (object, attributes, options) {\n    var _this = this;\n    if (options === void 0) {\n      options = {\n        skipUpdateAttribute: false,\n        skipParse: false,\n        forceUpdateGeometry: false,\n        usedAttributes: [],\n        memoize: true\n      };\n    }\n    if (!this.runtime.enableCSSParsing) {\n      Object.assign(object.attributes, attributes);\n      var attributeNames_1 = Object.keys(attributes);\n      // clipPath\n      var oldClipPath = object.parsedStyle.clipPath;\n      var oldOffsetPath = object.parsedStyle.offsetPath;\n      object.parsedStyle = Object.assign(object.parsedStyle, attributes);\n      var needUpdateGeometry_1 = !!options.forceUpdateGeometry;\n      if (!needUpdateGeometry_1) {\n        for (var i = 0; i < GEOMETRY_ATTRIBUTE_NAMES.length; i++) {\n          if (GEOMETRY_ATTRIBUTE_NAMES[i] in attributes) {\n            needUpdateGeometry_1 = true;\n            break;\n          }\n        }\n      }\n      if (attributes.fill) {\n        object.parsedStyle.fill = parseColor(attributes.fill);\n      }\n      if (attributes.stroke) {\n        object.parsedStyle.stroke = parseColor(attributes.stroke);\n      }\n      if (attributes.shadowColor) {\n        object.parsedStyle.shadowColor = parseColor(attributes.shadowColor);\n      }\n      if (attributes.filter) {\n        object.parsedStyle.filter = parseFilter(attributes.filter);\n      }\n      // Rect\n      // @ts-ignore\n      if (!isNil(attributes.radius)) {\n        // @ts-ignore\n        object.parsedStyle.radius = parseDimensionArrayFormat(\n        // @ts-ignore\n        attributes.radius, 4);\n      }\n      // Polyline\n      if (!isNil(attributes.lineDash)) {\n        object.parsedStyle.lineDash = parseDimensionArrayFormat(attributes.lineDash, 2);\n      }\n      // @ts-ignore\n      if (attributes.points) {\n        // @ts-ignore\n        object.parsedStyle.points = parsePoints(attributes.points, object);\n      }\n      // Path\n      // @ts-ignore\n      if (attributes.path === '') {\n        object.parsedStyle.path = __assign({}, EMPTY_PARSED_PATH);\n      }\n      // @ts-ignore\n      if (attributes.path) {\n        object.parsedStyle.path = parsePath(\n        // @ts-ignore\n        attributes.path);\n        object.parsedStyle.defX = object.parsedStyle.path.rect.x;\n        object.parsedStyle.defY = object.parsedStyle.path.rect.y;\n      }\n      // Text\n      if (attributes.textTransform) {\n        this.runtime.CSSPropertySyntaxFactory['<text-transform>'].calculator(null, null, {\n          value: attributes.textTransform\n        }, object, null);\n      }\n      if (attributes.clipPath) {\n        this.runtime.CSSPropertySyntaxFactory['<defined-path>'].calculator('clipPath', oldClipPath, attributes.clipPath, object, this.runtime);\n      }\n      if (attributes.offsetPath) {\n        this.runtime.CSSPropertySyntaxFactory['<defined-path>'].calculator('offsetPath', oldOffsetPath, attributes.offsetPath, object, this.runtime);\n      }\n      if (attributes.anchor) {\n        object.parsedStyle.anchor = parseDimensionArrayFormat(\n        // @ts-ignorex\n        attributes.anchor, 2);\n      }\n      if (attributes.transform) {\n        object.parsedStyle.transform = parseTransform(attributes.transform);\n      }\n      if (attributes.transformOrigin) {\n        object.parsedStyle.transformOrigin = parseTransformOrigin(attributes.transformOrigin);\n      }\n      // Marker\n      // @ts-ignore\n      if (attributes.markerStart) {\n        object.parsedStyle.markerStart = this.runtime.CSSPropertySyntaxFactory['<marker>'].calculator(null,\n        // @ts-ignore\n        attributes.markerStart,\n        // @ts-ignore\n        attributes.markerStart, null, null);\n      }\n      // @ts-ignore\n      if (attributes.markerEnd) {\n        object.parsedStyle.markerEnd = this.runtime.CSSPropertySyntaxFactory['<marker>'].calculator(null,\n        // @ts-ignore\n        attributes.markerEnd,\n        // @ts-ignore\n        attributes.markerEnd, null, null);\n      }\n      // @ts-ignore\n      if (attributes.markerMid) {\n        object.parsedStyle.markerMid = this.runtime.CSSPropertySyntaxFactory['<marker>'].calculator('',\n        // @ts-ignore\n        attributes.markerMid,\n        // @ts-ignore\n        attributes.markerMid, null, null);\n      }\n      if (\n      // Circle & Ellipse\n      (object.nodeName === Shape.CIRCLE || object.nodeName === Shape.ELLIPSE) && (\n      // @ts-ignore\n      !isNil(attributes.cx) ||\n      // @ts-ignore\n      !isNil(attributes.cy)) || (object.nodeName === Shape.RECT || object.nodeName === Shape.IMAGE || object.nodeName === Shape.GROUP || object.nodeName === Shape.HTML || object.nodeName === Shape.TEXT || object.nodeName === Shape.MESH) && (\n      // @ts-ignore\n      !isNil(attributes.x) ||\n      // @ts-ignore\n      !isNil(attributes.y) ||\n      // @ts-ignore\n      !isNil(attributes.z)) ||\n      // Line\n      object.nodeName === Shape.LINE && (\n      // @ts-ignore\n      !isNil(attributes.x1) ||\n      // @ts-ignore\n      !isNil(attributes.y1) ||\n      // @ts-ignore\n      !isNil(attributes.z1) ||\n      // @ts-ignore\n      !isNil(attributes.x2) ||\n      // @ts-ignore\n      !isNil(attributes.y2) ||\n      // @ts-ignore\n      !isNil(attributes.z2))) {\n        this.runtime.CSSPropertySyntaxFactory['<coordinate>'].postProcessor(object, attributeNames_1);\n      }\n      if (!isNil(attributes.zIndex)) {\n        this.runtime.CSSPropertySyntaxFactory['<z-index>'].postProcessor(object, attributeNames_1);\n      }\n      // @ts-ignore\n      if (attributes.path) {\n        this.runtime.CSSPropertySyntaxFactory['<path>'].postProcessor(object, attributeNames_1);\n      }\n      // @ts-ignore\n      if (attributes.points) {\n        this.runtime.CSSPropertySyntaxFactory['<list-of-points>'].postProcessor(object, attributeNames_1);\n      }\n      if (!isNil(attributes.offsetDistance)) {\n        this.runtime.CSSPropertySyntaxFactory['<offset-distance>'].postProcessor(object, attributeNames_1);\n      }\n      if (attributes.transform) {\n        this.runtime.CSSPropertySyntaxFactory['<transform>'].postProcessor(object, attributeNames_1);\n      }\n      if (needUpdateGeometry_1) {\n        this.updateGeometry(object);\n      }\n      return;\n    }\n    var skipUpdateAttribute = options.skipUpdateAttribute,\n      skipParse = options.skipParse,\n      forceUpdateGeometry = options.forceUpdateGeometry,\n      usedAttributes = options.usedAttributes,\n      memoize = options.memoize;\n    var needUpdateGeometry = forceUpdateGeometry;\n    var attributeNames = Object.keys(attributes);\n    attributeNames.forEach(function (attributeName) {\n      var _a;\n      if (!skipUpdateAttribute) {\n        object.attributes[attributeName] = attributes[attributeName];\n      }\n      if (!needUpdateGeometry && ((_a = propertyMetadataCache[attributeName]) === null || _a === void 0 ? void 0 : _a.l)) {\n        needUpdateGeometry = true;\n      }\n    });\n    if (!skipParse) {\n      attributeNames.forEach(function (name) {\n        object.computedStyle[name] = _this.parseProperty(name, object.attributes[name], object, memoize);\n      });\n    }\n    // let hasUnresolvedProperties = false;\n    // parse according to priority\n    // path 50\n    // points 50\n    // text 50\n    // textTransform 51\n    // anchor 99\n    // transform 100\n    // transformOrigin 100\n    if (usedAttributes === null || usedAttributes === void 0 ? void 0 : usedAttributes.length) {\n      // uniqueAttributeSet.clear();\n      attributeNames = Array.from(new Set(attributeNames.concat(usedAttributes)));\n    }\n    // [\n    //   'path',\n    //   'points',\n    //   'text',\n    //   'textTransform',\n    //   'anchor',\n    //   'transform',\n    //   'transformOrigin',\n    // ].forEach((name) => {\n    //   const index = attributeNames.indexOf(name);\n    //   if (index > -1) {\n    //     attributeNames.splice(index, 1);\n    //     attributeNames.push(name);\n    //   }\n    // });\n    attributeNames.forEach(function (name) {\n      // some style props maybe deleted after parsing such as `anchor` in Text\n      if (name in object.computedStyle) {\n        object.parsedStyle[name] = _this.computeProperty(name, object.computedStyle[name], object, memoize);\n      }\n    });\n    // if (hasUnresolvedProperties) {\n    //   this.dirty = true;\n    //   return;\n    // }\n    // update geometry\n    if (needUpdateGeometry) {\n      // object.geometry.dirty = true;\n      // runtime.sceneGraphService.dirtifyToRoot(object);\n      this.updateGeometry(object);\n    }\n    attributeNames.forEach(function (name) {\n      if (name in object.parsedStyle) {\n        _this.postProcessProperty(name, object, attributeNames);\n      }\n    });\n    if (this.runtime.enableCSSParsing && object.children.length) {\n      attributeNames.forEach(function (name) {\n        if (name in object.parsedStyle && _this.isPropertyInheritable(name)) {\n          // update children's inheritable\n          object.children.forEach(function (child) {\n            child.internalSetAttribute(name, null, {\n              skipUpdateAttribute: true,\n              skipParse: true\n            });\n          });\n        }\n      });\n    }\n  };\n  /**\n   * string -> parsed value\n   */\n  DefaultStyleValueRegistry.prototype.parseProperty = function (name, value, object, memoized) {\n    var metadata = propertyMetadataCache[name];\n    var computed = value;\n    if (value === '' || isNil(value)) {\n      value = 'unset';\n    }\n    if (value === 'unset' || value === 'initial' || value === 'inherit') {\n      // computed = new CSSKeywordValue(value);\n      computed = getOrCreateKeyword(value);\n    } else {\n      if (metadata) {\n        var keywords = metadata.k,\n          syntax = metadata.syntax;\n        var handler = syntax && this.getPropertySyntax(syntax);\n        // use keywords\n        if (keywords && keywords.indexOf(value) > -1) {\n          // computed = new CSSKeywordValue(value);\n          computed = getOrCreateKeyword(value);\n        } else if (handler) {\n          if (!memoized && handler.parserUnmemoize) {\n            computed = handler.parserUnmemoize(value, object);\n          } else if (handler.parser) {\n            // try to parse it to CSSStyleValue, eg. '10px' -> CSS.px(10)\n            computed = handler.parser(value, object);\n          }\n        }\n      }\n    }\n    return computed;\n  };\n  /**\n   * computed value -> used value\n   */\n  DefaultStyleValueRegistry.prototype.computeProperty = function (name, computed, object, memoized) {\n    var metadata = propertyMetadataCache[name];\n    var isDocumentElement = object.id === 'g-root';\n    // let used: CSSStyleValue = computed instanceof CSSStyleValue ? computed.clone() : computed;\n    var used = computed;\n    if (metadata) {\n      var syntax = metadata.syntax,\n        inherited = metadata.inh,\n        defaultValue = metadata.d;\n      if (computed instanceof CSSKeywordValue) {\n        var value = computed.value;\n        /**\n         * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/unset\n         */\n        if (value === 'unset') {\n          if (inherited && !isDocumentElement) {\n            value = 'inherit';\n          } else {\n            value = 'initial';\n          }\n        }\n        if (value === 'initial') {\n          // @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial\n          if (!isNil(defaultValue)) {\n            computed = this.parseProperty(name, isFunction(defaultValue) ? defaultValue(object.nodeName) : defaultValue, object, memoized);\n          }\n        } else if (value === 'inherit') {\n          // @see https://developer.mozilla.org/en-US/docs/Web/CSS/inherit\n          // behave like `inherit`\n          var resolved = this.tryToResolveProperty(object, name, {\n            inherited: true\n          });\n          if (!isNil(resolved)) {\n            // object.parsedStyle[name] = resolved;\n            // return false;\n            return resolved;\n          } else {\n            this.addUnresolveProperty(object, name);\n            return;\n          }\n        }\n      }\n      var handler = syntax && this.getPropertySyntax(syntax);\n      if (handler && handler.calculator) {\n        // convert computed value to used value\n        var oldParsedValue = object.parsedStyle[name];\n        used = handler.calculator(name, oldParsedValue, computed, object, this.runtime);\n      } else if (computed instanceof CSSKeywordValue) {\n        used = computed.value;\n      } else {\n        used = computed;\n      }\n    }\n    // object.parsedStyle[name] = used;\n    // return false;\n    return used;\n  };\n  DefaultStyleValueRegistry.prototype.postProcessProperty = function (name, object, attributes) {\n    var metadata = propertyMetadataCache[name];\n    if (metadata && metadata.syntax) {\n      var handler = metadata.syntax && this.getPropertySyntax(metadata.syntax);\n      var propertyHandler = handler;\n      if (propertyHandler && propertyHandler.postProcessor) {\n        propertyHandler.postProcessor(object, attributes);\n      }\n    }\n  };\n  /**\n   * resolve later\n   */\n  DefaultStyleValueRegistry.prototype.addUnresolveProperty = function (object, name) {\n    var properties = unresolvedProperties.get(object);\n    if (!properties) {\n      unresolvedProperties.set(object, []);\n      properties = unresolvedProperties.get(object);\n    }\n    if (properties.indexOf(name) === -1) {\n      properties.push(name);\n    }\n  };\n  DefaultStyleValueRegistry.prototype.tryToResolveProperty = function (object, name, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var inherited = options.inherited;\n    if (inherited) {\n      if (object.parentElement && isPropertyResolved(object.parentElement, name)) {\n        // const computedValue = object.parentElement.computedStyle[name];\n        var usedValue = object.parentElement.parsedStyle[name];\n        if (\n        // usedValue instanceof CSSKeywordValue &&\n        usedValue === 'unset' || usedValue === 'initial' || usedValue === 'inherit') {\n          return;\n        }\n        // else if (\n        //   usedValue instanceof CSSUnitValue &&\n        //   CSSUnitValue.isRelativeUnit(usedValue.unit)\n        // ) {\n        //   return false;\n        // }\n        return usedValue;\n      }\n    }\n    return;\n  };\n  DefaultStyleValueRegistry.prototype.recalc = function (object) {\n    var properties = unresolvedProperties.get(object);\n    if (properties && properties.length) {\n      var attributes_1 = {};\n      properties.forEach(function (property) {\n        attributes_1[property] = object.attributes[property];\n      });\n      this.processProperties(object, attributes_1);\n      unresolvedProperties.delete(object);\n    }\n  };\n  /**\n   * update geometry when relative props changed,\n   * eg. r of Circle, width/height of Rect\n   */\n  DefaultStyleValueRegistry.prototype.updateGeometry = function (object) {\n    var nodeName = object.nodeName;\n    var geometryUpdater = this.runtime.geometryUpdaterFactory[nodeName];\n    if (geometryUpdater) {\n      var geometry_1 = object.geometry;\n      if (!geometry_1.contentBounds) {\n        geometry_1.contentBounds = new AABB();\n      }\n      if (!geometry_1.renderBounds) {\n        geometry_1.renderBounds = new AABB();\n      }\n      var parsedStyle = object.parsedStyle;\n      var _a = geometryUpdater.update(parsedStyle, object),\n        width = _a.width,\n        height = _a.height,\n        _b = _a.depth,\n        depth = _b === void 0 ? 0 : _b,\n        _c = _a.offsetX,\n        offsetX = _c === void 0 ? 0 : _c,\n        _d = _a.offsetY,\n        offsetY = _d === void 0 ? 0 : _d,\n        _e = _a.offsetZ,\n        offsetZ = _e === void 0 ? 0 : _e;\n      // init with content box\n      var halfExtents = [Math.abs(width) / 2, Math.abs(height) / 2, depth / 2];\n      // const halfExtents = vec3.set(\n      //   tmpVec3a,\n      //   Math.abs(width) / 2,\n      //   Math.abs(height) / 2,\n      //   depth / 2,\n      // );\n      // anchor is center by default, don't account for lineWidth here\n      var _f = parsedStyle,\n        stroke = _f.stroke,\n        lineWidth = _f.lineWidth,\n        // lineCap,\n        // lineJoin,\n        // miterLimit,\n        increasedLineWidthForHitTesting = _f.increasedLineWidthForHitTesting,\n        shadowType = _f.shadowType,\n        shadowColor = _f.shadowColor,\n        _g = _f.filter,\n        filter = _g === void 0 ? [] : _g,\n        transformOrigin = _f.transformOrigin;\n      var anchor = parsedStyle.anchor;\n      // <Text> use textAlign & textBaseline instead of anchor\n      if (nodeName === Shape.TEXT) {\n        delete parsedStyle.anchor;\n      } else if (nodeName === Shape.MESH) {\n        parsedStyle.anchor[2] = 0.5;\n      }\n      var center = [(1 - (anchor && anchor[0] || 0) * 2) * width / 2 + offsetX, (1 - (anchor && anchor[1] || 0) * 2) * height / 2 + offsetY, (1 - (anchor && anchor[2] || 0) * 2) * halfExtents[2] + offsetZ];\n      // const center = vec3.set(\n      //   tmpVec3b,\n      //   ((1 - ((anchor && anchor[0]) || 0) * 2) * width) / 2 + offsetX,\n      //   ((1 - ((anchor && anchor[1]) || 0) * 2) * height) / 2 + offsetY,\n      //   (1 - ((anchor && anchor[2]) || 0) * 2) * halfExtents[2] + offsetZ,\n      // );\n      // update geometry's AABB\n      geometry_1.contentBounds.update(center, halfExtents);\n      // @see https://github.molgen.mpg.de/git-mirror/cairo/blob/master/src/cairo-stroke-style.c#L97..L128\n      var expansion = nodeName === Shape.POLYLINE || nodeName === Shape.POLYGON || nodeName === Shape.PATH ? Math.SQRT2 : 0.5;\n      // if (lineCap?.value === 'square') {\n      //   expansion = Math.SQRT1_2;\n      // }\n      // if (lineJoin?.value === 'miter' && expansion < Math.SQRT2 * miterLimit) {\n      //   expansion = Math.SQRT1_2 * miterLimit;\n      // }\n      // append border only if stroke existed\n      var hasStroke = stroke && !stroke.isNone;\n      if (hasStroke) {\n        var halfLineWidth = ((lineWidth || 0) + (increasedLineWidthForHitTesting || 0)) * expansion;\n        // halfExtents[0] += halfLineWidth[0];\n        // halfExtents[1] += halfLineWidth[1];\n        halfExtents[0] += halfLineWidth;\n        halfExtents[1] += halfLineWidth;\n        // vec3.add(\n        //   halfExtents,\n        //   halfExtents,\n        //   vec3.set(tmpVec3c, halfLineWidth, halfLineWidth, 0),\n        // );\n      }\n      geometry_1.renderBounds.update(center, halfExtents);\n      // account for shadow, only support constant value now\n      if (shadowColor && shadowType && shadowType !== 'inner') {\n        var _h = geometry_1.renderBounds,\n          min = _h.min,\n          max = _h.max;\n        var _j = parsedStyle,\n          shadowBlur = _j.shadowBlur,\n          shadowOffsetX = _j.shadowOffsetX,\n          shadowOffsetY = _j.shadowOffsetY;\n        var shadowBlurInPixels = shadowBlur || 0;\n        var shadowOffsetXInPixels = shadowOffsetX || 0;\n        var shadowOffsetYInPixels = shadowOffsetY || 0;\n        var shadowLeft = min[0] - shadowBlurInPixels + shadowOffsetXInPixels;\n        var shadowRight = max[0] + shadowBlurInPixels + shadowOffsetXInPixels;\n        var shadowTop = min[1] - shadowBlurInPixels + shadowOffsetYInPixels;\n        var shadowBottom = max[1] + shadowBlurInPixels + shadowOffsetYInPixels;\n        min[0] = Math.min(min[0], shadowLeft);\n        max[0] = Math.max(max[0], shadowRight);\n        min[1] = Math.min(min[1], shadowTop);\n        max[1] = Math.max(max[1], shadowBottom);\n        geometry_1.renderBounds.setMinMax(min, max);\n      }\n      // account for filter, eg. blur(5px), drop-shadow()\n      filter.forEach(function (_a) {\n        var name = _a.name,\n          params = _a.params;\n        if (name === 'blur') {\n          var blurRadius = params[0].value;\n          geometry_1.renderBounds.update(geometry_1.renderBounds.center, addVec3(geometry_1.renderBounds.halfExtents, geometry_1.renderBounds.halfExtents, [blurRadius, blurRadius, 0]));\n        } else if (name === 'drop-shadow') {\n          var shadowOffsetX = params[0].value;\n          var shadowOffsetY = params[1].value;\n          var shadowBlur = params[2].value;\n          var _b = geometry_1.renderBounds,\n            min = _b.min,\n            max = _b.max;\n          var shadowLeft = min[0] - shadowBlur + shadowOffsetX;\n          var shadowRight = max[0] + shadowBlur + shadowOffsetX;\n          var shadowTop = min[1] - shadowBlur + shadowOffsetY;\n          var shadowBottom = max[1] + shadowBlur + shadowOffsetY;\n          min[0] = Math.min(min[0], shadowLeft);\n          max[0] = Math.max(max[0], shadowRight);\n          min[1] = Math.min(min[1], shadowTop);\n          max[1] = Math.max(max[1], shadowBottom);\n          geometry_1.renderBounds.setMinMax(min, max);\n        }\n      });\n      anchor = parsedStyle.anchor;\n      // if (nodeName === Shape.RECT) {\n      // account for negative width / height of Rect\n      // @see https://github.com/antvis/g/issues/957\n      var flipY = width < 0;\n      var flipX = height < 0;\n      // } else {\n      // }\n      // set transform origin\n      var usedOriginXValue = (flipY ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[0], 0, object) : 0);\n      var usedOriginYValue = (flipX ? -1 : 1) * (transformOrigin ? convertPercentUnit(transformOrigin[1], 1, object) : 0);\n      usedOriginXValue = usedOriginXValue - (flipY ? -1 : 1) * (anchor && anchor[0] || 0) * geometry_1.contentBounds.halfExtents[0] * 2;\n      usedOriginYValue = usedOriginYValue - (flipX ? -1 : 1) * (anchor && anchor[1] || 0) * geometry_1.contentBounds.halfExtents[1] * 2;\n      object.setOrigin(usedOriginXValue, usedOriginYValue);\n      // FIXME setOrigin may have already dirtified to root.\n      this.runtime.sceneGraphService.dirtifyToRoot(object);\n    }\n  };\n  DefaultStyleValueRegistry.prototype.updateSizeAttenuation = function (node, zoom) {\n    if (node.style.isSizeAttenuation) {\n      if (!node.style.rawLineWidth) {\n        node.style.rawLineWidth = node.style.lineWidth;\n      }\n      node.style.lineWidth = node.style.rawLineWidth / zoom;\n      if (node.nodeName === Shape.CIRCLE) {\n        if (!node.style.rawR) {\n          node.style.rawR = node.style.r;\n        }\n        node.style.r = node.style.rawR / zoom;\n      }\n    } else {\n      if (node.style.rawLineWidth) {\n        node.style.lineWidth = node.style.rawLineWidth;\n        delete node.style.rawLineWidth;\n      }\n      if (node.nodeName === Shape.CIRCLE) {\n        if (node.style.rawR) {\n          node.style.r = node.style.rawR;\n          delete node.style.rawR;\n        }\n      }\n    }\n  };\n  DefaultStyleValueRegistry.prototype.isPropertyInheritable = function (name) {\n    var metadata = propertyMetadataCache[name];\n    if (!metadata) {\n      return false;\n    }\n    return metadata.inh;\n  };\n  return DefaultStyleValueRegistry;\n}();\nvar CSSPropertyAngle = /** @class */function () {\n  function CSSPropertyAngle() {\n    this.parser = parseAngle;\n    this.parserUnmemoize = parseAngleUnmemoize;\n    this.parserWithCSSDisabled = null;\n    this.mixer = mergeNumbers;\n  }\n  CSSPropertyAngle.prototype.calculator = function (name, oldParsed, parsed, object) {\n    return convertAngleUnit(parsed);\n  };\n  return CSSPropertyAngle;\n}();\n\n/**\n * clipPath / textPath / offsetPath\n */\nvar CSSPropertyClipPath = /** @class */function () {\n  function CSSPropertyClipPath() {}\n  CSSPropertyClipPath.prototype.calculator = function (name, oldPath, newPath, object, runtime) {\n    // unset\n    if (newPath instanceof CSSKeywordValue) {\n      newPath = null;\n    }\n    runtime.sceneGraphService.updateDisplayObjectDependency(name, oldPath, newPath, object);\n    if (name === 'clipPath') {\n      // should affect children\n      object.forEach(function (leaf) {\n        if (leaf.childNodes.length === 0) {\n          runtime.sceneGraphService.dirtifyToRoot(leaf);\n        }\n      });\n    }\n    return newPath;\n  };\n  return CSSPropertyClipPath;\n}();\nvar CSSPropertyColor = /** @class */function () {\n  function CSSPropertyColor() {\n    this.parser = parseColor;\n    this.parserWithCSSDisabled = parseColor;\n    this.mixer = mergeColors;\n  }\n  CSSPropertyColor.prototype.calculator = function (name, oldParsed, parsed, object) {\n    if (parsed instanceof CSSKeywordValue) {\n      // 'unset' 'none'\n      return parsed.value === 'none' ? noneColor : transparentColor;\n    }\n    return parsed;\n  };\n  return CSSPropertyColor;\n}();\nvar CSSPropertyFilter = /** @class */function () {\n  function CSSPropertyFilter() {\n    this.parser = parseFilter;\n  }\n  CSSPropertyFilter.prototype.calculator = function (name, oldParsed, parsed) {\n    // unset or none\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  };\n  return CSSPropertyFilter;\n}();\nfunction getFontSize(object) {\n  var fontSize = object.parsedStyle.fontSize;\n  return isNil(fontSize) ? null : fontSize;\n}\n/**\n * <length> & <percentage>\n */\nvar CSSPropertyLengthOrPercentage = /** @class */function () {\n  function CSSPropertyLengthOrPercentage() {\n    this.parser = parseLengthOrPercentage;\n    this.parserUnmemoize = parseLengthOrPercentageUnmemoize;\n    this.parserWithCSSDisabled = null;\n    this.mixer = mergeNumbers;\n  }\n  /**\n   * according to parent's bounds\n   *\n   * @example\n   * CSS.percent(50) -> CSS.px(0.5 * parent.width)\n   */\n  CSSPropertyLengthOrPercentage.prototype.calculator = function (name, oldParsed, computed, object, runtime) {\n    var _a;\n    if (isNumber(computed)) {\n      return computed;\n    }\n    if (CSSUnitValue.isRelativeUnit(computed.unit)) {\n      var registry = runtime.styleValueRegistry;\n      if (computed.unit === UnitType.kPercentage) {\n        // TODO: merge dimensions\n        return 0;\n      } else if (computed.unit === UnitType.kEms) {\n        if (object.parentNode) {\n          var fontSize = getFontSize(object.parentNode);\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          } else {\n            registry.addUnresolveProperty(object, name);\n          }\n        } else {\n          registry.addUnresolveProperty(object, name);\n        }\n        return 0;\n      } else if (computed.unit === UnitType.kRems) {\n        if ((_a = object === null || object === void 0 ? void 0 : object.ownerDocument) === null || _a === void 0 ? void 0 : _a.documentElement) {\n          var fontSize = getFontSize(object.ownerDocument.documentElement);\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          } else {\n            registry.addUnresolveProperty(object, name);\n          }\n        } else {\n          registry.addUnresolveProperty(object, name);\n        }\n        return 0;\n      }\n    } else {\n      // remove listener if exists\n      // registry.unregisterParentGeometryBoundsChangedHandler(object, name);\n      // return absolute value\n      return computed.value;\n    }\n  };\n  return CSSPropertyLengthOrPercentage;\n}();\n\n/**\n * format to Tuple2<CSSUnitValue>\n *\n * @example\n * rect.style.lineDash = 10;\n * rect.style.lineDash = [10, 10];\n * rect.style.lineDash = '10 10';\n */\nvar CSSPropertyLengthOrPercentage12 = /** @class */function () {\n  function CSSPropertyLengthOrPercentage12() {\n    this.mixer = mergeNumberLists;\n  }\n  CSSPropertyLengthOrPercentage12.prototype.parser = function (radius) {\n    var parsed = parseDimensionArray(isNumber(radius) ? [radius] : radius);\n    var formatted;\n    if (parsed.length === 1) {\n      formatted = [parsed[0], parsed[0]];\n    } else {\n      formatted = [parsed[0], parsed[1]];\n    }\n    return formatted;\n  };\n  CSSPropertyLengthOrPercentage12.prototype.calculator = function (name, oldParsed, computed) {\n    return computed.map(function (c) {\n      return c.value;\n    });\n  };\n  return CSSPropertyLengthOrPercentage12;\n}();\n\n/**\n * used in rounded rect\n *\n * @example\n * rect.style.radius = 10;\n * rect.style.radius = '10 10';\n * rect.style.radius = '10 10 10 10';\n */\nvar CSSPropertyLengthOrPercentage14 = /** @class */function () {\n  function CSSPropertyLengthOrPercentage14() {\n    this.mixer = mergeNumberLists;\n  }\n  CSSPropertyLengthOrPercentage14.prototype.parser = function (radius) {\n    var parsed = parseDimensionArray(isNumber(radius) ? [radius] : radius);\n    var formatted;\n    // format to Tuple<CSSUnitValue>\n    if (parsed.length === 1) {\n      formatted = [parsed[0], parsed[0], parsed[0], parsed[0]];\n    } else if (parsed.length === 2) {\n      formatted = [parsed[0], parsed[1], parsed[0], parsed[1]];\n    } else if (parsed.length === 3) {\n      formatted = [parsed[0], parsed[1], parsed[2], parsed[1]];\n    } else {\n      formatted = [parsed[0], parsed[1], parsed[2], parsed[3]];\n    }\n    return formatted;\n  };\n  CSSPropertyLengthOrPercentage14.prototype.calculator = function (name, oldParsed, computed) {\n    return computed.map(function (c) {\n      return c.value;\n    });\n  };\n  return CSSPropertyLengthOrPercentage14;\n}();\nvar tmpMat4 = mat4.create();\nfunction parsedTransformToMat4(transform, object) {\n  var defX = object.parsedStyle.defX || 0;\n  var defY = object.parsedStyle.defY || 0;\n  // reset transform\n  object.resetLocalTransform();\n  object.setLocalPosition(defX, defY);\n  transform.forEach(function (parsed) {\n    var t = parsed.t,\n      d = parsed.d;\n    if (t === 'scale') {\n      // scale(1) scale(1, 1)\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1, 1];\n      object.scaleLocal(newScale[0], newScale[1], 1);\n    } else if (t === 'scalex') {\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1];\n      object.scaleLocal(newScale[0], 1, 1);\n    } else if (t === 'scaley') {\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1];\n      object.scaleLocal(1, newScale[0], 1);\n    } else if (t === 'scalez') {\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1];\n      object.scaleLocal(1, 1, newScale[0]);\n    } else if (t === 'scale3d') {\n      var newScale = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [1, 1, 1];\n      object.scaleLocal(newScale[0], newScale[1], newScale[2]);\n    } else if (t === 'translate') {\n      var newTranslation = d || [Opx, Opx];\n      object.translateLocal(newTranslation[0].value, newTranslation[1].value, 0);\n    } else if (t === 'translatex') {\n      var newTranslation = d || [Opx];\n      object.translateLocal(newTranslation[0].value, 0, 0);\n    } else if (t === 'translatey') {\n      var newTranslation = d || [Opx];\n      object.translateLocal(0, newTranslation[0].value, 0);\n    } else if (t === 'translatez') {\n      var newTranslation = d || [Opx];\n      object.translateLocal(0, 0, newTranslation[0].value);\n    } else if (t === 'translate3d') {\n      var newTranslation = d || [Opx, Opx, Opx];\n      object.translateLocal(newTranslation[0].value, newTranslation[1].value, newTranslation[2].value);\n    } else if (t === 'rotate') {\n      var newAngles = d || [Odeg];\n      object.rotateLocal(0, 0, convertAngleUnit(newAngles[0]));\n    } else if (t === 'rotatex') {\n      var newAngles = d || [Odeg];\n      object.rotateLocal(convertAngleUnit(newAngles[0]), 0, 0);\n    } else if (t === 'rotatey') {\n      var newAngles = d || [Odeg];\n      object.rotateLocal(0, convertAngleUnit(newAngles[0]), 0);\n    } else if (t === 'rotatez') {\n      var newAngles = d || [Odeg];\n      object.rotateLocal(0, 0, convertAngleUnit(newAngles[0]));\n    } else if (t === 'rotate3d') ;else if (t === 'skew') {\n      var newSkew = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0, 0];\n      object.setLocalSkew(deg2rad(newSkew[0]), deg2rad(newSkew[1]));\n    } else if (t === 'skewx') {\n      var newSkew = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0];\n      object.setLocalSkew(deg2rad(newSkew[0]), object.getLocalSkew()[1]);\n    } else if (t === 'skewy') {\n      var newSkew = (d === null || d === void 0 ? void 0 : d.map(function (s) {\n        return s.value;\n      })) || [0];\n      object.setLocalSkew(object.getLocalSkew()[0], deg2rad(newSkew[0]));\n    } else if (t === 'matrix') {\n      var _a = __read(d.map(function (s) {\n          return s.value;\n        }), 6),\n        a = _a[0],\n        b = _a[1],\n        c = _a[2],\n        dd = _a[3],\n        tx = _a[4],\n        ty = _a[5];\n      object.setLocalTransform(mat4.set(tmpMat4, a, b, 0, 0, c, dd, 0, 0, 0, 0, 1, 0, tx + defX, ty + defY, 0, 1));\n    } else if (t === 'matrix3d') {\n      // @ts-ignore\n      mat4.set.apply(mat4, __spreadArray([tmpMat4], __read(d.map(function (s) {\n        return s.value;\n      })), false));\n      tmpMat4[12] += defX;\n      tmpMat4[13] += defY;\n      object.setLocalTransform(tmpMat4);\n    }\n  });\n  return object.getLocalTransform();\n}\n\n/**\n * local position\n */\nvar CSSPropertyLocalPosition = /** @class */function (_super) {\n  __extends(CSSPropertyLocalPosition, _super);\n  function CSSPropertyLocalPosition() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * update local position\n   */\n  CSSPropertyLocalPosition.prototype.postProcessor = function (object, attributes) {\n    var x;\n    var y;\n    var z;\n    switch (object.nodeName) {\n      case Shape.CIRCLE:\n      case Shape.ELLIPSE:\n        var _a = object.parsedStyle,\n          cx = _a.cx,\n          cy = _a.cy,\n          cz = _a.cz;\n        if (!isNil(cx)) {\n          x = cx;\n        }\n        if (!isNil(cy)) {\n          y = cy;\n        }\n        if (!isNil(cz)) {\n          z = cz;\n        }\n        break;\n      case Shape.LINE:\n        var _b = object.parsedStyle,\n          x1 = _b.x1,\n          x2 = _b.x2,\n          y1 = _b.y1,\n          y2 = _b.y2;\n        var minX = Math.min(x1, x2);\n        var minY = Math.min(y1, y2);\n        x = minX;\n        y = minY;\n        z = 0;\n        break;\n      case Shape.RECT:\n      case Shape.IMAGE:\n      case Shape.GROUP:\n      case Shape.HTML:\n      case Shape.TEXT:\n      case Shape.MESH:\n        if (!isNil(object.parsedStyle.x)) {\n          x = object.parsedStyle.x;\n        }\n        if (!isNil(object.parsedStyle.y)) {\n          y = object.parsedStyle.y;\n        }\n        if (!isNil(object.parsedStyle.z)) {\n          z = object.parsedStyle.z;\n        }\n        break;\n    }\n    if (object.nodeName !== Shape.PATH && object.nodeName !== Shape.POLYLINE && object.nodeName !== Shape.POLYGON) {\n      object.parsedStyle.defX = x || 0;\n      object.parsedStyle.defY = y || 0;\n    }\n    var needResetLocalPosition = !isNil(x) || !isNil(y) || !isNil(z);\n    // only if `transform` won't be processed later\n    if (needResetLocalPosition && attributes.indexOf('transform') === -1) {\n      // account for current transform if needed\n      var transform = object.parsedStyle.transform;\n      if (transform && transform.length) {\n        parsedTransformToMat4(transform, object);\n      } else {\n        var _c = __read(object.getLocalPosition(), 3),\n          ox = _c[0],\n          oy = _c[1],\n          oz = _c[2];\n        object.setLocalPosition(isNil(x) ? ox : x, isNil(y) ? oy : y, isNil(z) ? oz : z);\n      }\n    }\n  };\n  return CSSPropertyLocalPosition;\n}(CSSPropertyLengthOrPercentage);\nvar CSSPropertyMarker = /** @class */function () {\n  function CSSPropertyMarker() {}\n  CSSPropertyMarker.prototype.calculator = function (name, oldMarker, newMarker, object) {\n    // unset\n    if (newMarker instanceof CSSKeywordValue) {\n      newMarker = null;\n    }\n    var cloned = newMarker === null || newMarker === void 0 ? void 0 : newMarker.cloneNode(true);\n    if (cloned) {\n      // FIXME: SVG should not inherit parent's style, add a flag here\n      cloned.style.isMarker = true;\n    }\n    return cloned;\n  };\n  return CSSPropertyMarker;\n}();\nvar CSSPropertyNumber = /** @class */function () {\n  function CSSPropertyNumber() {\n    this.mixer = mergeNumbers;\n    this.parser = parseNumber;\n    this.parserUnmemoize = parseNumberUnmemoize;\n    this.parserWithCSSDisabled = null;\n  }\n  CSSPropertyNumber.prototype.calculator = function (name, oldParsed, computed) {\n    return computed.value;\n  };\n  return CSSPropertyNumber;\n}();\nvar CSSPropertyOffsetDistance = /** @class */function () {\n  function CSSPropertyOffsetDistance() {\n    this.parser = parseNumber;\n    this.parserUnmemoize = parseNumberUnmemoize;\n    this.parserWithCSSDisabled = null;\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  CSSPropertyOffsetDistance.prototype.calculator = function (name, oldParsed, computed) {\n    return computed.value;\n  };\n  CSSPropertyOffsetDistance.prototype.postProcessor = function (object) {\n    var _a = object.parsedStyle,\n      offsetPath = _a.offsetPath,\n      offsetDistance = _a.offsetDistance;\n    if (!offsetPath) {\n      return;\n    }\n    var nodeName = offsetPath.nodeName;\n    if (nodeName === Shape.LINE || nodeName === Shape.PATH || nodeName === Shape.POLYLINE) {\n      // set position in world space\n      var point = offsetPath.getPoint(offsetDistance);\n      if (point) {\n        object.parsedStyle.defX = point.x;\n        object.parsedStyle.defY = point.y;\n        object.setLocalPosition(point.x, point.y);\n      }\n    }\n  };\n  return CSSPropertyOffsetDistance;\n}();\n\n/**\n * opacity\n */\nvar CSSPropertyOpacity = /** @class */function () {\n  function CSSPropertyOpacity() {\n    this.parser = parseNumber;\n    this.parserUnmemoize = parseNumberUnmemoize;\n    this.parserWithCSSDisabled = null;\n    this.mixer = clampedMergeNumbers(0, 1);\n  }\n  CSSPropertyOpacity.prototype.calculator = function (name, oldParsed, computed) {\n    return computed.value;\n  };\n  return CSSPropertyOpacity;\n}();\nvar CSSPropertyPath = /** @class */function () {\n  function CSSPropertyPath() {\n    /**\n     * path2Curve\n     */\n    this.parser = parsePath;\n    this.parserWithCSSDisabled = parsePath;\n    this.mixer = mergePaths;\n  }\n  CSSPropertyPath.prototype.calculator = function (name, oldParsed, parsed) {\n    // unset\n    if (parsed instanceof CSSKeywordValue && parsed.value === 'unset') {\n      return {\n        absolutePath: [],\n        hasArc: false,\n        segments: [],\n        polygons: [],\n        polylines: [],\n        curve: null,\n        totalLength: 0,\n        rect: new Rectangle(0, 0, 0, 0)\n      };\n    }\n    return parsed;\n  };\n  /**\n   * update local position\n   */\n  CSSPropertyPath.prototype.postProcessor = function (object, attributes) {\n    object.parsedStyle.defX = object.parsedStyle.path.rect.x;\n    object.parsedStyle.defY = object.parsedStyle.path.rect.y;\n    if (object.nodeName === Shape.PATH && attributes.indexOf('transform') === -1) {\n      var _a = object.parsedStyle,\n        _b = _a.defX,\n        defX = _b === void 0 ? 0 : _b,\n        _c = _a.defY,\n        defY = _c === void 0 ? 0 : _c;\n      object.setLocalPosition(defX, defY);\n    }\n  };\n  return CSSPropertyPath;\n}();\nvar CSSPropertyPoints = /** @class */function () {\n  function CSSPropertyPoints() {\n    this.parser = parsePoints;\n    this.mixer = mergePoints;\n  }\n  /**\n   * update local position\n   */\n  CSSPropertyPoints.prototype.postProcessor = function (object, attributes) {\n    if ((object.nodeName === Shape.POLYGON || object.nodeName === Shape.POLYLINE) && attributes.indexOf('transform') === -1) {\n      var _a = object.parsedStyle,\n        defX = _a.defX,\n        defY = _a.defY;\n      object.setLocalPosition(defX, defY);\n    }\n  };\n  return CSSPropertyPoints;\n}();\nvar CSSPropertyShadowBlur = /** @class */function (_super) {\n  __extends(CSSPropertyShadowBlur, _super);\n  function CSSPropertyShadowBlur() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this.mixer = clampedMergeNumbers(0, Infinity);\n    return _this;\n  }\n  return CSSPropertyShadowBlur;\n}(CSSPropertyLengthOrPercentage);\nvar CSSPropertyText = /** @class */function () {\n  function CSSPropertyText() {}\n  CSSPropertyText.prototype.calculator = function (name, oldParsed, parsed, object) {\n    if (parsed instanceof CSSKeywordValue) {\n      if (parsed.value === 'unset') {\n        return '';\n      } else {\n        return parsed.value;\n      }\n    }\n    // allow number as valid text content\n    return \"\".concat(parsed);\n  };\n  CSSPropertyText.prototype.postProcessor = function (object) {\n    object.nodeValue = \"\".concat(object.parsedStyle.text) || '';\n  };\n  return CSSPropertyText;\n}();\n\n/**\n * it must transform after text get parsed\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n */\nvar CSSPropertyTextTransform = /** @class */function () {\n  function CSSPropertyTextTransform() {}\n  CSSPropertyTextTransform.prototype.calculator = function (name, oldParsed, parsed, object) {\n    var rawText = object.getAttribute('text');\n    if (rawText) {\n      var transformedText = rawText;\n      if (parsed.value === 'capitalize') {\n        transformedText = rawText.charAt(0).toUpperCase() + rawText.slice(1);\n      } else if (parsed.value === 'lowercase') {\n        transformedText = rawText.toLowerCase();\n      } else if (parsed.value === 'uppercase') {\n        transformedText = rawText.toUpperCase();\n      }\n      object.parsedStyle.text = transformedText;\n    }\n    return parsed.value;\n  };\n  return CSSPropertyTextTransform;\n}();\nvar canvasMap = {};\nvar defaultCanvasIdCounter = 0;\n/**\n * destroy existed canvas with the same id\n */\nfunction cleanExistedCanvas(container, canvas) {\n  if (container) {\n    var id = typeof container === 'string' ? container : container.id || defaultCanvasIdCounter++;\n    if (canvasMap[id]) {\n      canvasMap[id].destroy();\n    }\n    canvasMap[id] = canvas;\n  }\n}\nvar isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nfunction isElement(target) {\n  return !!target.getAttribute;\n}\nfunction sortedIndex(array, value) {\n  var low = 0;\n  var high = array.length;\n  while (low < high) {\n    var mid = low + high >>> 1;\n    if (sortByZIndex(array[mid], value) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\nfunction sortByZIndex(o1, o2) {\n  var zIndex1 = Number(o1.parsedStyle.zIndex);\n  var zIndex2 = Number(o2.parsedStyle.zIndex);\n  if (zIndex1 === zIndex2) {\n    var parent_1 = o1.parentNode;\n    if (parent_1) {\n      var children = parent_1.childNodes || [];\n      return children.indexOf(o1) - children.indexOf(o2);\n    }\n  }\n  return zIndex1 - zIndex2;\n}\nfunction findClosestClipPathTarget(object) {\n  var _a;\n  var el = object;\n  do {\n    var clipPath = (_a = el.parsedStyle) === null || _a === void 0 ? void 0 : _a.clipPath;\n    if (clipPath) return el;\n    el = el.parentElement;\n  } while (el !== null);\n  return null;\n}\nvar PX_SUFFIX = 'px';\nfunction setDOMSize($el, width, height) {\n  if (isBrowser && $el.style) {\n    $el.style.width = width + PX_SUFFIX;\n    $el.style.height = height + PX_SUFFIX;\n  }\n}\nfunction getStyle($el, property) {\n  if (isBrowser) {\n    return document.defaultView.getComputedStyle($el, null).getPropertyValue(property);\n  }\n}\nfunction getWidth($el) {\n  var width = getStyle($el, 'width');\n  if (width === 'auto') {\n    return $el.offsetWidth;\n  }\n  return parseFloat(width);\n}\nfunction getHeight($el) {\n  var height = getStyle($el, 'height');\n  if (height === 'auto') {\n    return $el.offsetHeight;\n  }\n  return parseFloat(height);\n}\n\n// borrow from hammer.js\nvar MOUSE_POINTER_ID = 1;\nvar TOUCH_TO_POINTER = {\n  touchstart: 'pointerdown',\n  touchend: 'pointerup',\n  touchendoutside: 'pointerupoutside',\n  touchmove: 'pointermove',\n  touchcancel: 'pointercancel'\n};\nvar clock = typeof performance === 'object' && performance.now ? performance : Date;\nfunction isFillOrStrokeAffected(pointerEvents, fill, stroke) {\n  // account for pointerEvents\n  // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n  var hasFill = false;\n  var hasStroke = false;\n  var isFillOtherThanNone = !!fill && !fill.isNone;\n  var isStrokeOtherThanNone = !!stroke && !stroke.isNone;\n  if (pointerEvents === 'visiblepainted' || pointerEvents === 'painted' || pointerEvents === 'auto') {\n    hasFill = isFillOtherThanNone;\n    hasStroke = isStrokeOtherThanNone;\n  } else if (pointerEvents === 'visiblefill' || pointerEvents === 'fill') {\n    hasFill = true;\n  } else if (pointerEvents === 'visiblestroke' || pointerEvents === 'stroke') {\n    hasStroke = true;\n  } else if (pointerEvents === 'visible' || pointerEvents === 'all') {\n    // The values of the fill and stroke do not affect event processing.\n    hasFill = true;\n    hasStroke = true;\n  }\n  return [hasFill, hasStroke];\n}\n\n/**\n * Thanks for following contributor of codes\n * https://gist.github.com/1866474\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/requestAnimationFrame/polyfill.js\n **/\nvar uId = 1;\nvar uniqueId = function () {\n  return uId++;\n};\n// We use `self` instead of `window` for `WebWorker` support.\nvar root = typeof self === 'object' && self.self == self ? self :\n// @ts-ignore\ntypeof global === 'object' && global.global == global ?\n// @ts-ignore\nglobal : {};\nvar nowOffset = Date.now();\n// use performance api if exist, otherwise use Date.now.\n// Date.now polyfill required.\nvar pnow = function () {\n  if (root.performance && typeof root.performance.now === 'function') {\n    return root.performance.now();\n  }\n  // fallback\n  return Date.now() - nowOffset;\n};\nvar reservedCBs = {};\nvar lastTime = Date.now();\nvar polyfillRaf = function (callback) {\n  if (typeof callback !== 'function') {\n    throw new TypeError(callback + ' is not a function');\n  }\n  var currentTime = Date.now();\n  var gap = currentTime - lastTime;\n  var delay = gap > 16 ? 0 : 16 - gap;\n  var id = uniqueId();\n  reservedCBs[id] = callback;\n  // keys(reservedCBs).length > 1 의미는 이미 setTimeout 이 걸려있는 경우.\n  // 함께 callback 이 실행될 수 있게 reservedCBs 에만 추가해주고 return\n  if (Object.keys(reservedCBs).length > 1) return id;\n  setTimeout(function () {\n    lastTime = currentTime;\n    var copied = reservedCBs;\n    reservedCBs = {};\n    Object.keys(copied).forEach(function (key) {\n      return copied[key](pnow());\n    });\n  }, delay);\n  return id;\n};\nvar polyfillCaf = function (id) {\n  delete reservedCBs[id];\n};\nvar vendorPrefixes = ['', 'webkit', 'moz', 'ms', 'o'];\nvar getRequestAnimationFrame = function (vp) {\n  if (typeof vp !== 'string') return polyfillRaf;\n  if (vp === '') return root['requestAnimationFrame'];\n  return root[vp + 'RequestAnimationFrame'];\n};\nvar getCancelAnimationFrame = function (vp) {\n  if (typeof vp !== 'string') return polyfillCaf;\n  if (vp === '') return root['cancelAnimationFrame'];\n  return root[vp + 'CancelAnimationFrame'] || root[vp + 'CancelRequestAnimationFrame'];\n};\nvar find = function (arr, predicate) {\n  var i = 0;\n  while (arr[i] !== void 0) {\n    if (predicate(arr[i])) return arr[i];\n    i = i + 1;\n  }\n};\nvar vp = find(vendorPrefixes, function (vp) {\n  return !!getRequestAnimationFrame(vp);\n});\nvar raf = getRequestAnimationFrame(vp);\nvar caf = getCancelAnimationFrame(vp);\nroot.requestAnimationFrame = raf;\nroot.cancelAnimationFrame = caf;\nvar AsyncParallelHook = /** @class */function () {\n  function AsyncParallelHook() {\n    this.callbacks = [];\n  }\n  AsyncParallelHook.prototype.getCallbacksNum = function () {\n    return this.callbacks.length;\n  };\n  AsyncParallelHook.prototype.tapPromise = function (options, fn) {\n    this.callbacks.push(fn);\n  };\n  AsyncParallelHook.prototype.promise = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return Promise.all(this.callbacks.map(function (callback) {\n      return callback.apply(void 0, __spreadArray([], __read(args), false));\n    }));\n  };\n  return AsyncParallelHook;\n}();\nvar AsyncSeriesWaterfallHook = /** @class */function () {\n  function AsyncSeriesWaterfallHook() {\n    this.callbacks = [];\n  }\n  AsyncSeriesWaterfallHook.prototype.tapPromise = function (options, fn) {\n    this.callbacks.push(fn);\n  };\n  AsyncSeriesWaterfallHook.prototype.promise = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return __awaiter(this, void 0, void 0, function () {\n      var result, i, callback;\n      var _a;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!this.callbacks.length) return [3 /*break*/, 6];\n            return [4 /*yield*/, (_a = this.callbacks)[0].apply(_a, __spreadArray([], __read(args), false))];\n          case 1:\n            result = _b.sent();\n            i = 0;\n            _b.label = 2;\n          case 2:\n            if (!(i < this.callbacks.length - 1)) return [3 /*break*/, 5];\n            callback = this.callbacks[i];\n            return [4 /*yield*/, callback(result)];\n          case 3:\n            // @ts-ignore\n            result = _b.sent();\n            _b.label = 4;\n          case 4:\n            i++;\n            return [3 /*break*/, 2];\n          case 5:\n            return [2 /*return*/, result];\n          case 6:\n            return [2 /*return*/, null];\n        }\n      });\n    });\n  };\n  return AsyncSeriesWaterfallHook;\n}();\nvar SyncHook = /** @class */function () {\n  function SyncHook() {\n    this.callbacks = [];\n  }\n  SyncHook.prototype.tap = function (options, fn) {\n    this.callbacks.push(fn);\n  };\n  SyncHook.prototype.call = function () {\n    /* eslint-disable-next-line prefer-rest-params */\n    var argsArr = arguments;\n    this.callbacks.forEach(function (callback) {\n      /* eslint-disable-next-line prefer-spread */\n      callback.apply(void 0, argsArr);\n    });\n  };\n  return SyncHook;\n}();\nvar SyncWaterfallHook = /** @class */function () {\n  function SyncWaterfallHook() {\n    this.callbacks = [];\n  }\n  SyncWaterfallHook.prototype.tap = function (options, fn) {\n    this.callbacks.push(fn);\n  };\n  SyncWaterfallHook.prototype.call = function () {\n    if (this.callbacks.length) {\n      /* eslint-disable-next-line prefer-rest-params */\n      var argsArr = arguments;\n      /* eslint-disable-next-line prefer-spread */\n      var result = this.callbacks[0].apply(void 0, argsArr);\n      for (var i = 0; i < this.callbacks.length - 1; i++) {\n        var callback = this.callbacks[i];\n        // @ts-ignore\n        result = callback(result);\n      }\n      return result;\n    }\n    return null;\n  };\n  return SyncWaterfallHook;\n}();\nvar genericFontFamilies = ['serif', 'sans-serif', 'monospace', 'cursive', 'fantasy', 'system-ui'];\nvar stringRegExp = /([\\\"\\'])[^\\'\\\"]+\\1/;\nfunction toFontString(attributes) {\n  var fontSize = attributes.fontSize,\n    fontFamily = attributes.fontFamily,\n    fontStyle = attributes.fontStyle,\n    fontVariant = attributes.fontVariant,\n    fontWeight = attributes.fontWeight;\n  // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n  // const fontSizeString: string = isNumber(fontSize) ? `${fontSize}px` : fontSize.toString();\n  var fontSizeString = isNumber(fontSize) && \"\".concat(fontSize, \"px\") || '16px';\n  // Clean-up fontFamily property by quoting each font name\n  // this will support font names with spaces\n  var fontFamilies = fontFamily.split(',');\n  for (var i = fontFamilies.length - 1; i >= 0; i--) {\n    // Trim any extra white-space\n    var fontFamily_1 = fontFamilies[i].trim();\n    // Check if font already contains strings\n    if (!stringRegExp.test(fontFamily_1) && genericFontFamilies.indexOf(fontFamily_1) < 0) {\n      fontFamily_1 = \"\\\"\".concat(fontFamily_1, \"\\\"\");\n    }\n    fontFamilies[i] = fontFamily_1;\n  }\n  return \"\".concat(fontStyle, \" \").concat(fontVariant, \" \").concat(fontWeight, \" \").concat(fontSizeString, \" \").concat(fontFamilies.join(','));\n}\n\n/**\n * @see /zh/docs/api/animation#支持变换的属性\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\nvar CSSPropertyTransform = /** @class */function () {\n  function CSSPropertyTransform() {\n    this.parser = parseTransform;\n    this.parserUnmemoize = parseTransformUnmemoize;\n    this.parserWithCSSDisabled = parseTransformUnmemoize;\n    this.mixer = mergeTransforms;\n  }\n  CSSPropertyTransform.prototype.calculator = function (name, oldParsed, parsed, object) {\n    // 'none'\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  };\n  CSSPropertyTransform.prototype.postProcessor = function (object) {\n    var transform = object.parsedStyle.transform;\n    parsedTransformToMat4(transform, object);\n  };\n  return CSSPropertyTransform;\n}();\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * @example\n * [10px, 10px] [10%, 10%]\n */\nvar CSSPropertyTransformOrigin = /** @class */function () {\n  function CSSPropertyTransformOrigin() {\n    this.parser = parseTransformOrigin;\n    this.parserUnmemoize = parseTransformOriginUnmemoize;\n    // calculator(\n    //   name: string,\n    //   oldParsed: [CSSUnitValue, CSSUnitValue],\n    //   parsed: [CSSUnitValue, CSSUnitValue],\n    //   object: DisplayObject,\n    // ): [number, number] {\n    //   console.log(object, parsed);\n    //   return [parsed[0].value, parsed[1].value];\n    //   // return [convertPercentUnit(parsed[0], 0, object), convertPercentUnit(parsed[1], 1, object)];\n    // }\n  }\n  return CSSPropertyTransformOrigin;\n}();\nvar CSSPropertyZIndex = /** @class */function () {\n  function CSSPropertyZIndex() {\n    this.parser = parseNumber;\n    this.parserUnmemoize = parseNumberUnmemoize;\n  }\n  CSSPropertyZIndex.prototype.calculator = function (name, oldParsed, computed, object) {\n    return computed.value;\n  };\n  CSSPropertyZIndex.prototype.postProcessor = function (object) {\n    if (object.parentNode) {\n      var parentEntity = object.parentNode;\n      var parentRenderable = parentEntity.renderable;\n      var parentSortable = parentEntity.sortable;\n      if (parentRenderable) {\n        parentRenderable.dirty = true;\n      }\n      // need re-sort on parent\n      if (parentSortable) {\n        parentSortable.dirty = true;\n        parentSortable.dirtyReason = SortReason.Z_INDEX_CHANGED;\n      }\n    }\n  };\n  return CSSPropertyZIndex;\n}();\nvar CircleUpdater = /** @class */function () {\n  function CircleUpdater() {}\n  CircleUpdater.prototype.update = function (parsedStyle, object) {\n    var r = parsedStyle.r;\n    var width = r * 2;\n    var height = r * 2;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  return CircleUpdater;\n}();\nvar EllipseUpdater = /** @class */function () {\n  function EllipseUpdater() {}\n  EllipseUpdater.prototype.update = function (parsedStyle, object) {\n    var rx = parsedStyle.rx,\n      ry = parsedStyle.ry;\n    var width = rx * 2;\n    var height = ry * 2;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  return EllipseUpdater;\n}();\nvar LineUpdater = /** @class */function () {\n  function LineUpdater() {}\n  LineUpdater.prototype.update = function (parsedStyle) {\n    var x1 = parsedStyle.x1,\n      y1 = parsedStyle.y1,\n      x2 = parsedStyle.x2,\n      y2 = parsedStyle.y2;\n    var minX = Math.min(x1, x2);\n    var maxX = Math.max(x1, x2);\n    var minY = Math.min(y1, y2);\n    var maxY = Math.max(y1, y2);\n    var width = maxX - minX;\n    var height = maxY - minY;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  return LineUpdater;\n}();\nvar PathUpdater = /** @class */function () {\n  function PathUpdater() {}\n  PathUpdater.prototype.update = function (parsedStyle) {\n    var path = parsedStyle.path;\n    var _a = path.rect,\n      width = _a.width,\n      height = _a.height;\n    return {\n      width: width,\n      height: height\n    };\n  };\n  return PathUpdater;\n}();\nvar PolylineUpdater = /** @class */function () {\n  function PolylineUpdater() {}\n  PolylineUpdater.prototype.update = function (parsedStyle) {\n    if (parsedStyle.points && isArray(parsedStyle.points.points)) {\n      var points = parsedStyle.points.points;\n      // FIXME: account for miter lineJoin\n      var minX = Math.min.apply(Math, __spreadArray([], __read(points.map(function (point) {\n        return point[0];\n      })), false));\n      var maxX = Math.max.apply(Math, __spreadArray([], __read(points.map(function (point) {\n        return point[0];\n      })), false));\n      var minY = Math.min.apply(Math, __spreadArray([], __read(points.map(function (point) {\n        return point[1];\n      })), false));\n      var maxY = Math.max.apply(Math, __spreadArray([], __read(points.map(function (point) {\n        return point[1];\n      })), false));\n      var width = maxX - minX;\n      var height = maxY - minY;\n      return {\n        width: width,\n        height: height\n      };\n    }\n    return {\n      width: 0,\n      height: 0\n    };\n  };\n  return PolylineUpdater;\n}();\nvar RectUpdater = /** @class */function () {\n  function RectUpdater() {}\n  RectUpdater.prototype.update = function (parsedStyle, object) {\n    var img = parsedStyle.img,\n      _a = parsedStyle.width,\n      width = _a === void 0 ? 0 : _a,\n      _b = parsedStyle.height,\n      height = _b === void 0 ? 0 : _b;\n    var contentWidth = width;\n    var contentHeight = height;\n    // resize with HTMLImageElement's size\n    if (img && !isString(img)) {\n      if (!contentWidth) {\n        contentWidth = img.width;\n        parsedStyle.width = contentWidth;\n      }\n      if (!contentHeight) {\n        contentHeight = img.height;\n        parsedStyle.height = contentHeight;\n      }\n    }\n    return {\n      width: contentWidth,\n      height: contentHeight\n    };\n  };\n  return RectUpdater;\n}();\nvar TextUpdater = /** @class */function () {\n  function TextUpdater(globalRuntime) {\n    this.globalRuntime = globalRuntime;\n  }\n  TextUpdater.prototype.isReadyToMeasure = function (parsedStyle, object) {\n    var text = parsedStyle.text,\n      textAlign = parsedStyle.textAlign,\n      textBaseline = parsedStyle.textBaseline,\n      fontSize = parsedStyle.fontSize,\n      fontStyle = parsedStyle.fontStyle,\n      fontWeight = parsedStyle.fontWeight,\n      fontVariant = parsedStyle.fontVariant,\n      lineWidth = parsedStyle.lineWidth;\n    return text && fontSize && fontStyle && fontWeight && fontVariant && textAlign && textBaseline && !isNil(lineWidth);\n  };\n  TextUpdater.prototype.update = function (parsedStyle, object) {\n    var _a, _b;\n    var text = parsedStyle.text,\n      textAlign = parsedStyle.textAlign,\n      lineWidth = parsedStyle.lineWidth,\n      textBaseline = parsedStyle.textBaseline,\n      dx = parsedStyle.dx,\n      dy = parsedStyle.dy;\n    if (!this.isReadyToMeasure(parsedStyle, object)) {\n      parsedStyle.metrics = {\n        font: '',\n        width: 0,\n        height: 0,\n        lines: [],\n        lineWidths: [],\n        lineHeight: 0,\n        maxLineWidth: 0,\n        fontProperties: {\n          ascent: 0,\n          descent: 0,\n          fontSize: 0\n        },\n        lineMetrics: []\n      };\n      return {\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0,\n        offsetX: 0,\n        offsetY: 0\n      };\n    }\n    var offscreenCanvas = (((_b = (_a = object === null || object === void 0 ? void 0 : object.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.getConfig()) || {}).offscreenCanvas;\n    var metrics = this.globalRuntime.textService.measureText(text, parsedStyle, offscreenCanvas);\n    parsedStyle.metrics = metrics;\n    var width = metrics.width,\n      height = metrics.height,\n      lineHeight = metrics.lineHeight,\n      fontProperties = metrics.fontProperties;\n    // anchor is left-top by default\n    var halfExtents = [width / 2, height / 2, 0];\n    // default 'left'\n    var anchor = [0, 1];\n    var lineXOffset = 0;\n    if (textAlign === 'center' || textAlign === 'middle') {\n      lineXOffset = lineWidth / 2;\n      anchor = [0.5, 1];\n    } else if (textAlign === 'right' || textAlign === 'end') {\n      lineXOffset = lineWidth;\n      anchor = [1, 1];\n    }\n    var lineYOffset = 0;\n    if (textBaseline === 'middle') {\n      // eslint-disable-next-line prefer-destructuring\n      lineYOffset = halfExtents[1];\n    } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n      lineYOffset = halfExtents[1] * 2;\n    } else if (textBaseline === 'alphabetic') {\n      // prevent calling getImageData for ascent metrics\n      lineYOffset = this.globalRuntime.enableCSSParsing ? lineHeight - fontProperties.ascent : 0;\n    } else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n      lineYOffset = 0;\n    }\n    // TODO: ideographic & bottom\n    if (dx) {\n      lineXOffset += dx;\n    }\n    if (dy) {\n      lineYOffset += dy;\n    }\n    // update anchor\n    parsedStyle.anchor = [anchor[0], anchor[1], 0];\n    return {\n      width: halfExtents[0] * 2,\n      height: halfExtents[1] * 2,\n      offsetX: lineXOffset,\n      offsetY: lineYOffset\n    };\n  };\n  return TextUpdater;\n}();\nfunction isFederatedEvent(value) {\n  return !!value.type;\n}\n/**\n * An DOM-compatible synthetic event implementation that is \"forwarded\" on behalf of an original\n * FederatedEvent or native Event.\n */\nvar FederatedEvent = /** @class */function () {\n  /**\n   * The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  function FederatedEvent(manager) {\n    /**\n     * The propagation phase.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n     */\n    this.eventPhase = FederatedEvent.prototype.NONE;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/bubbles\n     */\n    this.bubbles = true;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/cancelBubble\n     */\n    this.cancelBubble = true;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable\n     */\n    this.cancelable = false;\n    /** Flags whether the default response of the user agent was prevent through this event. */\n    this.defaultPrevented = false;\n    /** Flags whether propagation was stopped. */\n    this.propagationStopped = false;\n    /** Flags whether propagation was immediately stopped. */\n    this.propagationImmediatelyStopped = false;\n    /**\n     * The coordinates of the evnet relative to the nearest DOM layer.\n     * This is a non-standard property.\n     */\n    this.layer = new Point();\n    /**\n     * The coordinates of the event relative to the DOM document.\n     * This is a non-standard property.\n     * relative to the DOM document.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/pageX\n     */\n    this.page = new Point();\n    /**\n     * relative to Canvas, origin is left-top\n     */\n    this.canvas = new Point();\n    /**\n     * relative to Viewport, account for Camera\n     */\n    this.viewport = new Point();\n    this.composed = false;\n    this.NONE = 0;\n    this.CAPTURING_PHASE = 1;\n    this.AT_TARGET = 2;\n    this.BUBBLING_PHASE = 3;\n    this.manager = manager;\n  }\n  Object.defineProperty(FederatedEvent.prototype, \"name\", {\n    /**\n     * @deprecated\n     */\n    get: function () {\n      return this.type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"layerX\", {\n    get: function () {\n      return this.layer.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"layerY\", {\n    get: function () {\n      return this.layer.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"pageX\", {\n    get: function () {\n      return this.page.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"pageY\", {\n    get: function () {\n      return this.page.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"x\", {\n    get: function () {\n      return this.canvas.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"y\", {\n    get: function () {\n      return this.canvas.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"canvasX\", {\n    get: function () {\n      return this.canvas.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"canvasY\", {\n    get: function () {\n      return this.canvas.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"viewportX\", {\n    get: function () {\n      return this.viewport.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedEvent.prototype, \"viewportY\", {\n    get: function () {\n      return this.viewport.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * The propagation path for this event\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/composedPath\n   *\n   * So composedPath()[0] represents the original target.\n   * @see https://polymer-library.polymer-project.org/3.0/docs/devguide/events#retargeting\n   */\n  FederatedEvent.prototype.composedPath = function () {\n    if (this.manager && (!this.path || this.path[0] !== this.target)) {\n      this.path = this.target ? this.manager.propagationPath(this.target) : [];\n    }\n    return this.path;\n  };\n  Object.defineProperty(FederatedEvent.prototype, \"propagationPath\", {\n    /**\n     * @deprecated\n     */\n    get: function () {\n      return this.composedPath();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault\n   */\n  FederatedEvent.prototype.preventDefault = function () {\n    if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n      this.nativeEvent.preventDefault();\n    }\n    this.defaultPrevented = true;\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation\n   */\n  FederatedEvent.prototype.stopImmediatePropagation = function () {\n    this.propagationImmediatelyStopped = true;\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation\n   */\n  FederatedEvent.prototype.stopPropagation = function () {\n    this.propagationStopped = true;\n  };\n  /**\n   * added for compatibility with DOM Event,\n   * deprecated props and methods\n   */\n  FederatedEvent.prototype.initEvent = function () {};\n  FederatedEvent.prototype.initUIEvent = function () {};\n  FederatedEvent.prototype.clone = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  return FederatedEvent;\n}();\nvar FederatedMouseEvent = /** @class */function (_super) {\n  __extends(FederatedMouseEvent, _super);\n  function FederatedMouseEvent() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    /**\n     * The coordinates of the mouse event relative to the canvas.\n     */\n    _this.client = new Point();\n    /**\n     * The movement in this pointer relative to the last `mousemove` event.\n     */\n    _this.movement = new Point();\n    /**\n     * The offset of the pointer coordinates w.r.t. target DisplayObject in world space. This is\n     * not supported at the moment.\n     */\n    _this.offset = new Point();\n    /**\n     * The pointer coordinates in world space.\n     */\n    _this.global = new Point();\n    /**\n     * The pointer coordinates in sceen space.\n     */\n    _this.screen = new Point();\n    return _this;\n  }\n  Object.defineProperty(FederatedMouseEvent.prototype, \"clientX\", {\n    get: function () {\n      return this.client.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"clientY\", {\n    get: function () {\n      return this.client.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"movementX\", {\n    get: function () {\n      return this.movement.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"movementY\", {\n    get: function () {\n      return this.movement.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"offsetX\", {\n    get: function () {\n      return this.offset.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"offsetY\", {\n    get: function () {\n      return this.offset.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"globalX\", {\n    get: function () {\n      return this.global.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"globalY\", {\n    get: function () {\n      return this.global.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"screenX\", {\n    get: function () {\n      return this.screen.x;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(FederatedMouseEvent.prototype, \"screenY\", {\n    get: function () {\n      return this.screen.y;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  FederatedMouseEvent.prototype.getModifierState = function (key) {\n    return 'getModifierState' in this.nativeEvent && this.nativeEvent.getModifierState(key);\n  };\n  FederatedMouseEvent.prototype.initMouseEvent = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  return FederatedMouseEvent;\n}(FederatedEvent);\n\n// @ts-ignore\nvar FederatedPointerEvent = /** @class */function (_super) {\n  __extends(FederatedPointerEvent, _super);\n  function FederatedPointerEvent() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    /**\n     * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n     * radiusX of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n     */\n    _this.width = 0;\n    /**\n     * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n     * radiusY of TouchEvents will be represented by this value.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n     */\n    _this.height = 0;\n    /**\n     * Indicates whether or not the pointer device that created the event is the primary pointer.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n     */\n    _this.isPrimary = false;\n    return _this;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/getCoalescedEvents\n   */\n  FederatedPointerEvent.prototype.getCoalescedEvents = function () {\n    if (this.type === 'pointermove' || this.type === 'mousemove' || this.type === 'touchmove') {\n      // @ts-ignore\n      return [this];\n    }\n    return [];\n  };\n  /**\n   * @see https://chromestatus.com/feature/5765569655603200\n   */\n  FederatedPointerEvent.prototype.getPredictedEvents = function () {\n    throw new Error('getPredictedEvents is not supported!');\n  };\n  /**\n   * @see https://github.com/antvis/G/issues/1115\n   * We currently reuses event objects in the event system,\n   * avoiding the creation of a large number of event objects.\n   * Reused objects are only used to carry different data,\n   * such as coordinate information, native event objects,\n   * and therefore the lifecycle is limited to the event handler,\n   * which can lead to unintended consequences if an attempt is made to cache the entire event object.\n   *\n   * Therefore, while keeping the above performance considerations in mind, it is possible to provide a clone method that creates a new object when the user really wants to cache it, e.g.\n   */\n  FederatedPointerEvent.prototype.clone = function () {\n    return this.manager.clonePointerEvent(this);\n  };\n  return FederatedPointerEvent;\n}(FederatedMouseEvent);\n\n// @ts-ignore\nvar FederatedWheelEvent = /** @class */function (_super) {\n  __extends(FederatedWheelEvent, _super);\n  function FederatedWheelEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  FederatedWheelEvent.prototype.clone = function () {\n    return this.manager.cloneWheelEvent(this);\n  };\n  return FederatedWheelEvent;\n}(FederatedMouseEvent);\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events\n *\n * @example\n  const event = new CustomEvent('build', { detail: { prop1: 'xx' } });\n  circle.addEventListener('build', (e) => {\n    e.target; // circle\n    e.detail; // { prop1: 'xx' }\n  });\n\n  circle.dispatchEvent(event);\n */\nvar CustomEvent = /** @class */function (_super) {\n  __extends(CustomEvent, _super);\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  function CustomEvent(eventName, object) {\n    var _this = _super.call(this, null) || this;\n    _this.type = eventName;\n    _this.detail = object;\n    // compatible with G 3.0\n    Object.assign(_this, object);\n    return _this;\n  }\n  return CustomEvent;\n}(FederatedEvent);\nvar DELEGATION_SPLITTER = ':';\n/**\n * Objects that can receive events and may have listeners for them.\n * eg. Element, Canvas, DisplayObject\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nvar EventTarget = /** @class */function () {\n  function EventTarget() {\n    /**\n     * event emitter\n     */\n    this.emitter = new EventEmitter();\n  }\n  /**\n   * @deprecated\n   * @alias addEventListener\n   */\n  EventTarget.prototype.on = function (type, listener, options) {\n    this.addEventListener(type, listener, options);\n    return this;\n  };\n  /**\n   * support `capture` & `once` in options\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\n   */\n  EventTarget.prototype.addEventListener = function (type, listener, options) {\n    var capture = isBoolean(options) && options || isObject(options) && options.capture;\n    var once = isObject(options) && options.once;\n    var context = isFunction(listener) ? undefined : listener;\n    // compatible with G 3.0\n    // support using delegate name in event type, eg. 'node:click'\n    var useDelegatedName = false;\n    var delegatedName = '';\n    if (type.indexOf(DELEGATION_SPLITTER) > -1) {\n      var _a = __read(type.split(DELEGATION_SPLITTER), 2),\n        name_1 = _a[0],\n        eventType = _a[1];\n      type = eventType;\n      delegatedName = name_1;\n      useDelegatedName = true;\n    }\n    type = capture ? \"\".concat(type, \"capture\") : type;\n    listener = isFunction(listener) ? listener : listener.handleEvent;\n    // compatible with G 3.0\n    if (useDelegatedName) {\n      var originListener_1 = listener;\n      listener = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (((_a = args[0].target) === null || _a === void 0 ? void 0 : _a.name) !== delegatedName) {\n          return;\n        }\n        // @ts-ignore\n        originListener_1.apply(void 0, __spreadArray([], __read(args), false));\n      };\n    }\n    if (once) {\n      this.emitter.once(type, listener, context);\n    } else {\n      this.emitter.on(type, listener, context);\n    }\n    return this;\n  };\n  /**\n   * @deprecated\n   * @alias removeEventListener\n   */\n  EventTarget.prototype.off = function (type, listener, options) {\n    if (type) {\n      this.removeEventListener(type, listener, options);\n    } else {\n      // remove all listeners\n      this.removeAllEventListeners();\n    }\n    return this;\n  };\n  EventTarget.prototype.removeAllEventListeners = function () {\n    this.emitter.removeAllListeners();\n  };\n  EventTarget.prototype.removeEventListener = function (type, listener, options) {\n    var capture = isBoolean(options) && options || isObject(options) && options.capture;\n    var context = isFunction(listener) ? undefined : listener;\n    type = capture ? \"\".concat(type, \"capture\") : type;\n    listener = isFunction(listener) ? listener : listener === null || listener === void 0 ? void 0 : listener.handleEvent;\n    this.emitter.off(type, listener, context);\n    return this;\n  };\n  /**\n   * @deprecated\n   * @alias dispatchEvent\n   */\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  EventTarget.prototype.emit = function (eventName, object) {\n    this.dispatchEvent(new CustomEvent(eventName, object));\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n   */\n  EventTarget.prototype.dispatchEvent = function (e, skipPropagate) {\n    var _a, _b;\n    if (skipPropagate === void 0) {\n      skipPropagate = false;\n    }\n    if (!isFederatedEvent(e)) {\n      throw new Error('DisplayObject cannot propagate events outside of the Federated Events API');\n    }\n    // should account for Element / Document / Canvas\n    var canvas;\n    // @ts-ignore\n    if (this.document) {\n      canvas = this;\n      // @ts-ignore\n    } else if (this.defaultView) {\n      canvas = this.defaultView;\n    } else {\n      canvas = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n    }\n    // assign event manager\n    if (canvas) {\n      e.manager = canvas.getEventService() || null;\n      if (!e.manager) {\n        return false;\n      }\n      e.defaultPrevented = false;\n      e.path = [];\n      if (!skipPropagate) {\n        e.target = this;\n      }\n      (_b = e.manager) === null || _b === void 0 ? void 0 : _b.dispatchEvent(e, e.type, skipPropagate);\n    }\n    return !e.defaultPrevented;\n  };\n  return EventTarget;\n}();\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node\n */\nvar Node = /** @class */function (_super) {\n  __extends(Node, _super);\n  function Node() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    _this.shadow = false;\n    /**\n     * points to canvas.document\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument\n     */\n    _this.ownerDocument = null;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isConnected\n     * @example\n        circle.isConnected; // false\n        canvas.appendChild(circle);\n        circle.isConnected; // true\n     */\n    _this.isConnected = false;\n    /**\n     * Returns node's node document's document base URL.\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node\n     */\n    _this.baseURI = '';\n    /**\n     * Returns the children.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\n     */\n    _this.childNodes = [];\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n     */\n    _this.nodeType = 0;\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeName\n     */\n    _this.nodeName = '';\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeValue\n     */\n    _this.nodeValue = null;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode\n     */\n    _this.parentNode = null;\n    return _this;\n  }\n  Node.isNode = function (target) {\n    return !!target.childNodes;\n  };\n  Object.defineProperty(Node.prototype, \"textContent\", {\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent\n     */\n    get: function () {\n      var e_1, _a;\n      var out = '';\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        out += this.style.text;\n      }\n      try {\n        for (var _b = __values(this.childNodes), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          if (child.nodeName === Shape.TEXT) {\n            out += child.nodeValue;\n          } else {\n            out += child.textContent;\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      return out;\n    },\n    set: function (content) {\n      var _this = this;\n      // remove all children\n      this.childNodes.slice().forEach(function (child) {\n        _this.removeChild(child);\n      });\n      if (this.nodeName === Shape.TEXT) {\n        // @ts-ignore\n        this.style.text = \"\".concat(content);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/getRootNode\n   */\n  Node.prototype.getRootNode = function (opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    if (this.parentNode) {\n      return this.parentNode.getRootNode(opts);\n    }\n    if (opts.composed && this.host) {\n      return this.host.getRootNode(opts);\n    }\n    return this;\n  };\n  Node.prototype.hasChildNodes = function () {\n    return this.childNodes.length > 0;\n  };\n  Node.prototype.isDefaultNamespace = function (namespace) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Node.prototype.lookupNamespaceURI = function (prefix) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Node.prototype.lookupPrefix = function (namespace) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Node.prototype.normalize = function () {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isEqualNode\n   */\n  Node.prototype.isEqualNode = function (otherNode) {\n    // TODO: compare 2 nodes, not sameness\n    return this === otherNode;\n  };\n  Node.prototype.isSameNode = function (otherNode) {\n    return this.isEqualNode(otherNode);\n  };\n  Object.defineProperty(Node.prototype, \"parent\", {\n    /**\n     * @deprecated\n     * @alias parentNode\n     */\n    get: function () {\n      return this.parentNode;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"parentElement\", {\n    get: function () {\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"nextSibling\", {\n    get: function () {\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"previousSibling\", {\n    get: function () {\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"firstChild\", {\n    get: function () {\n      return this.childNodes.length > 0 ? this.childNodes[0] : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Node.prototype, \"lastChild\", {\n    get: function () {\n      return this.childNodes.length > 0 ? this.childNodes[this.childNodes.length - 1] : null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n   * @see https://github.com/b-fuze/deno-dom/blob/master/src/dom/node.ts#L338\n   */\n  Node.prototype.compareDocumentPosition = function (other) {\n    var _a;\n    if (other === this) {\n      // same node\n      return 0;\n    }\n    // if (!(other instanceof Node)) {\n    //   throw new TypeError(\n    //     'Node.compareDocumentPosition: Argument 1 does not implement interface Node.',\n    //   );\n    // }\n    var node1Root = other;\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var node2Root = this;\n    var node1Hierarchy = [node1Root];\n    var node2Hierarchy = [node2Root];\n    while ((_a = node1Root.parentNode) !== null && _a !== void 0 ? _a : node2Root.parentNode) {\n      node1Root = node1Root.parentNode ? (node1Hierarchy.push(node1Root.parentNode), node1Root.parentNode) : node1Root;\n      node2Root = node2Root.parentNode ? (node2Hierarchy.push(node2Root.parentNode), node2Root.parentNode) : node2Root;\n    }\n    // Check if they don't share the same root node\n    if (node1Root !== node2Root) {\n      return Node.DOCUMENT_POSITION_DISCONNECTED | Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC | Node.DOCUMENT_POSITION_PRECEDING;\n    }\n    var longerHierarchy = node1Hierarchy.length > node2Hierarchy.length ? node1Hierarchy : node2Hierarchy;\n    var shorterHierarchy = longerHierarchy === node1Hierarchy ? node2Hierarchy : node1Hierarchy;\n    // Check if either is a container of the other\n    if (longerHierarchy[longerHierarchy.length - shorterHierarchy.length] === shorterHierarchy[0]) {\n      return longerHierarchy === node1Hierarchy ?\n      // other is a child of this\n      Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING :\n      // this is a child of other\n      Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING;\n    }\n    // Find their first common ancestor and see whether they\n    // are preceding or following\n    var longerStart = longerHierarchy.length - shorterHierarchy.length;\n    for (var i = shorterHierarchy.length - 1; i >= 0; i--) {\n      var shorterHierarchyNode = shorterHierarchy[i];\n      var longerHierarchyNode = longerHierarchy[longerStart + i];\n      // We found the first common ancestor\n      if (longerHierarchyNode !== shorterHierarchyNode) {\n        var siblings = shorterHierarchyNode.parentNode.childNodes;\n        if (siblings.indexOf(shorterHierarchyNode) < siblings.indexOf(longerHierarchyNode)) {\n          // Shorter is before longer\n          if (shorterHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          } else {\n            // This is before other\n            return Node.DOCUMENT_POSITION_FOLLOWING;\n          }\n        } else {\n          // Longer is before shorter\n          if (longerHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          } else {\n            // Other is after this\n            return Node.DOCUMENT_POSITION_FOLLOWING;\n          }\n        }\n      }\n    }\n    return Node.DOCUMENT_POSITION_FOLLOWING;\n  };\n  /**\n   * @deprecated\n   * @alias contains\n   */\n  Node.prototype.contain = function (other) {\n    return this.contains(other);\n  };\n  Node.prototype.contains = function (other) {\n    // the node itself, one of its direct children\n    var tmp = other;\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n    while (tmp && this !== tmp) {\n      tmp = tmp.parentNode;\n    }\n    return !!tmp;\n  };\n  Node.prototype.getAncestor = function (n) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var temp = this;\n    while (n > 0 && temp) {\n      temp = temp.parentNode;\n      n--;\n    }\n    return temp;\n  };\n  Node.prototype.forEach = function (callback, assigned) {\n    if (assigned === void 0) {\n      assigned = false;\n    }\n    if (!callback(this)) {\n      (assigned ? this.childNodes.slice() : this.childNodes).forEach(function (child) {\n        child.forEach(callback);\n      });\n    }\n  };\n  /**\n   * Both nodes are in different documents or different trees in the same document.\n   */\n  Node.DOCUMENT_POSITION_DISCONNECTED = 1;\n  /**\n   * otherNode precedes the node in either a pre-order depth-first traversal\n   * of a tree containing both (e.g., as an ancestor or previous sibling or a descendant of a previous sibling or previous sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  Node.DOCUMENT_POSITION_PRECEDING = 2;\n  /**\n   * otherNode follows the node in either a pre-order depth-first traversal of a tree containing both (e.g., as a descendant or following sibling or a descendant of a following sibling or following sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  Node.DOCUMENT_POSITION_FOLLOWING = 4;\n  /**\n   * otherNode is an ancestor of the node.\n   */\n  Node.DOCUMENT_POSITION_CONTAINS = 8;\n  /**\n   * otherNode is a descendant of the node.\n   */\n  Node.DOCUMENT_POSITION_CONTAINED_BY = 16;\n  /**\n   * The result relies upon arbitrary and/or implementation-specific behavior and is not guaranteed to be portable.\n   */\n  Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32;\n  return Node;\n}(EventTarget);\nvar PROPAGATION_LIMIT = 2048;\nvar EventService = /** @class */function () {\n  function EventService(globalRuntime, context) {\n    var _this = this;\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n    this.emitter = new EventEmitter();\n    /**\n     * Store HTML elements in current canvas.\n     */\n    this.nativeHTMLMap = new WeakMap();\n    this.cursor = 'default';\n    this.mappingTable = {};\n    this.mappingState = {\n      trackingData: {}\n    };\n    this.eventPool = new Map();\n    this.tmpMatrix = mat4.create();\n    this.tmpVec3 = vec3.create();\n    this.onPointerDown = function (from) {\n      var e = _this.createPointerEvent(from);\n      _this.dispatchEvent(e, 'pointerdown');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchstart');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightdown' : 'mousedown');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      trackingData.pressTargetsByButton[from.button] = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerUp = function (from) {\n      var _a;\n      var now = clock.now();\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e, 'pointerup');\n      if (e.pointerType === 'touch') {\n        _this.dispatchEvent(e, 'touchend');\n      } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n        var isRightButton = e.button === 2;\n        _this.dispatchEvent(e, isRightButton ? 'rightup' : 'mouseup');\n      }\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var clickTarget = pressTarget;\n      // pointerupoutside only bubbles. It only bubbles upto the parent that doesn't contain\n      // the pointerup location.\n      if (pressTarget && !e.composedPath().includes(pressTarget)) {\n        var currentTarget = pressTarget;\n        while (currentTarget && !e.composedPath().includes(currentTarget)) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') {\n            _this.notifyTarget(e, 'touchendoutside');\n          } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            var isRightButton = e.button === 2;\n            _this.notifyTarget(e, isRightButton ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n        // currentTarget is the most specific ancestor holding both the pointerdown and pointerup\n        // targets. That is - it's our click target!\n        clickTarget = currentTarget;\n      }\n      if (clickTarget) {\n        var clickEvent = _this.clonePointerEvent(e, 'click');\n        clickEvent.target = clickTarget;\n        clickEvent.path = [];\n        if (!trackingData.clicksByButton[from.button]) {\n          trackingData.clicksByButton[from.button] = {\n            clickCount: 0,\n            target: clickEvent.target,\n            timeStamp: now\n          };\n        }\n        var clickHistory = trackingData.clicksByButton[from.button];\n        if (clickHistory.target === clickEvent.target && now - clickHistory.timeStamp < 200) {\n          ++clickHistory.clickCount;\n        } else {\n          clickHistory.clickCount = 1;\n        }\n        clickHistory.target = clickEvent.target;\n        clickHistory.timeStamp = now;\n        clickEvent.detail = clickHistory.clickCount;\n        // @see https://github.com/antvis/G/issues/1091\n        if (!((_a = e.detail) === null || _a === void 0 ? void 0 : _a.preventClick)) {\n          if (!_this.context.config.useNativeClickEvent && (clickEvent.pointerType === 'mouse' || clickEvent.pointerType === 'touch')) {\n            _this.dispatchEvent(clickEvent, 'click');\n          }\n          _this.dispatchEvent(clickEvent, 'pointertap');\n        }\n        _this.freeEvent(clickEvent);\n      }\n      _this.freeEvent(e);\n    };\n    this.onPointerMove = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      var trackingData = _this.trackingData(from.pointerId);\n      var outTarget = _this.findMountedTarget(trackingData.overTargets);\n      // First pointerout/pointerleave\n      if (trackingData.overTargets && outTarget !== e.target) {\n        // pointerout always occurs on the overTarget when the pointer hovers over another element.\n        var outType = from.type === 'mousemove' ? 'mouseout' : 'pointerout';\n        var outEvent = _this.createPointerEvent(from, outType, outTarget || undefined);\n        _this.dispatchEvent(outEvent, 'pointerout');\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n        // If the pointer exits overTarget and its descendants, then a pointerleave event is also fired. This event\n        // is dispatched to all ancestors that no longer capture the pointer.\n        if (!e.composedPath().includes(outTarget)) {\n          var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n          leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n          while (leaveEvent.target && !e.composedPath().includes(leaveEvent.target)) {\n            leaveEvent.currentTarget = leaveEvent.target;\n            _this.notifyTarget(leaveEvent);\n            if (isMouse) {\n              _this.notifyTarget(leaveEvent, 'mouseleave');\n            }\n            if (Node.isNode(leaveEvent.target)) {\n              leaveEvent.target = leaveEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(leaveEvent);\n        }\n        _this.freeEvent(outEvent);\n      }\n      // Then pointerover\n      if (outTarget !== e.target) {\n        // pointerover always occurs on the new overTarget\n        var overType = from.type === 'mousemove' ? 'mouseover' : 'pointerover';\n        var overEvent = _this.clonePointerEvent(e, overType); // clone faster\n        _this.dispatchEvent(overEvent, 'pointerover');\n        if (isMouse) _this.dispatchEvent(overEvent, 'mouseover');\n        // Probe whether the newly hovered Node is an ancestor of the original overTarget.\n        var overTargetAncestor = outTarget && Node.isNode(outTarget) && outTarget.parentNode;\n        while (overTargetAncestor && overTargetAncestor !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          if (overTargetAncestor === e.target) break;\n          overTargetAncestor = overTargetAncestor.parentNode;\n        }\n        // The pointer has entered a non-ancestor of the original overTarget. This means we need a pointerentered\n        // event.\n        var didPointerEnter = !overTargetAncestor || overTargetAncestor === (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode);\n        if (didPointerEnter) {\n          var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n          enterEvent.eventPhase = enterEvent.AT_TARGET;\n          while (enterEvent.target && enterEvent.target !== outTarget && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n            enterEvent.currentTarget = enterEvent.target;\n            _this.notifyTarget(enterEvent);\n            if (isMouse) _this.notifyTarget(enterEvent, 'mouseenter');\n            if (Node.isNode(enterEvent.target)) {\n              enterEvent.target = enterEvent.target.parentNode;\n            }\n          }\n          _this.freeEvent(enterEvent);\n        }\n        _this.freeEvent(overEvent);\n      }\n      // Then pointermove\n      _this.dispatchEvent(e, 'pointermove');\n      if (e.pointerType === 'touch') _this.dispatchEvent(e, 'touchmove');\n      if (isMouse) {\n        _this.dispatchEvent(e, 'mousemove');\n        _this.cursor = _this.getCursor(e.target);\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n    };\n    this.onPointerOut = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      if (trackingData.overTargets) {\n        var isMouse = from.pointerType === 'mouse' || from.pointerType === 'pen';\n        var outTarget = _this.findMountedTarget(trackingData.overTargets);\n        // pointerout first\n        var outEvent = _this.createPointerEvent(from, 'pointerout', outTarget || undefined);\n        _this.dispatchEvent(outEvent);\n        if (isMouse) _this.dispatchEvent(outEvent, 'mouseout');\n        // pointerleave(s) are also dispatched b/c the pointer must've left rootTarget and its descendants to\n        // get an upstream pointerout event (upstream events do not know rootTarget has descendants).\n        var leaveEvent = _this.createPointerEvent(from, 'pointerleave', outTarget || undefined);\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n        while (leaveEvent.target && leaveEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n          leaveEvent.currentTarget = leaveEvent.target;\n          _this.notifyTarget(leaveEvent);\n          if (isMouse) {\n            _this.notifyTarget(leaveEvent, 'mouseleave');\n          }\n          if (Node.isNode(leaveEvent.target)) {\n            leaveEvent.target = leaveEvent.target.parentNode;\n          }\n        }\n        trackingData.overTargets = null;\n        _this.freeEvent(outEvent);\n        _this.freeEvent(leaveEvent);\n      }\n      _this.cursor = null;\n    };\n    this.onPointerOver = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var e = _this.createPointerEvent(from);\n      var isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n      _this.dispatchEvent(e, 'pointerover');\n      if (isMouse) _this.dispatchEvent(e, 'mouseover');\n      if (e.pointerType === 'mouse') _this.cursor = _this.getCursor(e.target);\n      // pointerenter events must be fired since the pointer entered from upstream.\n      var enterEvent = _this.clonePointerEvent(e, 'pointerenter');\n      enterEvent.eventPhase = enterEvent.AT_TARGET;\n      while (enterEvent.target && enterEvent.target !== (Node.isNode(_this.rootTarget) && _this.rootTarget.parentNode)) {\n        enterEvent.currentTarget = enterEvent.target;\n        _this.notifyTarget(enterEvent);\n        if (isMouse) {\n          // mouseenter should not bubble\n          // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event#usage_notes\n          _this.notifyTarget(enterEvent, 'mouseenter');\n        }\n        if (Node.isNode(enterEvent.target)) {\n          enterEvent.target = enterEvent.target.parentNode;\n        }\n      }\n      trackingData.overTargets = e.composedPath();\n      _this.freeEvent(e);\n      _this.freeEvent(enterEvent);\n    };\n    this.onPointerUpOutside = function (from) {\n      var trackingData = _this.trackingData(from.pointerId);\n      var pressTarget = _this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n      var e = _this.createPointerEvent(from);\n      if (pressTarget) {\n        var currentTarget = pressTarget;\n        while (currentTarget) {\n          e.currentTarget = currentTarget;\n          _this.notifyTarget(e, 'pointerupoutside');\n          if (e.pointerType === 'touch') ;else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n            _this.notifyTarget(e, e.button === 2 ? 'rightupoutside' : 'mouseupoutside');\n          }\n          if (Node.isNode(currentTarget)) {\n            currentTarget = currentTarget.parentNode;\n          }\n        }\n        delete trackingData.pressTargetsByButton[from.button];\n      }\n      _this.freeEvent(e);\n    };\n    this.onWheel = function (from) {\n      var wheelEvent = _this.createWheelEvent(from);\n      _this.dispatchEvent(wheelEvent);\n      _this.freeEvent(wheelEvent);\n    };\n    this.onClick = function (from) {\n      if (_this.context.config.useNativeClickEvent) {\n        var e = _this.createPointerEvent(from);\n        _this.dispatchEvent(e);\n        _this.freeEvent(e);\n      }\n    };\n    this.onPointerCancel = function (from) {\n      var e = _this.createPointerEvent(from, undefined, undefined, _this.context.config.alwaysTriggerPointerEventOnCanvas ? _this.rootTarget : undefined);\n      _this.dispatchEvent(e);\n      _this.freeEvent(e);\n    };\n  }\n  EventService.prototype.init = function () {\n    this.rootTarget = this.context.renderingContext.root.parentNode; // document\n    this.addEventMapping('pointerdown', this.onPointerDown);\n    this.addEventMapping('pointerup', this.onPointerUp);\n    this.addEventMapping('pointermove', this.onPointerMove);\n    this.addEventMapping('pointerout', this.onPointerOut);\n    this.addEventMapping('pointerleave', this.onPointerOut);\n    this.addEventMapping('pointercancel', this.onPointerCancel);\n    this.addEventMapping('pointerover', this.onPointerOver);\n    this.addEventMapping('pointerupoutside', this.onPointerUpOutside);\n    this.addEventMapping('wheel', this.onWheel);\n    this.addEventMapping('click', this.onClick);\n  };\n  EventService.prototype.destroy = function () {\n    this.emitter.removeAllListeners();\n    this.mappingTable = {};\n    this.mappingState = {};\n    this.eventPool.clear();\n  };\n  EventService.prototype.client2Viewport = function (client) {\n    var bbox = this.context.contextService.getBoundingClientRect();\n    return new Point(client.x - ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0), client.y - ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0));\n  };\n  EventService.prototype.viewport2Client = function (canvas) {\n    var bbox = this.context.contextService.getBoundingClientRect();\n    return new Point(canvas.x + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0), canvas.y + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0));\n  };\n  EventService.prototype.viewport2Canvas = function (_a) {\n    var x = _a.x,\n      y = _a.y;\n    var canvas = this.rootTarget.defaultView;\n    var camera = canvas.getCamera();\n    var _b = this.context.config,\n      width = _b.width,\n      height = _b.height;\n    var projectionMatrixInverse = camera.getPerspectiveInverse();\n    var worldMatrix = camera.getWorldTransform();\n    var vpMatrix = mat4.multiply(this.tmpMatrix, worldMatrix, projectionMatrixInverse);\n    var viewport = vec3.set(this.tmpVec3, x / width * 2 - 1, (1 - y / height) * 2 - 1, 0);\n    vec3.transformMat4(viewport, viewport, vpMatrix);\n    return new Point(viewport[0], viewport[1]);\n  };\n  EventService.prototype.canvas2Viewport = function (canvasP) {\n    var canvas = this.rootTarget.defaultView;\n    var camera = canvas.getCamera();\n    // World -> Clip\n    var projectionMatrix = camera.getPerspective();\n    var viewMatrix = camera.getViewTransform();\n    var vpMatrix = mat4.multiply(this.tmpMatrix, projectionMatrix, viewMatrix);\n    var clip = vec3.set(this.tmpVec3, canvasP.x, canvasP.y, 0);\n    vec3.transformMat4(this.tmpVec3, this.tmpVec3, vpMatrix);\n    // Clip -> NDC -> Viewport, flip Y\n    var _a = this.context.config,\n      width = _a.width,\n      height = _a.height;\n    return new Point((clip[0] + 1) / 2 * width, (1 - (clip[1] + 1) / 2) * height);\n  };\n  EventService.prototype.setPickHandler = function (pickHandler) {\n    this.pickHandler = pickHandler;\n  };\n  EventService.prototype.addEventMapping = function (type, fn) {\n    if (!this.mappingTable[type]) {\n      this.mappingTable[type] = [];\n    }\n    this.mappingTable[type].push({\n      fn: fn,\n      priority: 0\n    });\n    this.mappingTable[type].sort(function (a, b) {\n      return a.priority - b.priority;\n    });\n  };\n  EventService.prototype.mapEvent = function (e) {\n    if (!this.rootTarget) {\n      return;\n    }\n    var mappers = this.mappingTable[e.type];\n    if (mappers) {\n      for (var i = 0, j = mappers.length; i < j; i++) {\n        mappers[i].fn(e);\n      }\n    } else {\n      console.warn(\"[EventService]: Event mapping not defined for \".concat(e.type));\n    }\n  };\n  EventService.prototype.dispatchEvent = function (e, type, skipPropagate) {\n    // Canvas should skip\n    if (!skipPropagate) {\n      e.propagationStopped = false;\n      e.propagationImmediatelyStopped = false;\n      this.propagate(e, type);\n    } else {\n      // target phase\n      e.eventPhase = e.AT_TARGET;\n      var canvas = this.rootTarget.defaultView || null;\n      e.currentTarget = canvas;\n      this.notifyListeners(e, type);\n    }\n    this.emitter.emit(type || e.type, e);\n  };\n  EventService.prototype.propagate = function (e, type) {\n    if (!e.target) {\n      return;\n    }\n    // [target, parent, root, Canvas]\n    var composedPath = e.composedPath();\n    // event flow: capture -> target -> bubbling\n    // capture phase\n    e.eventPhase = e.CAPTURING_PHASE;\n    for (var i = composedPath.length - 1; i >= 1; i--) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n    // target phase\n    e.eventPhase = e.AT_TARGET;\n    e.currentTarget = e.target;\n    this.notifyTarget(e, type);\n    if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    // find current target in composed path\n    var index = composedPath.indexOf(e.currentTarget);\n    // bubbling phase\n    e.eventPhase = e.BUBBLING_PHASE;\n    for (var i = index + 1; i < composedPath.length; i++) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n  };\n  EventService.prototype.propagationPath = function (target) {\n    var propagationPath = [target];\n    var canvas = this.rootTarget.defaultView || null;\n    if (canvas && canvas === target) {\n      propagationPath.unshift(canvas.document);\n      return propagationPath;\n    }\n    for (var i = 0; i < PROPAGATION_LIMIT && target !== this.rootTarget; i++) {\n      // if (Node.isNode(target) && !target.parentNode) {\n      //   throw new Error('Cannot find propagation path to disconnected target');\n      // }\n      if (Node.isNode(target) && target.parentNode) {\n        // [target, parent, parent, root]\n        propagationPath.push(target.parentNode);\n        target = target.parentNode;\n      }\n    }\n    if (canvas) {\n      // @ts-ignore\n      propagationPath.push(canvas);\n    }\n    return propagationPath;\n  };\n  EventService.prototype.hitTest = function (position) {\n    var viewportX = position.viewportX,\n      viewportY = position.viewportY;\n    var _a = this.context.config,\n      width = _a.width,\n      height = _a.height,\n      disableHitTesting = _a.disableHitTesting;\n    // outside canvas\n    if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n      return null;\n    }\n    return !disableHitTesting && this.pickHandler(position) || this.rootTarget ||\n    // return Document\n    null;\n  };\n  /**\n   * whether the native event trigger came from Canvas,\n   * should account for HTML shape\n   */\n  EventService.prototype.isNativeEventFromCanvas = function (event) {\n    var _a;\n    var $el = this.context.contextService.getDomElement();\n    var target = (_a = event.nativeEvent) === null || _a === void 0 ? void 0 : _a.target;\n    if (target) {\n      // from <canvas>\n      if (target === $el) {\n        return true;\n      }\n      // from <svg>\n      if ($el && $el.contains) {\n        return $el.contains(target);\n      }\n    }\n    if (event.nativeEvent.composedPath) {\n      return event.nativeEvent.composedPath().indexOf($el) > -1;\n    }\n    // account for Touch\n    return false;\n  };\n  /**\n   * Find HTML from composed path in native UI event.\n   */\n  EventService.prototype.getExistedHTML = function (event) {\n    var e_1, _a;\n    if (event.nativeEvent.composedPath) {\n      try {\n        for (var _b = __values(event.nativeEvent.composedPath()), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var eventTarget = _c.value;\n          var existed = this.nativeHTMLMap.get(eventTarget);\n          if (existed) {\n            return existed;\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n    return null;\n  };\n  EventService.prototype.pickTarget = function (event) {\n    return this.hitTest({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      viewportX: event.viewportX,\n      viewportY: event.viewportY,\n      x: event.canvasX,\n      y: event.canvasY\n    });\n  };\n  EventService.prototype.createPointerEvent = function (from, type, target, fallbackTarget) {\n    var event = this.allocateEvent(FederatedPointerEvent);\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    var existedHTML = this.getExistedHTML(event);\n    event.target = target !== null && target !== void 0 ? target : existedHTML || this.isNativeEventFromCanvas(event) && this.pickTarget(event) || fallbackTarget;\n    if (typeof type === 'string') {\n      event.type = type;\n    }\n    return event;\n  };\n  EventService.prototype.createWheelEvent = function (from) {\n    var event = this.allocateEvent(FederatedWheelEvent);\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    var existedHTML = this.getExistedHTML(event);\n    event.target = existedHTML || this.isNativeEventFromCanvas(event) && this.pickTarget(event);\n    return event;\n  };\n  EventService.prototype.trackingData = function (id) {\n    if (!this.mappingState.trackingData[id]) {\n      this.mappingState.trackingData[id] = {\n        pressTargetsByButton: {},\n        clicksByButton: {},\n        overTarget: null\n      };\n    }\n    return this.mappingState.trackingData[id];\n  };\n  EventService.prototype.cloneWheelEvent = function (from) {\n    var event = this.allocateEvent(FederatedWheelEvent);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = from.type;\n    return event;\n  };\n  EventService.prototype.clonePointerEvent = function (from, type) {\n    var event = this.allocateEvent(FederatedPointerEvent);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = type !== null && type !== void 0 ? type : event.type;\n    return event;\n  };\n  EventService.prototype.copyPointerData = function (from, to) {\n    // if (\n    //   !(\n    //     from instanceof FederatedPointerEvent &&\n    //     to instanceof FederatedPointerEvent\n    //   )\n    // )\n    //   return;\n    to.pointerId = from.pointerId;\n    to.width = from.width;\n    to.height = from.height;\n    to.isPrimary = from.isPrimary;\n    to.pointerType = from.pointerType;\n    to.pressure = from.pressure;\n    to.tangentialPressure = from.tangentialPressure;\n    to.tiltX = from.tiltX;\n    to.tiltY = from.tiltY;\n    to.twist = from.twist;\n  };\n  EventService.prototype.copyMouseData = function (from, to) {\n    // if (\n    //   !(\n    //     from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent\n    //   )\n    // )\n    //   return;\n    to.altKey = from.altKey;\n    to.button = from.button;\n    to.buttons = from.buttons;\n    to.ctrlKey = from.ctrlKey;\n    to.metaKey = from.metaKey;\n    to.shiftKey = from.shiftKey;\n    to.client.copyFrom(from.client);\n    to.movement.copyFrom(from.movement);\n    to.canvas.copyFrom(from.canvas);\n    to.screen.copyFrom(from.screen);\n    to.global.copyFrom(from.global);\n    to.offset.copyFrom(from.offset);\n  };\n  EventService.prototype.copyWheelData = function (from, to) {\n    to.deltaMode = from.deltaMode;\n    to.deltaX = from.deltaX;\n    to.deltaY = from.deltaY;\n    to.deltaZ = from.deltaZ;\n  };\n  EventService.prototype.copyData = function (from, to) {\n    to.isTrusted = from.isTrusted;\n    to.timeStamp = clock.now();\n    to.type = from.type;\n    to.detail = from.detail;\n    to.view = from.view;\n    to.page.copyFrom(from.page);\n    to.viewport.copyFrom(from.viewport);\n  };\n  EventService.prototype.allocateEvent = function (constructor) {\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    // @ts-ignore\n    var event = this.eventPool.get(constructor).pop() || new constructor(this);\n    event.eventPhase = event.NONE;\n    event.currentTarget = null;\n    event.path = [];\n    event.target = null;\n    return event;\n  };\n  EventService.prototype.freeEvent = function (event) {\n    if (event.manager !== this) throw new Error('It is illegal to free an event not managed by this EventBoundary!');\n    var constructor = event.constructor;\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    // @ts-ignore\n    this.eventPool.get(constructor).push(event);\n  };\n  EventService.prototype.notifyTarget = function (e, type) {\n    type = type !== null && type !== void 0 ? type : e.type;\n    var key = e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET ? \"\".concat(type, \"capture\") : type;\n    this.notifyListeners(e, key);\n    if (e.eventPhase === e.AT_TARGET) {\n      this.notifyListeners(e, type);\n    }\n  };\n  EventService.prototype.notifyListeners = function (e, type) {\n    // hack EventEmitter, stops if the `propagationImmediatelyStopped` flag is set\n    // @ts-ignore\n    var emitter = e.currentTarget.emitter;\n    // @ts-ignore\n    var listeners = emitter._events[type];\n    if (!listeners) return;\n    if ('fn' in listeners) {\n      if (listeners.once) {\n        emitter.removeListener(type, listeners.fn, undefined, true);\n      }\n      listeners.fn.call(e.currentTarget || listeners.context, e);\n      // listeners.fn.call(listeners.context, e);\n    } else {\n      for (var i = 0; i < listeners.length && !e.propagationImmediatelyStopped; i++) {\n        if (listeners[i].once) {\n          emitter.removeListener(type, listeners[i].fn, undefined, true);\n        }\n        listeners[i].fn.call(e.currentTarget || listeners[i].context, e);\n        // listeners[i].fn.call(listeners[i].context, e);\n      }\n    }\n  };\n  /**\n   * some detached nodes may exist in propagation path, need to skip them\n   */\n  EventService.prototype.findMountedTarget = function (propagationPath) {\n    if (!propagationPath) {\n      return null;\n    }\n    var currentTarget = propagationPath[propagationPath.length - 1];\n    for (var i = propagationPath.length - 2; i >= 0; i--) {\n      var target = propagationPath[i];\n      if (target === this.rootTarget || Node.isNode(target) && target.parentNode === currentTarget) {\n        currentTarget = propagationPath[i];\n      } else {\n        break;\n      }\n    }\n    return currentTarget;\n  };\n  EventService.prototype.getCursor = function (target) {\n    var tmp = target;\n    while (tmp) {\n      var cursor = isElement(tmp) && tmp.getAttribute('cursor');\n      if (cursor) {\n        return cursor;\n      }\n      tmp = Node.isNode(tmp) && tmp.parentNode;\n    }\n  };\n  return EventService;\n}();\n\n/**\n * used in following scenes:\n * - g `ctx.measureText`\n * - g-plugin-canvas-picker `ctx.isPointInPath`\n * - g-plugin-device-renderer `ctx.createLinearGradient` and generate texture\n *\n * @see https://blog.scottlogic.com/2020/03/19/offscreen-canvas.html\n */\nvar OffscreenCanvasCreator = /** @class */function () {\n  function OffscreenCanvasCreator() {}\n  OffscreenCanvasCreator.prototype.getOrCreateCanvas = function (offscreenCanvas, contextAttributes) {\n    if (this.canvas) {\n      return this.canvas;\n    }\n    // user-defined offscreen canvas\n    if (offscreenCanvas || runtime.offscreenCanvas) {\n      this.canvas = offscreenCanvas || runtime.offscreenCanvas;\n      this.context = this.canvas.getContext('2d', __assign({\n        willReadFrequently: true\n      }, contextAttributes));\n    } else {\n      try {\n        // OffscreenCanvas2D measureText can be up to 40% faster.\n        this.canvas = new window.OffscreenCanvas(0, 0);\n        this.context = this.canvas.getContext('2d', __assign({\n          willReadFrequently: true\n        }, contextAttributes));\n        if (!this.context || !this.context.measureText) {\n          this.canvas = document.createElement('canvas');\n          this.context = this.canvas.getContext('2d');\n        }\n      } catch (ex) {\n        this.canvas = document.createElement('canvas');\n        this.context = this.canvas.getContext('2d', __assign({\n          willReadFrequently: true\n        }, contextAttributes));\n      }\n    }\n    this.canvas.width = 10;\n    this.canvas.height = 10;\n    return this.canvas;\n  };\n  OffscreenCanvasCreator.prototype.getOrCreateContext = function (offscreenCanvas, contextAttributes) {\n    if (this.context) {\n      return this.context;\n    }\n    this.getOrCreateCanvas(offscreenCanvas, contextAttributes);\n    return this.context;\n  };\n  return OffscreenCanvasCreator;\n}();\n\n/**\n * why we need re-render\n */\nvar RenderReason;\n(function (RenderReason) {\n  RenderReason[RenderReason[\"CAMERA_CHANGED\"] = 0] = \"CAMERA_CHANGED\";\n  RenderReason[RenderReason[\"DISPLAY_OBJECT_CHANGED\"] = 1] = \"DISPLAY_OBJECT_CHANGED\";\n  RenderReason[RenderReason[\"NONE\"] = 2] = \"NONE\";\n})(RenderReason || (RenderReason = {}));\n\n/**\n * Use frame renderer implemented by `g-canvas/svg/webgl`, in every frame we do followings:\n * * update & merge dirty rectangles\n * * begin frame\n * * filter by visible\n * * sort by z-index in scene graph\n * * culling with strategies registered in `g-canvas/webgl`\n * * end frame\n */\nvar RenderingService = /** @class */function () {\n  function RenderingService(globalRuntime, context) {\n    this.globalRuntime = globalRuntime;\n    this.context = context;\n    this.inited = false;\n    this.stats = {\n      /**\n       * total display objects in scenegraph\n       */\n      total: 0,\n      /**\n       * number of display objects need to render in current frame\n       */\n      rendered: 0\n    };\n    this.zIndexCounter = 0;\n    this.hooks = {\n      /**\n       * called before any frame rendered\n       */\n      init: new SyncHook(),\n      initAsync: new AsyncParallelHook(),\n      /**\n       * only dirty object which has sth changed will be rendered\n       */\n      dirtycheck: new SyncWaterfallHook(),\n      /**\n       * do culling\n       */\n      cull: new SyncWaterfallHook(),\n      /**\n       * called at beginning of each frame, won't get called if nothing to re-render\n       */\n      beginFrame: new SyncHook(),\n      /**\n       * called before every dirty object get rendered\n       */\n      beforeRender: new SyncHook(),\n      /**\n       * called when every dirty object rendering even it's culled\n       */\n      render: new SyncHook(),\n      /**\n       * called after every dirty object get rendered\n       */\n      afterRender: new SyncHook(),\n      endFrame: new SyncHook(),\n      destroy: new SyncHook(),\n      /**\n       * use async but faster method such as GPU-based picking in `g-plugin-device-renderer`\n       */\n      pick: new AsyncSeriesWaterfallHook(),\n      /**\n       * Unsafe but sync version of pick.\n       */\n      pickSync: new SyncWaterfallHook(),\n      /**\n       * used in event system\n       */\n      pointerDown: new SyncHook(),\n      pointerUp: new SyncHook(),\n      pointerMove: new SyncHook(),\n      pointerOut: new SyncHook(),\n      pointerOver: new SyncHook(),\n      pointerWheel: new SyncHook(),\n      pointerCancel: new SyncHook(),\n      click: new SyncHook()\n    };\n  }\n  RenderingService.prototype.init = function (callback) {\n    var _this = this;\n    var context = __assign(__assign({}, this.globalRuntime), this.context);\n    // register rendering plugins\n    this.context.renderingPlugins.forEach(function (plugin) {\n      plugin.apply(context, _this.globalRuntime);\n    });\n    this.hooks.init.call();\n    if (this.hooks.initAsync.getCallbacksNum() === 0) {\n      this.inited = true;\n      callback();\n    } else {\n      this.hooks.initAsync.promise().then(function () {\n        _this.inited = true;\n        callback();\n      });\n    }\n  };\n  RenderingService.prototype.getStats = function () {\n    return this.stats;\n  };\n  /**\n   * Meet the following conditions:\n   * * disable DirtyRectangleRendering\n   * * camera changed\n   */\n  RenderingService.prototype.disableDirtyRectangleRendering = function () {\n    var renderer = this.context.config.renderer;\n    var enableDirtyRectangleRendering = renderer.getConfig().enableDirtyRectangleRendering;\n    return !enableDirtyRectangleRendering || this.context.renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n  };\n  RenderingService.prototype.render = function (canvasConfig, rerenderCallback) {\n    var _this = this;\n    this.stats.total = 0;\n    this.stats.rendered = 0;\n    this.zIndexCounter = 0;\n    var renderingContext = this.context.renderingContext;\n    this.globalRuntime.sceneGraphService.syncHierarchy(renderingContext.root);\n    this.globalRuntime.sceneGraphService.triggerPendingEvents();\n    if (renderingContext.renderReasons.size && this.inited) {\n      // @ts-ignore\n      renderingContext.dirtyRectangleRenderingDisabled = this.disableDirtyRectangleRendering();\n      var onlyCameraChanged = renderingContext.renderReasons.size === 1 && renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n      var shouldTriggerRenderHooks = !canvasConfig.disableRenderHooks || !(canvasConfig.disableRenderHooks && onlyCameraChanged);\n      if (shouldTriggerRenderHooks) {\n        this.renderDisplayObject(renderingContext.root, canvasConfig, renderingContext);\n      }\n      this.hooks.beginFrame.call();\n      if (shouldTriggerRenderHooks) {\n        renderingContext.renderListCurrentFrame.forEach(function (object) {\n          _this.hooks.beforeRender.call(object);\n          _this.hooks.render.call(object);\n          _this.hooks.afterRender.call(object);\n        });\n      }\n      this.hooks.endFrame.call();\n      renderingContext.renderListCurrentFrame = [];\n      renderingContext.renderReasons.clear();\n      rerenderCallback();\n    }\n    // console.log('stats', this.stats);\n  };\n  RenderingService.prototype.renderDisplayObject = function (displayObject, canvasConfig, renderingContext) {\n    var _this = this;\n    var _a = canvasConfig.renderer.getConfig(),\n      enableDirtyCheck = _a.enableDirtyCheck,\n      enableCulling = _a.enableCulling;\n    // recalc style values\n    if (this.globalRuntime.enableCSSParsing) {\n      this.globalRuntime.styleValueRegistry.recalc(displayObject);\n    }\n    // TODO: relayout\n    // dirtycheck first\n    var renderable = displayObject.renderable;\n    var objectChanged = enableDirtyCheck ?\n    // @ts-ignore\n    renderable.dirty || renderingContext.dirtyRectangleRenderingDisabled ? displayObject : null : displayObject;\n    if (objectChanged) {\n      var objectToRender = enableCulling ? this.hooks.cull.call(objectChanged, this.context.camera) : objectChanged;\n      if (objectToRender) {\n        this.stats.rendered++;\n        renderingContext.renderListCurrentFrame.push(objectToRender);\n      }\n    }\n    displayObject.renderable.dirty = false;\n    displayObject.sortable.renderOrder = this.zIndexCounter++;\n    this.stats.total++;\n    // sort is very expensive, use cached result if possible\n    var sortable = displayObject.sortable;\n    if (sortable.dirty) {\n      this.sort(displayObject, sortable);\n      sortable.dirty = false;\n      sortable.dirtyChildren = [];\n      sortable.dirtyReason = undefined;\n    }\n    // recursive rendering its children\n    (sortable.sorted || displayObject.childNodes).forEach(function (child) {\n      _this.renderDisplayObject(child, canvasConfig, renderingContext);\n    });\n  };\n  RenderingService.prototype.sort = function (displayObject, sortable) {\n    if (sortable.sorted && sortable.dirtyReason !== SortReason.Z_INDEX_CHANGED) {\n      // avoid re-sorting the whole children list\n      sortable.dirtyChildren.forEach(function (child) {\n        var index = displayObject.childNodes.indexOf(child);\n        if (index === -1) {\n          // remove from sorted list\n          var index_1 = sortable.sorted.indexOf(child);\n          if (index_1 >= 0) {\n            sortable.sorted.splice(index_1, 1);\n          }\n        } else {\n          if (sortable.sorted.length === 0) {\n            sortable.sorted.push(child);\n          } else {\n            var index_2 = sortedIndex(sortable.sorted, child);\n            sortable.sorted.splice(index_2, 0, child);\n          }\n        }\n      });\n    } else {\n      sortable.sorted = displayObject.childNodes.slice().sort(sortByZIndex);\n    }\n  };\n  RenderingService.prototype.destroy = function () {\n    this.inited = false;\n    this.hooks.destroy.call();\n    this.globalRuntime.sceneGraphService.clearPendingEvents();\n  };\n  RenderingService.prototype.dirtify = function () {\n    // need re-render\n    this.context.renderingContext.renderReasons.add(RenderReason.DISPLAY_OBJECT_CHANGED);\n  };\n  return RenderingService;\n}();\nvar ATTRIBUTE_REGEXP = /\\[\\s*(.*)=(.*)\\s*\\]/;\n/**\n * support the following DOM API:\n * * getElementById\n * * getElementsByClassName\n * * getElementsByName\n * * getElementsByTag\n * * querySelector\n * * querySelectorAll\n */\nvar DefaultSceneGraphSelector = /** @class */function () {\n  function DefaultSceneGraphSelector() {}\n  DefaultSceneGraphSelector.prototype.selectOne = function (query, root) {\n    var _this = this;\n    if (query.startsWith('.')) {\n      return root.find(function (node) {\n        // return !node.shadow && node.id === query.substring(1);\n        return ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this.getIdOrClassname(query)) > -1;\n      });\n    } else if (query.startsWith('#')) {\n      // getElementById('id')\n      return root.find(function (node) {\n        // return !node.shadow && node.id === query.substring(1);\n        return node.id === _this.getIdOrClassname(query);\n      });\n    } else if (query.startsWith('[')) {\n      var _a = this.getAttribute(query),\n        name_1 = _a.name,\n        value_1 = _a.value;\n      if (name_1) {\n        // getElementByName();\n        return root.find(function (node) {\n          return root !== node && (name_1 === 'name' ? node.name === value_1 : _this.attributeToString(node, name_1) === value_1);\n        });\n      } else {\n        return null;\n      }\n    } else {\n      // getElementsByTag('circle');\n      return root.find(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  };\n  DefaultSceneGraphSelector.prototype.selectAll = function (query, root) {\n    var _this = this;\n    // only support `[name=\"${name}\"]` `.className` `#id`\n    if (query.startsWith('.')) {\n      // getElementsByClassName('className');\n      // should not include itself\n      return root.findAll(function (node) {\n        return root !== node && ((node === null || node === void 0 ? void 0 : node.classList) || []).indexOf(_this.getIdOrClassname(query)) > -1;\n      });\n    } else if (query.startsWith('#')) {\n      return root.findAll(function (node) {\n        return root !== node && node.id === _this.getIdOrClassname(query);\n      });\n    } else if (query.startsWith('[')) {\n      var _a = this.getAttribute(query),\n        name_2 = _a.name,\n        value_2 = _a.value;\n      if (name_2) {\n        // getElementsByName();\n        return root.findAll(function (node) {\n          return root !== node && (name_2 === 'name' ? node.name === value_2 : _this.attributeToString(node, name_2) === value_2);\n        });\n      } else {\n        return [];\n      }\n    } else {\n      // getElementsByTag('circle');\n      return root.findAll(function (node) {\n        return root !== node && node.nodeName === query;\n      });\n    }\n  };\n  DefaultSceneGraphSelector.prototype.is = function (query, node) {\n    // a simple `matches` implementation\n    if (query.startsWith('.')) {\n      return node.className === this.getIdOrClassname(query);\n    } else if (query.startsWith('#')) {\n      return node.id === this.getIdOrClassname(query);\n    } else if (query.startsWith('[')) {\n      var _a = this.getAttribute(query),\n        name_3 = _a.name,\n        value = _a.value;\n      return name_3 === 'name' ? node.name === value : this.attributeToString(node, name_3) === value;\n    } else {\n      return node.nodeName === query;\n    }\n  };\n  DefaultSceneGraphSelector.prototype.getIdOrClassname = function (query) {\n    return query.substring(1);\n  };\n  DefaultSceneGraphSelector.prototype.getAttribute = function (query) {\n    var matches = query.match(ATTRIBUTE_REGEXP);\n    var name = '';\n    var value = '';\n    if (matches && matches.length > 2) {\n      name = matches[1].replace(/\"/g, '');\n      value = matches[2].replace(/\"/g, '');\n    }\n    return {\n      name: name,\n      value: value\n    };\n  };\n  DefaultSceneGraphSelector.prototype.attributeToString = function (node, name) {\n    if (!node.getAttribute) {\n      return '';\n    }\n    var value = node.getAttribute(name);\n    if (isNil(value)) {\n      return '';\n    }\n    if (value.toString) {\n      return value.toString();\n    }\n    return '';\n  };\n  return DefaultSceneGraphSelector;\n}();\nvar MutationEvent = /** @class */function (_super) {\n  __extends(MutationEvent, _super);\n  function MutationEvent(typeArg, relatedNode, prevValue, newValue, attrName, attrChange, prevParsedValue, newParsedValue) {\n    var _this = _super.call(this, null) || this;\n    _this.relatedNode = relatedNode;\n    _this.prevValue = prevValue;\n    _this.newValue = newValue;\n    _this.attrName = attrName;\n    _this.attrChange = attrChange;\n    _this.prevParsedValue = prevParsedValue;\n    _this.newParsedValue = newParsedValue;\n    _this.type = typeArg;\n    return _this;\n  }\n  MutationEvent.ADDITION = 2;\n  MutationEvent.MODIFICATION = 1;\n  MutationEvent.REMOVAL = 3;\n  return MutationEvent;\n}(FederatedEvent);\n\n/**\n * built-in events for element\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n *\n * TODO: use MutationObserver instead\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nvar ElementEvent;\n(function (ElementEvent) {\n  ElementEvent[\"REPARENT\"] = \"reparent\";\n  ElementEvent[\"DESTROY\"] = \"destroy\";\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttrModified\n   */\n  ElementEvent[\"ATTR_MODIFIED\"] = \"DOMAttrModified\";\n  /**\n   * it has been inserted\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted\n   */\n  ElementEvent[\"INSERTED\"] = \"DOMNodeInserted\";\n  /**\n   * it is being removed\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved\n   */\n  ElementEvent[\"REMOVED\"] = \"removed\";\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnodeinsertedintodocument\n   */\n  ElementEvent[\"MOUNTED\"] = \"DOMNodeInsertedIntoDocument\";\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnoderemovedfromdocument\n   */\n  ElementEvent[\"UNMOUNTED\"] = \"DOMNodeRemovedFromDocument\";\n  ElementEvent[\"BOUNDS_CHANGED\"] = \"bounds-changed\";\n  ElementEvent[\"CULLED\"] = \"culled\";\n})(ElementEvent || (ElementEvent = {}));\nfunction markRenderableDirty(e) {\n  var renderable = e.renderable;\n  if (renderable) {\n    renderable.renderBoundsDirty = true;\n    renderable.boundsDirty = true;\n  }\n}\nvar reparentEvent = new MutationEvent(ElementEvent.REPARENT, null, '', '', '', 0, '', '');\n/**\n * update transform in scene graph\n *\n * @see https://community.khronos.org/t/scene-graphs/50542/7\n */\nvar DefaultSceneGraphService = /** @class */function () {\n  function DefaultSceneGraphService(runtime) {\n    var _this = this;\n    this.runtime = runtime;\n    this.pendingEvents = [];\n    this.boundsChangedEvent = new CustomEvent(ElementEvent.BOUNDS_CHANGED);\n    /**\n     * rotate in world space\n     */\n    this.rotate = function () {\n      var parentInvertRotation = quat$1.create();\n      return function (element, degrees, y, z) {\n        if (y === void 0) {\n          y = 0;\n        }\n        if (z === void 0) {\n          z = 0;\n        }\n        if (typeof degrees === 'number') {\n          degrees = vec3.fromValues(degrees, y, z);\n        }\n        var transform = element.transformable;\n        if (element.parentNode === null || !element.parentNode.transformable) {\n          _this.rotateLocal(element, degrees);\n        } else {\n          var rotation = quat$1.create();\n          quat$1.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n          var rot = _this.getRotation(element);\n          var parentRot = _this.getRotation(element.parentNode);\n          quat$1.copy(parentInvertRotation, parentRot);\n          quat$1.invert(parentInvertRotation, parentInvertRotation);\n          quat$1.multiply(rotation, parentInvertRotation, rotation);\n          quat$1.multiply(transform.localRotation, rotation, rot);\n          quat$1.normalize(transform.localRotation, transform.localRotation);\n          _this.dirtifyLocal(element, transform);\n        }\n      };\n    }();\n    /**\n     * rotate in local space\n     * @see @see https://docs.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmquaternionrotationrollpitchyaw\n     */\n    this.rotateLocal = function () {\n      var rotation = quat$1.create();\n      return function (element, degrees, y, z) {\n        if (y === void 0) {\n          y = 0;\n        }\n        if (z === void 0) {\n          z = 0;\n        }\n        if (typeof degrees === 'number') {\n          degrees = vec3.fromValues(degrees, y, z);\n        }\n        var transform = element.transformable;\n        quat$1.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n        quat$1.mul(transform.localRotation, transform.localRotation, rotation);\n        _this.dirtifyLocal(element, transform);\n      };\n    }();\n    /**\n     * set euler angles(degrees) in world space\n     */\n    this.setEulerAngles = function () {\n      var invParentRot = quat$1.create();\n      return function (element, degrees, y, z) {\n        if (y === void 0) {\n          y = 0;\n        }\n        if (z === void 0) {\n          z = 0;\n        }\n        if (typeof degrees === 'number') {\n          degrees = vec3.fromValues(degrees, y, z);\n        }\n        var transform = element.transformable;\n        if (element.parentNode === null || !element.parentNode.transformable) {\n          _this.setLocalEulerAngles(element, degrees);\n        } else {\n          quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n          var parentRotation = _this.getRotation(element.parentNode);\n          quat$1.copy(invParentRot, quat$1.invert(quat$1.create(), parentRotation));\n          quat$1.mul(transform.localRotation, transform.localRotation, invParentRot);\n          _this.dirtifyLocal(element, transform);\n        }\n      };\n    }();\n    /**\n     * translate in local space\n     *\n     * @example\n     * ```\n     * translateLocal(x, y, z)\n     * translateLocal(vec3(x, y, z))\n     * ```\n     */\n    this.translateLocal = function () {\n      return function (element, translation, y, z) {\n        if (y === void 0) {\n          y = 0;\n        }\n        if (z === void 0) {\n          z = 0;\n        }\n        if (typeof translation === 'number') {\n          translation = vec3.fromValues(translation, y, z);\n        }\n        var transform = element.transformable;\n        if (vec3.equals(translation, vec3.create())) {\n          return;\n        }\n        vec3.transformQuat(translation, translation, transform.localRotation);\n        vec3.add(transform.localPosition, transform.localPosition, translation);\n        _this.dirtifyLocal(element, transform);\n      };\n    }();\n    /**\n     * move to position in world space\n     *\n     * 对应 g 原版的 move/moveTo\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L684-L689\n     */\n    this.setPosition = function () {\n      var parentInvertMatrix = mat4.create();\n      var tmpPosition = vec3.create();\n      return function (element, position) {\n        var transform = element.transformable;\n        tmpPosition[0] = position[0];\n        tmpPosition[1] = position[1];\n        tmpPosition[2] = position[2] || 0;\n        if (vec3.equals(_this.getPosition(element), tmpPosition)) {\n          return;\n        }\n        vec3.copy(transform.position, tmpPosition);\n        if (element.parentNode === null || !element.parentNode.transformable) {\n          vec3.copy(transform.localPosition, tmpPosition);\n        } else {\n          var parentTransform = element.parentNode.transformable;\n          mat4.copy(parentInvertMatrix, parentTransform.worldTransform);\n          mat4.invert(parentInvertMatrix, parentInvertMatrix);\n          vec3.transformMat4(transform.localPosition, tmpPosition, parentInvertMatrix);\n        }\n        _this.dirtifyLocal(element, transform);\n      };\n    }();\n    /**\n     * move to position in local space\n     */\n    this.setLocalPosition = function () {\n      var tmpPosition = vec3.create();\n      return function (element, position) {\n        var transform = element.transformable;\n        tmpPosition[0] = position[0];\n        tmpPosition[1] = position[1];\n        tmpPosition[2] = position[2] || 0;\n        if (vec3.equals(transform.localPosition, tmpPosition)) {\n          return;\n        }\n        vec3.copy(transform.localPosition, tmpPosition);\n        _this.dirtifyLocal(element, transform);\n      };\n    }();\n    /**\n     * translate in world space\n     *\n     * @example\n     * ```\n     * translate(x, y, z)\n     * translate(vec3(x, y, z))\n     * ```\n     *\n     * 对应 g 原版的 translate 2D\n     * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L665-L676\n     */\n    this.translate = function () {\n      var zeroVec3 = vec3.create();\n      var tmpVec3 = vec3.create();\n      var tr = vec3.create();\n      return function (element, translation, y, z) {\n        if (y === void 0) {\n          y = 0;\n        }\n        if (z === void 0) {\n          z = 0;\n        }\n        if (typeof translation === 'number') {\n          translation = vec3.set(tmpVec3, translation, y, z);\n        }\n        if (vec3.equals(translation, zeroVec3)) {\n          return;\n        }\n        vec3.add(tr, _this.getPosition(element), translation);\n        _this.setPosition(element, tr);\n      };\n    }();\n    this.setRotation = function () {\n      var parentInvertRotation = quat$1.create();\n      return function (element, rotation, y, z, w) {\n        var transform = element.transformable;\n        if (typeof rotation === 'number') {\n          rotation = quat$1.fromValues(rotation, y, z, w);\n        }\n        if (element.parentNode === null || !element.parentNode.transformable) {\n          _this.setLocalRotation(element, rotation);\n        } else {\n          var parentRot = _this.getRotation(element.parentNode);\n          quat$1.copy(parentInvertRotation, parentRot);\n          quat$1.invert(parentInvertRotation, parentInvertRotation);\n          quat$1.multiply(transform.localRotation, parentInvertRotation, rotation);\n          quat$1.normalize(transform.localRotation, transform.localRotation);\n          _this.dirtifyLocal(element, transform);\n        }\n      };\n    };\n    this.displayObjectDependencyMap = new WeakMap();\n    this.calcLocalTransform = function () {\n      var tmpMat = mat4.create();\n      var tmpPosition = vec3.create();\n      var tmpQuat = quat$1.fromValues(0, 0, 0, 1);\n      return function (transform) {\n        var hasSkew = transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0;\n        if (hasSkew) {\n          mat4.fromRotationTranslationScaleOrigin(transform.localTransform, transform.localRotation, transform.localPosition, vec3.fromValues(1, 1, 1), transform.origin);\n          // apply skew2D\n          if (transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0) {\n            var tmpMat4 = mat4.identity(tmpMat);\n            tmpMat4[4] = Math.tan(transform.localSkew[0]);\n            tmpMat4[1] = Math.tan(transform.localSkew[1]);\n            mat4.multiply(transform.localTransform, transform.localTransform, tmpMat4);\n          }\n          var scaling = mat4.fromRotationTranslationScaleOrigin(tmpMat, tmpQuat, tmpPosition, transform.localScale, transform.origin);\n          mat4.multiply(transform.localTransform, transform.localTransform, scaling);\n        } else {\n          // @see https://github.com/mattdesl/css-mat4/blob/master/index.js\n          mat4.fromRotationTranslationScaleOrigin(transform.localTransform, transform.localRotation, transform.localPosition, transform.localScale, transform.origin);\n        }\n      };\n    }();\n  }\n  DefaultSceneGraphService.prototype.matches = function (query, root) {\n    return this.runtime.sceneGraphSelector.is(query, root);\n  };\n  DefaultSceneGraphService.prototype.querySelector = function (query, root) {\n    return this.runtime.sceneGraphSelector.selectOne(query, root);\n  };\n  DefaultSceneGraphService.prototype.querySelectorAll = function (query, root) {\n    return this.runtime.sceneGraphSelector.selectAll(query, root);\n    // .filter((node) => !node.shadow);\n  };\n  DefaultSceneGraphService.prototype.attach = function (child, parent, index) {\n    var _a, _b;\n    var detached = false;\n    if (child.parentNode) {\n      detached = child.parentNode !== parent;\n      this.detach(child);\n    }\n    child.parentNode = parent;\n    if (!isNil(index)) {\n      child.parentNode.childNodes.splice(index, 0, child);\n    } else {\n      child.parentNode.childNodes.push(child);\n    }\n    // parent needs re-sort\n    var sortable = parent.sortable;\n    if (((_a = sortable === null || sortable === void 0 ? void 0 : sortable.sorted) === null || _a === void 0 ? void 0 : _a.length) || ((_b = child.style) === null || _b === void 0 ? void 0 : _b.zIndex)) {\n      if (sortable.dirtyChildren.indexOf(child) === -1) {\n        sortable.dirtyChildren.push(child);\n      }\n      // if (sortable) {\n      // only child has z-Index\n      sortable.dirty = true;\n      sortable.dirtyReason = SortReason.ADDED;\n    }\n    // this.updateGraphDepth(child);\n    var transform = child.transformable;\n    if (transform) {\n      this.dirtifyWorld(child, transform);\n    }\n    if (transform.frozen) {\n      this.unfreezeParentToRoot(child);\n    }\n    if (detached) {\n      child.dispatchEvent(reparentEvent);\n    }\n  };\n  DefaultSceneGraphService.prototype.detach = function (child) {\n    var _a, _b;\n    if (child.parentNode) {\n      var transform = child.transformable;\n      // if (transform) {\n      //   const worldTransform = this.getWorldTransform(child, transform);\n      //   mat4.getScaling(transform.localScale, worldTransform);\n      //   mat4.getTranslation(transform.localPosition, worldTransform);\n      //   mat4.getRotation(transform.localRotation, worldTransform);\n      //   transform.localDirtyFlag = true;\n      // }\n      // parent needs re-sort\n      var sortable = child.parentNode.sortable;\n      // if (sortable) {\n      if (((_a = sortable === null || sortable === void 0 ? void 0 : sortable.sorted) === null || _a === void 0 ? void 0 : _a.length) || ((_b = child.style) === null || _b === void 0 ? void 0 : _b.zIndex)) {\n        if (sortable.dirtyChildren.indexOf(child) === -1) {\n          sortable.dirtyChildren.push(child);\n        }\n        sortable.dirty = true;\n        sortable.dirtyReason = SortReason.REMOVED;\n      }\n      var index = child.parentNode.childNodes.indexOf(child);\n      if (index > -1) {\n        child.parentNode.childNodes.splice(index, 1);\n      }\n      if (transform) {\n        this.dirtifyWorld(child, transform);\n      }\n      child.parentNode = null;\n    }\n  };\n  DefaultSceneGraphService.prototype.getOrigin = function (element) {\n    return element.transformable.origin;\n  };\n  /**\n   * same as pivot in Pixi.js\n   *\n   * @see https://stackoverflow.com/questions/40748452/how-to-change-css-transform-origin-but-preserve-transformation\n   */\n  DefaultSceneGraphService.prototype.setOrigin = function (element, origin, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    if (typeof origin === 'number') {\n      origin = [origin, y, z];\n    }\n    var transform = element.transformable;\n    if (origin[0] === transform.origin[0] && origin[1] === transform.origin[1] && origin[2] === transform.origin[2]) {\n      return;\n    }\n    var originVec = transform.origin;\n    // const delta = vec3.subtract(vec3.create(), origin, originVec);\n    // vec3.add(transform.localPosition, transform.localPosition, delta);\n    // update origin\n    originVec[0] = origin[0];\n    originVec[1] = origin[1];\n    originVec[2] = origin[2] || 0;\n    this.dirtifyLocal(element, transform);\n  };\n  /**\n   * set euler angles(degrees) in local space\n   */\n  DefaultSceneGraphService.prototype.setLocalEulerAngles = function (element, degrees, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n    var transform = element.transformable;\n    quat$1.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n    this.dirtifyLocal(element, transform);\n  };\n  /**\n   * scale in local space\n   */\n  DefaultSceneGraphService.prototype.scaleLocal = function (element, scaling) {\n    var transform = element.transformable;\n    vec3.multiply(transform.localScale, transform.localScale, vec3.fromValues(scaling[0], scaling[1], scaling[2] || 1));\n    this.dirtifyLocal(element, transform);\n  };\n  DefaultSceneGraphService.prototype.setLocalScale = function (element, scaling) {\n    var transform = element.transformable;\n    var updatedScaling = vec3.fromValues(scaling[0], scaling[1], scaling[2] || transform.localScale[2]);\n    if (vec3.equals(updatedScaling, transform.localScale)) {\n      return;\n    }\n    vec3.copy(transform.localScale, updatedScaling);\n    this.dirtifyLocal(element, transform);\n  };\n  DefaultSceneGraphService.prototype.setLocalRotation = function (element, rotation, y, z, w) {\n    if (typeof rotation === 'number') {\n      rotation = quat$1.fromValues(rotation, y, z, w);\n    }\n    var transform = element.transformable;\n    quat$1.copy(transform.localRotation, rotation);\n    this.dirtifyLocal(element, transform);\n  };\n  DefaultSceneGraphService.prototype.setLocalSkew = function (element, skew, y) {\n    if (typeof skew === 'number') {\n      skew = vec2.fromValues(skew, y);\n    }\n    var transform = element.transformable;\n    vec2.copy(transform.localSkew, skew);\n    this.dirtifyLocal(element, transform);\n  };\n  DefaultSceneGraphService.prototype.dirtifyLocal = function (element, transform) {\n    if (!transform.localDirtyFlag) {\n      transform.localDirtyFlag = true;\n      if (!transform.dirtyFlag) {\n        this.dirtifyWorld(element, transform);\n      }\n    }\n  };\n  DefaultSceneGraphService.prototype.dirtifyWorld = function (element, transform) {\n    if (!transform.dirtyFlag) {\n      this.unfreezeParentToRoot(element);\n    }\n    this.dirtifyWorldInternal(element, transform);\n    this.dirtifyToRoot(element, true);\n  };\n  DefaultSceneGraphService.prototype.triggerPendingEvents = function () {\n    var _this = this;\n    var set = new Set();\n    var trigger = function (element, detail) {\n      if (element.isConnected && !set.has(element.entity)) {\n        _this.boundsChangedEvent.detail = detail;\n        _this.boundsChangedEvent.target = element;\n        if (element.isMutationObserved) {\n          element.dispatchEvent(_this.boundsChangedEvent);\n        } else {\n          element.ownerDocument.defaultView.dispatchEvent(_this.boundsChangedEvent, true);\n        }\n        set.add(element.entity);\n      }\n    };\n    this.pendingEvents.forEach(function (_a) {\n      var _b = __read(_a, 2),\n        element = _b[0],\n        detail = _b[1];\n      if (detail.affectChildren) {\n        element.forEach(function (e) {\n          trigger(e, detail);\n        });\n      } else {\n        trigger(element, detail);\n      }\n    });\n    this.clearPendingEvents();\n    set.clear();\n  };\n  DefaultSceneGraphService.prototype.clearPendingEvents = function () {\n    this.pendingEvents = [];\n  };\n  DefaultSceneGraphService.prototype.dirtifyToRoot = function (element, affectChildren) {\n    if (affectChildren === void 0) {\n      affectChildren = false;\n    }\n    var p = element;\n    // only need to re-render itself\n    if (p.renderable) {\n      p.renderable.dirty = true;\n    }\n    while (p) {\n      markRenderableDirty(p);\n      p = p.parentNode;\n    }\n    if (affectChildren) {\n      element.forEach(function (e) {\n        markRenderableDirty(e);\n      });\n    }\n    // inform dependencies\n    this.informDependentDisplayObjects(element);\n    // reuse the same custom event\n    this.pendingEvents.push([element, {\n      affectChildren: affectChildren\n    }]);\n  };\n  DefaultSceneGraphService.prototype.updateDisplayObjectDependency = function (name, oldPath, newPath, object) {\n    // clear ref to old clip path\n    if (oldPath && oldPath !== newPath) {\n      var oldDependencyMap = this.displayObjectDependencyMap.get(oldPath);\n      if (oldDependencyMap && oldDependencyMap[name]) {\n        var index = oldDependencyMap[name].indexOf(object);\n        oldDependencyMap[name].splice(index, 1);\n      }\n    }\n    if (newPath) {\n      var newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      if (!newDependencyMap) {\n        this.displayObjectDependencyMap.set(newPath, {});\n        newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      }\n      if (!newDependencyMap[name]) {\n        newDependencyMap[name] = [];\n      }\n      newDependencyMap[name].push(object);\n    }\n  };\n  DefaultSceneGraphService.prototype.informDependentDisplayObjects = function (object) {\n    var _this = this;\n    var dependencyMap = this.displayObjectDependencyMap.get(object);\n    if (dependencyMap) {\n      Object.keys(dependencyMap).forEach(function (name) {\n        dependencyMap[name].forEach(function (target) {\n          _this.dirtifyToRoot(target, true);\n          target.dispatchEvent(new MutationEvent(ElementEvent.ATTR_MODIFIED, target, _this, _this, name, MutationEvent.MODIFICATION, _this, _this));\n          if (target.isCustomElement && target.isConnected) {\n            if (target.attributeChangedCallback) {\n              target.attributeChangedCallback(name, _this, _this);\n            }\n          }\n        });\n      });\n    }\n  };\n  DefaultSceneGraphService.prototype.getPosition = function (element) {\n    var transform = element.transformable;\n    return mat4.getTranslation(transform.position, this.getWorldTransform(element, transform));\n  };\n  DefaultSceneGraphService.prototype.getRotation = function (element) {\n    var transform = element.transformable;\n    return mat4.getRotation(transform.rotation, this.getWorldTransform(element, transform));\n  };\n  DefaultSceneGraphService.prototype.getScale = function (element) {\n    var transform = element.transformable;\n    return mat4.getScaling(transform.scaling, this.getWorldTransform(element, transform));\n  };\n  DefaultSceneGraphService.prototype.getWorldTransform = function (element, transform) {\n    if (transform === void 0) {\n      transform = element.transformable;\n    }\n    if (!transform.localDirtyFlag && !transform.dirtyFlag) {\n      return transform.worldTransform;\n    }\n    if (element.parentNode && element.parentNode.transformable) {\n      this.getWorldTransform(element.parentNode);\n    }\n    this.sync(element, transform);\n    return transform.worldTransform;\n  };\n  DefaultSceneGraphService.prototype.getLocalPosition = function (element) {\n    return element.transformable.localPosition;\n  };\n  DefaultSceneGraphService.prototype.getLocalRotation = function (element) {\n    return element.transformable.localRotation;\n  };\n  DefaultSceneGraphService.prototype.getLocalScale = function (element) {\n    return element.transformable.localScale;\n  };\n  DefaultSceneGraphService.prototype.getLocalSkew = function (element) {\n    return element.transformable.localSkew;\n  };\n  DefaultSceneGraphService.prototype.getLocalTransform = function (element) {\n    var transform = element.transformable;\n    if (transform.localDirtyFlag) {\n      this.calcLocalTransform(transform);\n      transform.localDirtyFlag = false;\n    }\n    return transform.localTransform;\n  };\n  DefaultSceneGraphService.prototype.setLocalTransform = function (element, transform) {\n    var t = mat4.getTranslation(vec3.create(), transform);\n    var r = mat4.getRotation(quat$1.create(), transform);\n    var s = mat4.getScaling(vec3.create(), transform);\n    this.setLocalScale(element, s);\n    this.setLocalPosition(element, t);\n    this.setLocalRotation(element, r);\n  };\n  DefaultSceneGraphService.prototype.resetLocalTransform = function (element) {\n    this.setLocalScale(element, [1, 1, 1]);\n    this.setLocalPosition(element, [0, 0, 0]);\n    this.setLocalEulerAngles(element, [0, 0, 0]);\n    this.setLocalSkew(element, [0, 0]);\n  };\n  DefaultSceneGraphService.prototype.getTransformedGeometryBounds = function (element, render, existedAABB) {\n    if (render === void 0) {\n      render = false;\n    }\n    var bounds = this.getGeometryBounds(element, render);\n    if (!AABB.isEmpty(bounds)) {\n      var aabb = existedAABB || new AABB();\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n      return aabb;\n    } else {\n      return null;\n    }\n  };\n  /**\n   * won't account for children\n   */\n  DefaultSceneGraphService.prototype.getGeometryBounds = function (element, render) {\n    if (render === void 0) {\n      render = false;\n    }\n    var geometry = element.geometry;\n    var bounds = render ? geometry.renderBounds : geometry.contentBounds || null;\n    // return (bounds && new AABB(bounds.center, bounds.halfExtents)) || new AABB();\n    return bounds || new AABB();\n  };\n  /**\n   * account for children in world space\n   */\n  DefaultSceneGraphService.prototype.getBounds = function (element, render) {\n    var _this = this;\n    if (render === void 0) {\n      render = false;\n    }\n    var renderable = element.renderable;\n    if (!renderable.boundsDirty && !render && renderable.bounds) {\n      return renderable.bounds;\n    }\n    if (!renderable.renderBoundsDirty && render && renderable.renderBounds) {\n      return renderable.renderBounds;\n    }\n    // reuse existed if possible\n    var existedAABB = render ? renderable.renderBounds : renderable.bounds;\n    // reset with geometry's aabb\n    var aabb = this.getTransformedGeometryBounds(element, render, existedAABB);\n    // merge children's aabbs\n    var children = element.childNodes;\n    children.forEach(function (child) {\n      var childBounds = _this.getBounds(child, render);\n      if (childBounds) {\n        if (!aabb) {\n          aabb = existedAABB || new AABB();\n          aabb.update(childBounds.center, childBounds.halfExtents);\n        } else {\n          aabb.add(childBounds);\n        }\n      }\n    });\n    if (render) {\n      // FIXME: account for clip path\n      var clipped = findClosestClipPathTarget(element);\n      if (clipped) {\n        // use bounds under world space\n        var clipPathBounds = clipped.parsedStyle.clipPath.getBounds(render);\n        if (!aabb) {\n          aabb = clipPathBounds;\n        } else if (clipPathBounds) {\n          aabb = clipPathBounds.intersection(aabb);\n        }\n      }\n    }\n    if (!aabb) {\n      aabb = new AABB();\n    }\n    if (aabb) {\n      if (render) {\n        renderable.renderBounds = aabb;\n      } else {\n        renderable.bounds = aabb;\n      }\n    }\n    if (render) {\n      renderable.renderBoundsDirty = false;\n    } else {\n      renderable.boundsDirty = false;\n    }\n    return aabb;\n  };\n  /**\n   * account for children in local space\n   */\n  DefaultSceneGraphService.prototype.getLocalBounds = function (element) {\n    if (element.parentNode) {\n      var parentInvert = mat4.create();\n      if (element.parentNode.transformable) {\n        parentInvert = mat4.invert(mat4.create(), this.getWorldTransform(element.parentNode));\n      }\n      var bounds = this.getBounds(element);\n      if (!AABB.isEmpty(bounds)) {\n        var localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n    return this.getBounds(element);\n  };\n  DefaultSceneGraphService.prototype.getBoundingClientRect = function (element) {\n    var _a, _b;\n    var aabb;\n    var bounds = this.getGeometryBounds(element);\n    if (!AABB.isEmpty(bounds)) {\n      aabb = new AABB();\n      // apply transformation to aabb\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n    }\n    // calc context's offset\n    var bbox = (_b = (_a = element.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.getContextService().getBoundingClientRect();\n    if (aabb) {\n      var _c = __read(aabb.getMin(), 2),\n        left = _c[0],\n        top_1 = _c[1];\n      var _d = __read(aabb.getMax(), 2),\n        right = _d[0],\n        bottom = _d[1];\n      return new Rectangle(left + ((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0), top_1 + ((bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0), right - left, bottom - top_1);\n    }\n    return new Rectangle((bbox === null || bbox === void 0 ? void 0 : bbox.left) || 0, (bbox === null || bbox === void 0 ? void 0 : bbox.top) || 0, 0, 0);\n  };\n  DefaultSceneGraphService.prototype.dirtifyWorldInternal = function (element, transform) {\n    var _this = this;\n    if (!transform.dirtyFlag) {\n      transform.dirtyFlag = true;\n      transform.frozen = false;\n      element.childNodes.forEach(function (child) {\n        var childTransform = child.transformable;\n        if (!childTransform.dirtyFlag) {\n          _this.dirtifyWorldInternal(child, childTransform);\n        }\n      });\n      var renderable = element.renderable;\n      if (renderable) {\n        renderable.renderBoundsDirty = true;\n        renderable.boundsDirty = true;\n        renderable.dirty = true;\n      }\n    }\n  };\n  DefaultSceneGraphService.prototype.syncHierarchy = function (element) {\n    var transform = element.transformable;\n    if (transform.frozen) {\n      return;\n    }\n    transform.frozen = true;\n    if (transform.localDirtyFlag || transform.dirtyFlag) {\n      this.sync(element, transform);\n    }\n    var children = element.childNodes;\n    for (var i = 0; i < children.length; i++) {\n      this.syncHierarchy(children[i]);\n    }\n  };\n  DefaultSceneGraphService.prototype.sync = function (element, transform) {\n    if (transform.localDirtyFlag) {\n      this.calcLocalTransform(transform);\n      transform.localDirtyFlag = false;\n    }\n    if (transform.dirtyFlag) {\n      var parent_1 = element.parentNode;\n      var parentTransform = parent_1 && parent_1.transformable;\n      if (parent_1 === null || !parentTransform) {\n        mat4.copy(transform.worldTransform, transform.localTransform);\n      } else {\n        // TODO: should we support scale compensation?\n        // @see https://github.com/playcanvas/engine/issues/1077#issuecomment-359765557\n        mat4.multiply(transform.worldTransform, parentTransform.worldTransform, transform.localTransform);\n      }\n      transform.dirtyFlag = false;\n    }\n  };\n  DefaultSceneGraphService.prototype.unfreezeParentToRoot = function (child) {\n    var p = child.parentNode;\n    while (p) {\n      var transform = p.transformable;\n      if (transform) {\n        transform.frozen = false;\n      }\n      p = p.parentNode;\n    }\n  };\n  return DefaultSceneGraphService;\n}();\nvar TEXT_METRICS = {\n  MetricsString: '|ÉqÅ',\n  BaselineSymbol: 'M',\n  BaselineMultiplier: 1.4,\n  HeightMultiplier: 2,\n  Newlines: [0x000a,\n  // line feed\n  0x000d // carriage return\n  ],\n  BreakingSpaces: [0x0009,\n  // character tabulation\n  0x0020,\n  // space\n  0x2000,\n  // en quad\n  0x2001,\n  // em quad\n  0x2002,\n  // en space\n  0x2003,\n  // em space\n  0x2004,\n  // three-per-em space\n  0x2005,\n  // four-per-em space\n  0x2006,\n  // six-per-em space\n  0x2008,\n  // punctuation space\n  0x2009,\n  // thin space\n  0x200a,\n  // hair space\n  0x205f,\n  // medium mathematical space\n  0x3000 // ideographic space\n  ]\n};\nvar LATIN_REGEX = /[a-zA-Z0-9\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff!\"#$%&'()*+,-./:;]/;\n// Line breaking rules in CJK (Kinsoku Shori)\n// Refer from https://en.wikipedia.org/wiki/Line_breaking_rules_in_East_Asian_languages\nvar regexCannotStartZhCn = /[!%),.:;?\\]}¢°·'\"\"†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/;\nvar regexCannotEndZhCn = /[$(£¥·'\"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/;\nvar regexCannotStartZhTw = /[!),.:;?\\]}¢·–—'\"•\"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/;\nvar regexCannotEndZhTw = /[([{£¥'\"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/;\nvar regexCannotStartJaJp = /[)\\]｝〕〉》」』】〙〗〟'\"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/;\nvar regexCannotEndJaJp = /[([｛〔〈《「『【〘〖〝'\"｟«—...‥〳〴〵]/;\nvar regexCannotStartKoKr = /[!%),.:;?\\]}¢°'\"†‡℃〆〈《「『〕！％），．：；？］｝]/;\nvar regexCannotEndKoKr = /[$([{£¥'\"々〇〉》」〔＄（［｛｠￥￦#]/;\nvar regexCannotStart = new RegExp(\"\".concat(regexCannotStartZhCn.source, \"|\").concat(regexCannotStartZhTw.source, \"|\").concat(regexCannotStartJaJp.source, \"|\").concat(regexCannotStartKoKr.source));\nvar regexCannotEnd = new RegExp(\"\".concat(regexCannotEndZhCn.source, \"|\").concat(regexCannotEndZhTw.source, \"|\").concat(regexCannotEndJaJp.source, \"|\").concat(regexCannotEndKoKr.source));\n/**\n * Borrow from pixi/packages/text/src/TextMetrics.ts\n */\nvar TextService = /** @class */function () {\n  function TextService(runtime) {\n    var _this = this;\n    this.runtime = runtime;\n    /**\n     * font metrics cache\n     */\n    this.fontMetricsCache = {};\n    this.shouldBreakByKinsokuShorui = function (char, nextChar) {\n      if (_this.isBreakingSpace(nextChar)) return false;\n      if (char) {\n        // Line breaking rules in CJK (Kinsoku Shori)\n        if (regexCannotEnd.exec(nextChar) || regexCannotStart.exec(char)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    this.trimByKinsokuShorui = function (prev) {\n      var next = __spreadArray([], __read(prev), false);\n      var prevLine = next[next.length - 2];\n      if (!prevLine) {\n        return prev;\n      }\n      var lastChar = prevLine[prevLine.length - 1];\n      next[next.length - 2] = prevLine.slice(0, -1);\n      next[next.length - 1] = lastChar + next[next.length - 1];\n      return next;\n    };\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style.\n   */\n  TextService.prototype.measureFont = function (font, offscreenCanvas) {\n    // as this method is used for preparing assets, don't recalculate things if we don't need to\n    if (this.fontMetricsCache[font]) {\n      return this.fontMetricsCache[font];\n    }\n    var properties = {\n      ascent: 0,\n      descent: 0,\n      fontSize: 0\n    };\n    var canvas = this.runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas, {\n      willReadFrequently: true\n    });\n    context.font = font;\n    var metricsString = TEXT_METRICS.MetricsString + TEXT_METRICS.BaselineSymbol;\n    var width = Math.ceil(context.measureText(metricsString).width);\n    var baseline = Math.ceil(context.measureText(TEXT_METRICS.BaselineSymbol).width);\n    var height = TEXT_METRICS.HeightMultiplier * baseline;\n    baseline = baseline * TEXT_METRICS.BaselineMultiplier | 0;\n    // @ts-ignore\n    canvas.width = width;\n    // @ts-ignore\n    canvas.height = height;\n    context.fillStyle = '#f00';\n    context.fillRect(0, 0, width, height);\n    context.font = font;\n    context.textBaseline = 'alphabetic';\n    context.fillStyle = '#000';\n    context.fillText(metricsString, 0, baseline);\n    var imagedata = context.getImageData(0, 0, width || 1, height || 1).data;\n    var pixels = imagedata.length;\n    var line = width * 4;\n    var i = 0;\n    var idx = 0;\n    var stop = false;\n    // ascent. scan from top to bottom until we find a non red pixel\n    for (i = 0; i < baseline; ++i) {\n      for (var j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx += line;\n      } else {\n        break;\n      }\n    }\n    properties.ascent = baseline - i;\n    idx = pixels - line;\n    stop = false;\n    // descent. scan from bottom to top until we find a non red pixel\n    for (i = height; i > baseline; --i) {\n      for (var j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx -= line;\n      } else {\n        break;\n      }\n    }\n    properties.descent = i - baseline;\n    properties.fontSize = properties.ascent + properties.descent;\n    this.fontMetricsCache[font] = properties;\n    return properties;\n  };\n  TextService.prototype.measureText = function (text, parsedStyle, offscreenCanvas) {\n    var fontSize = parsedStyle.fontSize,\n      wordWrap = parsedStyle.wordWrap,\n      strokeHeight = parsedStyle.lineHeight,\n      lineWidth = parsedStyle.lineWidth,\n      textBaseline = parsedStyle.textBaseline,\n      textAlign = parsedStyle.textAlign,\n      letterSpacing = parsedStyle.letterSpacing,\n      textPath = parsedStyle.textPath;\n    parsedStyle.textPathSide;\n    parsedStyle.textPathStartOffset;\n    var\n      // dropShadow = 0,\n      // dropShadowDistance = 0,\n      _a = parsedStyle.leading,\n      // dropShadow = 0,\n      // dropShadowDistance = 0,\n      leading = _a === void 0 ? 0 : _a;\n    var font = toFontString(parsedStyle);\n    // if (runtime.enableCSSParsing) {\n    var fontProperties = this.measureFont(font, offscreenCanvas);\n    // fallback in case UA disallow canvas data extraction\n    // (toDataURI, getImageData functions)\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = fontSize;\n      fontProperties.ascent = fontSize;\n    }\n    // } else {\n    //   fontProperties = {\n    //     fontSize,\n    //   };\n    // }\n    var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    context.font = font;\n    // no overflowing by default\n    parsedStyle.isOverflowing = false;\n    var outputText = wordWrap ? this.wordWrap(text, parsedStyle, offscreenCanvas) : text;\n    var lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    var lineWidths = new Array(lines.length);\n    var maxLineWidth = 0;\n    // account for textPath\n    if (textPath) {\n      textPath.getTotalLength();\n      // const startingPoint = textPath.getPoint(0);\n      for (var i = 0; i < lines.length; i++) {\n        var width = context.measureText(lines[i]).width + (lines[i].length - 1) * letterSpacing;\n        // for (\n        //   let i = reverse ? lines[0].length - 1 : 0;\n        //   reverse ? i >= 0 : i < lines[0].length;\n        //   reverse ? i-- : i++\n        // ) {\n        //   graphemeInfo = lineBounds[i];\n        //   if (positionInPath > totalPathLength) {\n        //     positionInPath %= totalPathLength;\n        //   } else if (positionInPath < 0) {\n        //     positionInPath += totalPathLength;\n        //   }\n        //   // it would probably much faster to send all the grapheme position for a line\n        //   // and calculate path position/angle at once.\n        //   this.setGraphemeOnPath(\n        //     positionInPath,\n        //     graphemeInfo,\n        //     startingPoint\n        //   );\n        //   positionInPath += graphemeInfo.kernedWidth;\n        // }\n      }\n    } else {\n      for (var i = 0; i < lines.length; i++) {\n        // char width + letterSpacing\n        var lineWidth_1 = context.measureText(lines[i]).width + (lines[i].length - 1) * letterSpacing;\n        lineWidths[i] = lineWidth_1;\n        maxLineWidth = Math.max(maxLineWidth, lineWidth_1);\n      }\n      var width = maxLineWidth + lineWidth;\n      // if (dropShadow) {\n      //   width += dropShadowDistance;\n      // }\n      var lineHeight_1 = strokeHeight || fontProperties.fontSize + lineWidth;\n      var height = Math.max(lineHeight_1, fontProperties.fontSize + lineWidth) + (lines.length - 1) * (lineHeight_1 + leading);\n      // if (dropShadow) {\n      //   height += dropShadowDistance;\n      // }\n      lineHeight_1 += leading;\n      // handle vertical text baseline\n      var offsetY_1 = 0;\n      if (textBaseline === 'middle') {\n        offsetY_1 = -height / 2;\n      } else if (textBaseline === 'bottom' || textBaseline === 'alphabetic' || textBaseline === 'ideographic') {\n        offsetY_1 = -height;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        offsetY_1 = 0;\n      }\n      return {\n        font: font,\n        width: width,\n        height: height,\n        lines: lines,\n        lineWidths: lineWidths,\n        lineHeight: lineHeight_1,\n        maxLineWidth: maxLineWidth,\n        fontProperties: fontProperties,\n        lineMetrics: lineWidths.map(function (width, i) {\n          var offsetX = 0;\n          // handle horizontal text align\n          if (textAlign === 'center' || textAlign === 'middle') {\n            offsetX -= width / 2;\n          } else if (textAlign === 'right' || textAlign === 'end') {\n            offsetX -= width;\n          }\n          return new Rectangle(offsetX - lineWidth / 2, offsetY_1 + i * lineHeight_1, width + lineWidth, lineHeight_1);\n        })\n      };\n    }\n  };\n  TextService.prototype.setGraphemeOnPath = function () {};\n  TextService.prototype.wordWrap = function (text, parsedStyle, offscreenCanvas) {\n    var _this = this;\n    var _a = parsedStyle.wordWrapWidth,\n      wordWrapWidth = _a === void 0 ? 0 : _a,\n      letterSpacing = parsedStyle.letterSpacing,\n      _b = parsedStyle.maxLines,\n      maxLines = _b === void 0 ? Infinity : _b,\n      textOverflow = parsedStyle.textOverflow;\n    var context = this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    var maxWidth = wordWrapWidth + letterSpacing;\n    var ellipsis = '';\n    if (textOverflow === 'ellipsis') {\n      ellipsis = '...';\n    } else if (textOverflow && textOverflow !== 'clip') {\n      ellipsis = textOverflow;\n    }\n    var lines = [];\n    var currentIndex = 0;\n    var currentWidth = 0;\n    var cache = {};\n    var calcWidth = function (char) {\n      return _this.getFromCache(char, letterSpacing, cache, context);\n    };\n    var ellipsisWidth = Array.from(ellipsis).reduce(function (prev, cur) {\n      return prev + calcWidth(cur);\n    }, 0);\n    var chars = Array.from(text);\n    for (var i = 0; i < chars.length; i++) {\n      var char = chars[i];\n      var prevChar = text[i - 1];\n      var nextChar = text[i + 1];\n      var charWidth = calcWidth(char);\n      if (this.isNewline(char)) {\n        currentIndex++;\n        // exceed maxLines, break immediately\n        if (currentIndex >= maxLines) {\n          parsedStyle.isOverflowing = true;\n          break;\n        }\n        currentWidth = 0;\n        lines[currentIndex] = '';\n        continue;\n      }\n      if (currentWidth > 0 && currentWidth + charWidth > maxWidth) {\n        if (currentIndex + 1 >= maxLines) {\n          parsedStyle.isOverflowing = true;\n          // If there is not enough space to display the string itself, it is clipped.\n          // @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n          if (ellipsisWidth > 0 && ellipsisWidth <= maxWidth) {\n            // Backspace from line's end.\n            var currentLineLength = lines[currentIndex].length;\n            var lastLineWidth = 0;\n            var lastLineIndex = currentLineLength;\n            for (var i_1 = 0; i_1 < currentLineLength; i_1++) {\n              var width = calcWidth(lines[currentIndex][i_1]);\n              if (lastLineWidth + width + ellipsisWidth > maxWidth) {\n                lastLineIndex = i_1;\n                break;\n              }\n              lastLineWidth += width;\n            }\n            lines[currentIndex] = (lines[currentIndex] || '').slice(0, lastLineIndex) + ellipsis;\n          }\n          break;\n        }\n        currentIndex++;\n        currentWidth = 0;\n        lines[currentIndex] = '';\n        if (this.isBreakingSpace(char)) {\n          continue;\n        }\n        if (!this.canBreakInLastChar(char)) {\n          lines = this.trimToBreakable(lines);\n          currentWidth = this.sumTextWidthByCache(lines[currentIndex] || '', cache);\n        }\n        if (this.shouldBreakByKinsokuShorui(char, nextChar)) {\n          lines = this.trimByKinsokuShorui(lines);\n          currentWidth += calcWidth(prevChar || '');\n        }\n      }\n      currentWidth += charWidth;\n      lines[currentIndex] = (lines[currentIndex] || '') + char;\n    }\n    return lines.join('\\n');\n  };\n  TextService.prototype.isBreakingSpace = function (char) {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.BreakingSpaces.indexOf(char.charCodeAt(0)) >= 0;\n  };\n  TextService.prototype.isNewline = function (char) {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.Newlines.indexOf(char.charCodeAt(0)) >= 0;\n  };\n  TextService.prototype.trimToBreakable = function (prev) {\n    var next = __spreadArray([], __read(prev), false);\n    var prevLine = next[next.length - 2];\n    var index = this.findBreakableIndex(prevLine);\n    if (index === -1 || !prevLine) return next;\n    var trimmedChar = prevLine.slice(index, index + 1);\n    var isTrimmedWithSpace = this.isBreakingSpace(trimmedChar);\n    var trimFrom = index + 1;\n    var trimTo = index + (isTrimmedWithSpace ? 0 : 1);\n    next[next.length - 1] += prevLine.slice(trimFrom, prevLine.length);\n    next[next.length - 2] = prevLine.slice(0, trimTo);\n    return next;\n  };\n  TextService.prototype.canBreakInLastChar = function (char) {\n    if (char && LATIN_REGEX.test(char)) return false;\n    return true;\n  };\n  TextService.prototype.sumTextWidthByCache = function (text, cache) {\n    return text.split('').reduce(function (sum, c) {\n      if (!cache[c]) throw Error('cannot count the word without cache');\n      return sum + cache[c];\n    }, 0);\n  };\n  TextService.prototype.findBreakableIndex = function (line) {\n    for (var i = line.length - 1; i >= 0; i--) {\n      if (!LATIN_REGEX.test(line[i])) return i;\n    }\n    return -1;\n  };\n  TextService.prototype.getFromCache = function (key, letterSpacing, cache, context) {\n    var width = cache[key];\n    if (typeof width !== 'number') {\n      var spacing = key.length * letterSpacing;\n      width = context.measureText(key).width + spacing;\n      cache[key] = width;\n    }\n    return width;\n  };\n  return TextService;\n}();\nvar runtime = {};\n/**\n * Replace with IoC container\n */\nvar geometryUpdaterFactory = function () {\n  var _a;\n  var rectUpdater = new RectUpdater();\n  var polylineUpdater = new PolylineUpdater();\n  return _a = {}, _a[Shape.CIRCLE] = new CircleUpdater(), _a[Shape.ELLIPSE] = new EllipseUpdater(), _a[Shape.RECT] = rectUpdater, _a[Shape.IMAGE] = rectUpdater, _a[Shape.GROUP] = rectUpdater, _a[Shape.LINE] = new LineUpdater(), _a[Shape.TEXT] = new TextUpdater(runtime), _a[Shape.POLYLINE] = polylineUpdater, _a[Shape.POLYGON] = polylineUpdater, _a[Shape.PATH] = new PathUpdater(), _a[Shape.HTML] = null, _a[Shape.MESH] = null, _a;\n}();\nvar CSSPropertySyntaxFactory = function () {\n  var _a;\n  var color = new CSSPropertyColor();\n  var length = new CSSPropertyLengthOrPercentage();\n  return _a = {}, _a[PropertySyntax.PERCENTAGE] = null, _a[PropertySyntax.NUMBER] = new CSSPropertyNumber(), _a[PropertySyntax.ANGLE] = new CSSPropertyAngle(), _a[PropertySyntax.DEFINED_PATH] = new CSSPropertyClipPath(), _a[PropertySyntax.PAINT] = color, _a[PropertySyntax.COLOR] = color, _a[PropertySyntax.FILTER] = new CSSPropertyFilter(), _a[PropertySyntax.LENGTH] = length, _a[PropertySyntax.LENGTH_PERCENTAGE] = length, _a[PropertySyntax.LENGTH_PERCENTAGE_12] = new CSSPropertyLengthOrPercentage12(), _a[PropertySyntax.LENGTH_PERCENTAGE_14] = new CSSPropertyLengthOrPercentage14(), _a[PropertySyntax.COORDINATE] = new CSSPropertyLocalPosition(), _a[PropertySyntax.OFFSET_DISTANCE] = new CSSPropertyOffsetDistance(), _a[PropertySyntax.OPACITY_VALUE] = new CSSPropertyOpacity(), _a[PropertySyntax.PATH] = new CSSPropertyPath(), _a[PropertySyntax.LIST_OF_POINTS] = new CSSPropertyPoints(), _a[PropertySyntax.SHADOW_BLUR] = new CSSPropertyShadowBlur(), _a[PropertySyntax.TEXT] = new CSSPropertyText(), _a[PropertySyntax.TEXT_TRANSFORM] = new CSSPropertyTextTransform(), _a[PropertySyntax.TRANSFORM] = new CSSPropertyTransform(), _a[PropertySyntax.TRANSFORM_ORIGIN] = new CSSPropertyTransformOrigin(), _a[PropertySyntax.Z_INDEX] = new CSSPropertyZIndex(), _a[PropertySyntax.MARKER] = new CSSPropertyMarker(), _a;\n}();\nvar getGlobalThis = function () {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  // @ts-ignore\n  if (typeof global !== 'undefined') return global;\n  return {};\n  // [!] Error: The 'this' keyword is equivalent to 'undefined' at the top level of an ES module, and has been rewritten\n  // @see https://rollupjs.org/troubleshooting/#error-this-is-undefined\n  // if (typeof this !== 'undefined') return this;\n};\n/**\n * Camera\n * `g-camera-api` will provide an advanced implementation\n */\nruntime.CameraContribution = Camera;\n/**\n * `g-web-animations-api` will provide an AnimationTimeline\n */\nruntime.AnimationTimeline = null;\nruntime.EasingFunction = null;\nruntime.offscreenCanvasCreator = new OffscreenCanvasCreator();\nruntime.sceneGraphSelector = new DefaultSceneGraphSelector();\nruntime.sceneGraphService = new DefaultSceneGraphService(runtime);\nruntime.textService = new TextService(runtime);\nruntime.geometryUpdaterFactory = geometryUpdaterFactory;\nruntime.CSSPropertySyntaxFactory = CSSPropertySyntaxFactory;\nruntime.styleValueRegistry = new DefaultStyleValueRegistry(runtime);\nruntime.layoutRegistry = null;\nruntime.globalThis = getGlobalThis();\nruntime.enableCSSParsing = true;\nruntime.enableDataset = false;\nruntime.enableStyleSyntax = true;\nruntime.enableSizeAttenuation = false;\nvar entityCounter = 0;\nfunction resetEntityCounter() {\n  entityCounter = 0;\n}\nvar insertedEvent = new MutationEvent(ElementEvent.INSERTED, null, '', '', '', 0, '', '');\nvar removedEvent = new MutationEvent(ElementEvent.REMOVED, null, '', '', '', 0, '', '');\nvar destroyEvent = new CustomEvent(ElementEvent.DESTROY);\n/**\n * Has following capabilities:\n * * Node insert/remove, eg. appendChild, removeChild, remove...\n * * Query eg. querySelector getElementById...\n * * Animation\n */\nvar Element = /** @class */function (_super) {\n  __extends(Element, _super);\n  function Element() {\n    var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n    /**\n     * Unique id.\n     */\n    _this.entity = entityCounter++;\n    _this.renderable = {\n      bounds: undefined,\n      boundsDirty: true,\n      renderBounds: undefined,\n      renderBoundsDirty: true,\n      dirtyRenderBounds: undefined,\n      dirty: false\n    };\n    _this.cullable = {\n      strategy: Strategy.Standard,\n      visibilityPlaneMask: -1,\n      visible: true,\n      enable: true\n    };\n    _this.transformable = {\n      dirtyFlag: false,\n      localDirtyFlag: false,\n      frozen: false,\n      localPosition: [0, 0, 0],\n      localRotation: [0, 0, 0, 1],\n      localScale: [1, 1, 1],\n      localTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      localSkew: [0, 0],\n      position: [0, 0, 0],\n      rotation: [0, 0, 0, 1],\n      scaling: [1, 1, 1],\n      worldTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n      origin: [0, 0, 0]\n    };\n    _this.sortable = {\n      dirty: false,\n      sorted: undefined,\n      renderOrder: 0,\n      dirtyChildren: [],\n      dirtyReason: undefined\n    };\n    _this.geometry = {\n      contentBounds: undefined,\n      renderBounds: undefined\n    };\n    _this.rBushNode = {\n      aabb: undefined\n    };\n    /**\n     * https://developer.mozilla.org/zh-CN/docs/Web/API/Element/namespaceURI\n     */\n    _this.namespaceURI = 'g';\n    _this.scrollLeft = 0;\n    _this.scrollTop = 0;\n    /**\n     * We don't support border now\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n     */\n    _this.clientTop = 0;\n    _this.clientLeft = 0;\n    /**\n     * is destroyed or not\n     */\n    _this.destroyed = false;\n    /**\n     * compatible with `style`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n     */\n    _this.style = {};\n    _this.computedStyle = runtime.enableCSSParsing ? {\n      anchor: unsetKeywordValue,\n      opacity: unsetKeywordValue,\n      fillOpacity: unsetKeywordValue,\n      strokeOpacity: unsetKeywordValue,\n      fill: unsetKeywordValue,\n      stroke: unsetKeywordValue,\n      transform: unsetKeywordValue,\n      transformOrigin: unsetKeywordValue,\n      visibility: unsetKeywordValue,\n      pointerEvents: unsetKeywordValue,\n      lineWidth: unsetKeywordValue,\n      lineCap: unsetKeywordValue,\n      lineJoin: unsetKeywordValue,\n      increasedLineWidthForHitTesting: unsetKeywordValue,\n      fontSize: unsetKeywordValue,\n      fontFamily: unsetKeywordValue,\n      fontStyle: unsetKeywordValue,\n      fontWeight: unsetKeywordValue,\n      fontVariant: unsetKeywordValue,\n      textAlign: unsetKeywordValue,\n      textBaseline: unsetKeywordValue,\n      textTransform: unsetKeywordValue,\n      zIndex: unsetKeywordValue,\n      filter: unsetKeywordValue,\n      shadowType: unsetKeywordValue\n    } : null;\n    /**\n     * Renderers will use these used values.\n     */\n    _this.parsedStyle = {\n      // opacity: '',\n      // fillOpacity: '',\n      // strokeOpacity: '',\n      // transformOrigin: '',\n      // visibility: '',\n      // pointerEvents: '',\n      // lineWidth: '',\n      // lineCap: '',\n      // lineJoin: '',\n      // increasedLineWidthForHitTesting: '',\n      // fontSize: '',\n      // fontFamily: '',\n      // fontStyle: '',\n      // fontWeight: '',\n      // fontVariant: '',\n      // textAlign: '',\n      // textBaseline: '',\n      // textTransform: '',\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n     */\n    _this.attributes = {};\n    return _this;\n  }\n  Object.defineProperty(Element.prototype, \"className\", {\n    /**\n     * used in `getElementsByClassName`\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n     */\n    get: function () {\n      // @ts-ignore\n      return this.getAttribute('class') || '';\n    },\n    set: function (className) {\n      this.setAttribute('class', className);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"classList\", {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n     */\n    get: function () {\n      return this.className.split(' ').filter(function (c) {\n        return c !== '';\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"tagName\", {\n    get: function () {\n      return this.nodeName;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"children\", {\n    get: function () {\n      return this.childNodes;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"childElementCount\", {\n    get: function () {\n      return this.childNodes.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"firstElementChild\", {\n    get: function () {\n      return this.firstChild;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"lastElementChild\", {\n    get: function () {\n      return this.lastChild;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"parentElement\", {\n    get: function () {\n      return this.parentNode;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"nextSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index + 1] || null;\n      }\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Element.prototype, \"previousSibling\", {\n    get: function () {\n      if (this.parentNode) {\n        var index = this.parentNode.childNodes.indexOf(this);\n        return this.parentNode.childNodes[index - 1] || null;\n      }\n      return null;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Element.prototype.cloneNode = function (deep) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.appendChild = function (child, index) {\n    var _a;\n    if (child.destroyed) {\n      throw new Error(ERROR_MSG_APPEND_DESTROYED_ELEMENT);\n    }\n    runtime.sceneGraphService.attach(child, this, index);\n    if ((_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) {\n      this.ownerDocument.defaultView.mountChildren(child);\n    }\n    insertedEvent.relatedNode = this;\n    child.dispatchEvent(insertedEvent);\n    return child;\n  };\n  Element.prototype.insertBefore = function (newChild, refChild) {\n    if (!refChild) {\n      this.appendChild(newChild);\n    } else {\n      if (newChild.parentElement) {\n        newChild.parentElement.removeChild(newChild);\n      }\n      var index = this.childNodes.indexOf(refChild);\n      if (index === -1) {\n        this.appendChild(newChild);\n      } else {\n        this.appendChild(newChild, index);\n      }\n    }\n    return newChild;\n  };\n  Element.prototype.replaceChild = function (newChild, oldChild) {\n    var index = this.childNodes.indexOf(oldChild);\n    this.removeChild(oldChild);\n    this.appendChild(newChild, index);\n    return oldChild;\n  };\n  Element.prototype.removeChild = function (child) {\n    var _a;\n    // should emit on itself before detach\n    removedEvent.relatedNode = this;\n    child.dispatchEvent(removedEvent);\n    if ((_a = child.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) {\n      child.ownerDocument.defaultView.unmountChildren(child);\n    }\n    // remove from scene graph\n    runtime.sceneGraphService.detach(child);\n    return child;\n  };\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  Element.prototype.removeChildren = function () {\n    for (var i = this.childNodes.length - 1; i >= 0; i--) {\n      var child = this.childNodes[i];\n      this.removeChild(child);\n    }\n  };\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   */\n  Element.prototype.destroyChildren = function () {\n    for (var i = this.childNodes.length - 1; i >= 0; i--) {\n      var child = this.childNodes[i];\n      if (child.childNodes.length) {\n        child.destroyChildren();\n      }\n      child.destroy();\n    }\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n   */\n  Element.prototype.matches = function (selector) {\n    return runtime.sceneGraphService.matches(selector, this);\n  };\n  Element.prototype.getElementById = function (id) {\n    return runtime.sceneGraphService.querySelector(\"#\".concat(id), this);\n  };\n  Element.prototype.getElementsByName = function (name) {\n    return runtime.sceneGraphService.querySelectorAll(\"[name=\\\"\".concat(name, \"\\\"]\"), this);\n  };\n  Element.prototype.getElementsByClassName = function (className) {\n    return runtime.sceneGraphService.querySelectorAll(\".\".concat(className), this);\n  };\n  Element.prototype.getElementsByTagName = function (tagName) {\n    return runtime.sceneGraphService.querySelectorAll(tagName, this);\n  };\n  Element.prototype.querySelector = function (selectors) {\n    return runtime.sceneGraphService.querySelector(selectors, this);\n  };\n  Element.prototype.querySelectorAll = function (selectors) {\n    return runtime.sceneGraphService.querySelectorAll(selectors, this);\n  };\n  /**\n   * should traverses the element and its parents (heading toward the document root)\n   * until it finds a node that matches the specified CSS selector.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#polyfill\n   */\n  Element.prototype.closest = function (selectors) {\n    var el = this;\n    do {\n      if (runtime.sceneGraphService.matches(selectors, el)) return el;\n      el = el.parentElement;\n    } while (el !== null);\n    return null;\n  };\n  /**\n   * search in scene group, but should not include itself\n   */\n  Element.prototype.find = function (filter) {\n    var _this = this;\n    var target = null;\n    this.forEach(function (object) {\n      if (object !== _this && filter(object)) {\n        target = object;\n        return true;\n      }\n      return false;\n    });\n    return target;\n  };\n  Element.prototype.findAll = function (filter) {\n    var _this = this;\n    var objects = [];\n    this.forEach(function (object) {\n      if (object !== _this && filter(object)) {\n        objects.push(object);\n      }\n    });\n    return objects;\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/after\n   */\n  Element.prototype.after = function () {\n    var _this = this;\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    if (this.parentNode) {\n      var index_1 = this.parentNode.childNodes.indexOf(this);\n      nodes.forEach(function (node, i) {\n        var _a;\n        return (_a = _this.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(node, index_1 + i + 1);\n      });\n    }\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/before\n   */\n  Element.prototype.before = function () {\n    var _a;\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    if (this.parentNode) {\n      var index = this.parentNode.childNodes.indexOf(this);\n      var _b = __read(nodes),\n        first = _b[0],\n        rest = _b.slice(1);\n      this.parentNode.appendChild(first, index);\n      (_a = first).after.apply(_a, __spreadArray([], __read(rest), false));\n    }\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceWith\n   */\n  Element.prototype.replaceWith = function () {\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    this.after.apply(this, __spreadArray([], __read(nodes), false));\n    this.remove();\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/append\n   */\n  Element.prototype.append = function () {\n    var _this = this;\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    nodes.forEach(function (node) {\n      return _this.appendChild(node);\n    });\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/prepend\n   */\n  Element.prototype.prepend = function () {\n    var _this = this;\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    nodes.forEach(function (node, i) {\n      return _this.appendChild(node, i);\n    });\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceChildren\n   */\n  Element.prototype.replaceChildren = function () {\n    var nodes = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      nodes[_i] = arguments[_i];\n    }\n    while (this.childNodes.length && this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n    this.append.apply(this, __spreadArray([], __read(nodes), false));\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/remove\n   */\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      return this.parentNode.removeChild(this);\n    }\n    return this;\n  };\n  Element.prototype.destroy = function () {\n    // destroy itself before remove\n    this.dispatchEvent(destroyEvent);\n    // remove from scenegraph first\n    this.remove();\n    // remove event listeners\n    this.emitter.removeAllListeners();\n    this.destroyed = true;\n  };\n  Element.prototype.getGeometryBounds = function () {\n    return runtime.sceneGraphService.getGeometryBounds(this);\n  };\n  Element.prototype.getRenderBounds = function () {\n    return runtime.sceneGraphService.getBounds(this, true);\n  };\n  /**\n   * get bounds in world space, account for children\n   */\n  Element.prototype.getBounds = function () {\n    return runtime.sceneGraphService.getBounds(this);\n  };\n  /**\n   * get bounds in local space, account for children\n   */\n  Element.prototype.getLocalBounds = function () {\n    return runtime.sceneGraphService.getLocalBounds(this);\n  };\n  /**\n   * account for context's bounds in client space,\n   * but not accounting for children\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n   */\n  Element.prototype.getBoundingClientRect = function () {\n    return runtime.sceneGraphService.getBoundingClientRect(this);\n  };\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getClientRects\n   */\n  Element.prototype.getClientRects = function () {\n    return [this.getBoundingClientRect()];\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/computedStyleMap\n   * eg. circle.computedStyleMap().get('fill');\n   */\n  Element.prototype.computedStyleMap = function () {\n    return new Map(Object.entries(this.computedStyle));\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n   */\n  Element.prototype.getAttributeNames = function () {\n    return Object.keys(this.attributes);\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n   */\n  Element.prototype.getAttribute = function (name) {\n    // @see https://github.com/antvis/G/issues/1267\n    if (isSymbol(name)) {\n      return runtime.enableCSSParsing ? null : undefined;\n    }\n    var value = this.attributes[name];\n    if (value === undefined) {\n      var attributeName = formatAttributeName(name);\n      value = this.attributes[attributeName];\n      // if the given attribute does not exist, the value returned will either be null or \"\"\n      return runtime.enableCSSParsing ? isNil(value) ? null : value : value;\n    } else {\n      return value;\n    }\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n   */\n  Element.prototype.hasAttribute = function (qualifiedName) {\n    return this.getAttributeNames().includes(qualifiedName);\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n   */\n  Element.prototype.hasAttributes = function () {\n    return !!this.getAttributeNames().length;\n  };\n  /**\n   * should use removeAttribute() instead of setting the attribute value to null either directly or using setAttribute(). Many attributes will not behave as expected if you set them to null.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n   */\n  Element.prototype.removeAttribute = function (attributeName) {\n    this.setAttribute(attributeName, null);\n    delete this.attributes[attributeName];\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n   */\n  Element.prototype.setAttribute = function (attributeName, value, force) {\n    this.attributes[attributeName] = value;\n  };\n  Element.prototype.getAttributeNS = function (namespace, localName) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.getAttributeNode = function (qualifiedName) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.getAttributeNodeNS = function (namespace, localName) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.hasAttributeNS = function (namespace, localName) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.removeAttributeNS = function (namespace, localName) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.removeAttributeNode = function (attr) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.setAttributeNS = function (namespace, qualifiedName, value) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.setAttributeNode = function (attr) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.setAttributeNodeNS = function (attr) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Element.prototype.toggleAttribute = function (qualifiedName, force) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  return Element;\n}(Node);\nfunction isDisplayObject(value) {\n  return !!(value === null || value === void 0 ? void 0 : value.nodeName);\n}\nvar mutationEvent = new MutationEvent(ElementEvent.ATTR_MODIFIED, null, null, null, null, MutationEvent.MODIFICATION, null, null);\nvar DEFAULT_STYLE_PROPS = {\n  anchor: '',\n  opacity: '',\n  fillOpacity: '',\n  strokeOpacity: '',\n  fill: '',\n  stroke: '',\n  transform: '',\n  transformOrigin: '',\n  visibility: '',\n  pointerEvents: '',\n  lineWidth: '',\n  lineCap: '',\n  lineJoin: '',\n  increasedLineWidthForHitTesting: '',\n  fontSize: '',\n  fontFamily: '',\n  fontStyle: '',\n  fontWeight: '',\n  fontVariant: '',\n  textAlign: '',\n  textBaseline: '',\n  textTransform: '',\n  zIndex: '',\n  filter: '',\n  shadowType: ''\n};\nvar DEFAULT_PARSED_STYLE_PROPS = {\n  anchor: [0, 0],\n  fill: noneColor,\n  stroke: noneColor,\n  transform: [],\n  zIndex: 0,\n  filter: [],\n  shadowType: 'outer',\n  miterLimit: 10\n};\nvar DEFAULT_PARSED_STYLE_PROPS_CSS_DISABLED = __assign(__assign({}, DEFAULT_PARSED_STYLE_PROPS), {\n  opacity: 1,\n  fillOpacity: 1,\n  strokeOpacity: 1,\n  visibility: 'visible',\n  pointerEvents: 'auto',\n  lineWidth: 1,\n  lineCap: 'butt',\n  lineJoin: 'miter',\n  increasedLineWidthForHitTesting: 0,\n  fillRule: 'nonzero'\n});\nvar INHERITABLE_BASE_STYLE_PROPS = ['opacity', 'fillOpacity', 'strokeOpacity', 'transformOrigin', 'visibility', 'pointerEvents', 'lineWidth', 'lineCap', 'lineJoin', 'increasedLineWidthForHitTesting'];\nvar INHERITABLE_STYLE_PROPS = __spreadArray(__spreadArray([], __read(INHERITABLE_BASE_STYLE_PROPS), false), ['fontSize', 'fontFamily', 'fontStyle', 'fontWeight', 'fontVariant', 'textAlign', 'textBaseline', 'textTransform'], false);\nvar DATASET_PREFIX = 'data-';\n/**\n * prototype chains: DisplayObject -> Element -> Node -> EventTarget\n *\n * mixins: Animatable, Transformable, Visible\n * @see https://github.com/tannerntannern/ts-mixer/blob/master/README.md#mixing-generic-classes\n *\n * Provide abilities in scene graph, such as:\n * * transform `translate/rotate/scale`\n * * add/remove child\n * * visibility and z-index\n *\n * Those abilities are implemented with those components: `Transform/Sortable/Visible`.\n *\n * Emit following events:\n * * init\n * * destroy\n * * attributeChanged\n */\nvar DisplayObject = /** @class */function (_super) {\n  __extends(DisplayObject, _super);\n  function DisplayObject(config) {\n    var _a;\n    var _this = _super.call(this) || this;\n    _this.isCustomElement = false;\n    _this.isMutationObserved = false;\n    /**\n     * push to active animations after calling `animate()`\n     */\n    _this.activeAnimations = [];\n    /**\n     * Use `this.style.clipPath` instead.\n     * @deprecated\n     */\n    _this.getClip = function () {\n      return this.style.clipPath || null;\n    };\n    // assign name, id to config\n    // eg. group.get('name')\n    _this.config = config;\n    // compatible with G 3.0\n    _this.config.interactive = (_a = _this.config.capture) !== null && _a !== void 0 ? _a : _this.config.interactive;\n    // init scene graph node\n    _this.id = _this.config.id || '';\n    _this.name = _this.config.name || '';\n    if (_this.config.className || _this.config.class) {\n      _this.className = _this.config.className || _this.config.class;\n    }\n    _this.nodeName = _this.config.type || Shape.GROUP;\n    // compatible with G 3.0\n    _this.config.style = _this.config.style || _this.config.attrs || {};\n    Object.assign(_this.config.style, _this.config.attrs);\n    // this.config.style = {\n    //   // ...DEFAULT_STYLE_PROPS,\n    //   ...this.config.style,\n    //   ...this.config.attrs,\n    // };\n    if (_this.config.visible != null) {\n      _this.config.style.visibility = _this.config.visible === false ? 'hidden' : 'visible';\n    }\n    if (_this.config.interactive != null) {\n      _this.config.style.pointerEvents = _this.config.interactive === false ? 'none' : 'auto';\n    }\n    // merge parsed value\n    Object.assign(_this.parsedStyle, runtime.enableCSSParsing ? DEFAULT_PARSED_STYLE_PROPS : DEFAULT_PARSED_STYLE_PROPS_CSS_DISABLED, _this.config.initialParsedStyle);\n    if (runtime.enableCSSParsing) {\n      Object.assign(_this.attributes, DEFAULT_STYLE_PROPS);\n    }\n    // start to process attributes\n    _this.initAttributes(_this.config.style);\n    var Proxy = runtime.globalThis.Proxy ? runtime.globalThis.Proxy : function () {};\n    if (runtime.enableDataset) {\n      _this.dataset = new Proxy({}, {\n        get: function (target, name) {\n          var formattedName = \"\".concat(DATASET_PREFIX).concat(kebabize(name));\n          if (target[formattedName] !== undefined) {\n            return target[formattedName];\n          }\n          return _this.getAttribute(formattedName);\n        },\n        set: function (_, prop, value) {\n          _this.setAttribute(\"\".concat(DATASET_PREFIX).concat(kebabize(prop)), value);\n          return true;\n        }\n      });\n    }\n    if (runtime.enableStyleSyntax) {\n      _this.style = new Proxy(\n      // @ts-ignore\n      {\n        // ...this.attributes,\n        setProperty: function (propertyName, value) {\n          _this.setAttribute(propertyName, value);\n        },\n        getPropertyValue: function (propertyName) {\n          return _this.getAttribute(propertyName);\n        },\n        removeProperty: function (propertyName) {\n          _this.removeAttribute(propertyName);\n        },\n        item: function () {\n          return '';\n        }\n      }, {\n        get: function (target, name) {\n          if (target[name] !== undefined) {\n            // if (name in target) {\n            return target[name];\n          }\n          return _this.getAttribute(name);\n        },\n        set: function (_, prop, value) {\n          _this.setAttribute(prop, value);\n          return true;\n        }\n      });\n    }\n    return _this;\n  }\n  DisplayObject.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    // stop all active animations\n    this.getAnimations().forEach(function (animation) {\n      animation.cancel();\n    });\n    // FIXME\n    // this.renderable = null;\n    // this.cullable = null;\n    // this.transformable = null;\n    // this.rBushNode = null;\n    // this.geometry = null;\n    // this.sortable = null;\n  };\n  DisplayObject.prototype.cloneNode = function (deep, customCloneFunc) {\n    var clonedStyle = __assign({}, this.attributes);\n    for (var attributeName in clonedStyle) {\n      var attribute = clonedStyle[attributeName];\n      // @see https://github.com/antvis/G/issues/1095\n      if (isDisplayObject(attribute) &&\n      // share the same clipPath if possible\n      attributeName !== 'clipPath' && attributeName !== 'offsetPath' && attributeName !== 'textPath') {\n        clonedStyle[attributeName] = attribute.cloneNode(deep);\n      }\n      // TODO: clone other type\n      if (customCloneFunc) {\n        clonedStyle[attributeName] = customCloneFunc(attributeName, attribute);\n      }\n    }\n    var cloned = new this.constructor({\n      // copy id & name\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode#notes\n      id: this.id,\n      name: this.name,\n      className: this.name,\n      interactive: this.interactive,\n      style: clonedStyle\n    });\n    // apply transform\n    cloned.setLocalTransform(this.getLocalTransform());\n    if (deep) {\n      this.children.forEach(function (child) {\n        // skip marker\n        if (!child.style.isMarker) {\n          var clonedChild = child.cloneNode(deep);\n          cloned.appendChild(clonedChild);\n        }\n      });\n    }\n    return cloned;\n  };\n  DisplayObject.prototype.initAttributes = function (attributes) {\n    if (attributes === void 0) {\n      attributes = {};\n    }\n    var renderable = this.renderable;\n    var options = {\n      forceUpdateGeometry: true\n      // usedAttributes:\n      //   // only Group / Text should account for text relative props\n      //   this.tagName === Shape.GROUP || this.tagName === Shape.TEXT\n      //     ? INHERITABLE_STYLE_PROPS\n      //     : INHERITABLE_BASE_STYLE_PROPS,\n    };\n    if (runtime.enableCSSParsing) {\n      // @ts-ignore\n      options.usedAttributes = INHERITABLE_STYLE_PROPS;\n    }\n    // account for FCP, process properties as less as possible\n    var formattedAttributes = {};\n    for (var name_1 in attributes) {\n      var attributeName = formatAttributeName(name_1);\n      formattedAttributes[attributeName] = attributes[name_1];\n    }\n    runtime.styleValueRegistry.processProperties(this, formattedAttributes, options);\n    // redraw at next frame\n    renderable.dirty = true;\n  };\n  DisplayObject.prototype.setAttribute = function (name, value, force, memoize) {\n    if (force === void 0) {\n      force = false;\n    }\n    if (memoize === void 0) {\n      memoize = true;\n    }\n    var attributeName = formatAttributeName(name);\n    // ignore undefined value\n    if (isUndefined(value)) {\n      return;\n    }\n    if (force || value !== this.attributes[attributeName]) {\n      this.internalSetAttribute(attributeName, value, {\n        memoize: memoize\n      });\n      _super.prototype.setAttribute.call(this, attributeName, value);\n    }\n  };\n  /**\n   * called when attributes get changed or initialized\n   */\n  DisplayObject.prototype.internalSetAttribute = function (name, value, parseOptions) {\n    var _a;\n    if (parseOptions === void 0) {\n      parseOptions = {};\n    }\n    var renderable = this.renderable;\n    var oldValue = this.attributes[name];\n    var oldParsedValue = this.parsedStyle[name];\n    runtime.styleValueRegistry.processProperties(this, (_a = {}, _a[name] = value, _a), parseOptions);\n    // redraw at next frame\n    renderable.dirty = true;\n    var newParsedValue = this.parsedStyle[name];\n    if (this.isConnected) {\n      mutationEvent.relatedNode = this;\n      mutationEvent.prevValue = oldValue;\n      mutationEvent.newValue = value;\n      mutationEvent.attrName = name;\n      mutationEvent.prevParsedValue = oldParsedValue;\n      mutationEvent.newParsedValue = newParsedValue;\n      if (this.isMutationObserved) {\n        this.dispatchEvent(mutationEvent);\n      } else {\n        mutationEvent.target = this;\n        this.ownerDocument.defaultView.dispatchEvent(mutationEvent, true);\n      }\n    }\n    if ((this.isCustomElement && this.isConnected || !this.isCustomElement) && this.attributeChangedCallback) {\n      this.attributeChangedCallback(name, oldValue, value, oldParsedValue, newParsedValue);\n    }\n  };\n  // #region transformable\n  /**\n   * returns different values than getBoundingClientRect(), as the latter returns value relative to the viewport\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement/getBBox\n   *\n   * FIXME: It is worth noting that getBBox responds to original untransformed values of a drawn object.\n   * @see https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox\n   */\n  DisplayObject.prototype.getBBox = function () {\n    var aabb = this.getBounds();\n    var _a = __read(aabb.getMin(), 2),\n      left = _a[0],\n      top = _a[1];\n    var _b = __read(aabb.getMax(), 2),\n      right = _b[0],\n      bottom = _b[1];\n    return new Rectangle(left, top, right - left, bottom - top);\n  };\n  DisplayObject.prototype.setOrigin = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    runtime.sceneGraphService.setOrigin(this, createVec3(position, y, z));\n    return this;\n  };\n  DisplayObject.prototype.getOrigin = function () {\n    return runtime.sceneGraphService.getOrigin(this);\n  };\n  /**\n   * set position in world space\n   */\n  DisplayObject.prototype.setPosition = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    runtime.sceneGraphService.setPosition(this, createVec3(position, y, z));\n    return this;\n  };\n  /**\n   * set position in local space\n   */\n  DisplayObject.prototype.setLocalPosition = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    runtime.sceneGraphService.setLocalPosition(this, createVec3(position, y, z));\n    return this;\n  };\n  /**\n   * translate in world space\n   */\n  DisplayObject.prototype.translate = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    runtime.sceneGraphService.translate(this, createVec3(position, y, z));\n    return this;\n  };\n  /**\n   * translate in local space\n   */\n  DisplayObject.prototype.translateLocal = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    runtime.sceneGraphService.translateLocal(this, createVec3(position, y, z));\n    return this;\n  };\n  DisplayObject.prototype.getPosition = function () {\n    return runtime.sceneGraphService.getPosition(this);\n  };\n  DisplayObject.prototype.getLocalPosition = function () {\n    return runtime.sceneGraphService.getLocalPosition(this);\n  };\n  /**\n   * compatible with G 3.0\n   *\n   * scaling in local space\n   * scale(10) = scale(10, 10, 10)\n   *\n   * we can't set scale in world space\n   */\n  DisplayObject.prototype.scale = function (scaling, y, z) {\n    return this.scaleLocal(scaling, y, z);\n  };\n  DisplayObject.prototype.scaleLocal = function (scaling, y, z) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z);\n    }\n    runtime.sceneGraphService.scaleLocal(this, scaling);\n    return this;\n  };\n  /**\n   * set scaling in local space\n   */\n  DisplayObject.prototype.setLocalScale = function (scaling, y, z) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z);\n    }\n    runtime.sceneGraphService.setLocalScale(this, scaling);\n    return this;\n  };\n  /**\n   * get scaling in local space\n   */\n  DisplayObject.prototype.getLocalScale = function () {\n    return runtime.sceneGraphService.getLocalScale(this);\n  };\n  /**\n   * get scaling in world space\n   */\n  DisplayObject.prototype.getScale = function () {\n    return runtime.sceneGraphService.getScale(this);\n  };\n  /**\n   * only return degrees of Z axis in world space\n   */\n  DisplayObject.prototype.getEulerAngles = function () {\n    var _a = __read(getEuler(vec3.create(), runtime.sceneGraphService.getWorldTransform(this)), 3),\n      ez = _a[2];\n    return rad2deg(ez);\n  };\n  /**\n   * only return degrees of Z axis in local space\n   */\n  DisplayObject.prototype.getLocalEulerAngles = function () {\n    var _a = __read(getEuler(vec3.create(), runtime.sceneGraphService.getLocalRotation(this)), 3),\n      ez = _a[2];\n    return rad2deg(ez);\n  };\n  /**\n   * set euler angles(degrees) in world space\n   */\n  DisplayObject.prototype.setEulerAngles = function (z) {\n    runtime.sceneGraphService.setEulerAngles(this, 0, 0, z);\n    return this;\n  };\n  /**\n   * set euler angles(degrees) in local space\n   */\n  DisplayObject.prototype.setLocalEulerAngles = function (z) {\n    runtime.sceneGraphService.setLocalEulerAngles(this, 0, 0, z);\n    return this;\n  };\n  DisplayObject.prototype.rotateLocal = function (x, y, z) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotateLocal(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotateLocal(this, x, y, z);\n    }\n    return this;\n  };\n  DisplayObject.prototype.rotate = function (x, y, z) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotate(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotate(this, x, y, z);\n    }\n    return this;\n  };\n  DisplayObject.prototype.setRotation = function (rotation, y, z, w) {\n    runtime.sceneGraphService.setRotation(this, rotation, y, z, w);\n    return this;\n  };\n  DisplayObject.prototype.setLocalRotation = function (rotation, y, z, w) {\n    runtime.sceneGraphService.setLocalRotation(this, rotation, y, z, w);\n    return this;\n  };\n  DisplayObject.prototype.setLocalSkew = function (skew, y) {\n    runtime.sceneGraphService.setLocalSkew(this, skew, y);\n    return this;\n  };\n  DisplayObject.prototype.getRotation = function () {\n    return runtime.sceneGraphService.getRotation(this);\n  };\n  DisplayObject.prototype.getLocalRotation = function () {\n    return runtime.sceneGraphService.getLocalRotation(this);\n  };\n  DisplayObject.prototype.getLocalSkew = function () {\n    return runtime.sceneGraphService.getLocalSkew(this);\n  };\n  DisplayObject.prototype.getLocalTransform = function () {\n    return runtime.sceneGraphService.getLocalTransform(this);\n  };\n  DisplayObject.prototype.getWorldTransform = function () {\n    return runtime.sceneGraphService.getWorldTransform(this);\n  };\n  DisplayObject.prototype.setLocalTransform = function (transform) {\n    runtime.sceneGraphService.setLocalTransform(this, transform);\n    return this;\n  };\n  DisplayObject.prototype.resetLocalTransform = function () {\n    runtime.sceneGraphService.resetLocalTransform(this);\n  };\n  // #endregion transformable\n  // #region animatable\n  /**\n   * returns an array of all Animation objects affecting this element\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAnimations\n   */\n  DisplayObject.prototype.getAnimations = function () {\n    return this.activeAnimations;\n  };\n  /**\n   * create an animation with WAAPI\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate\n   */\n  DisplayObject.prototype.animate = function (keyframes, options) {\n    var _a;\n    var timeline = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.timeline;\n    if (timeline) {\n      return timeline.play(this, keyframes, options);\n    }\n    return null;\n  };\n  // #endregion animatable\n  // #region visible\n  /**\n   * shortcut for Used value of `visibility`\n   */\n  DisplayObject.prototype.isVisible = function () {\n    var _a;\n    return ((_a = this.parsedStyle) === null || _a === void 0 ? void 0 : _a.visibility) === 'visible';\n  };\n  Object.defineProperty(DisplayObject.prototype, \"interactive\", {\n    get: function () {\n      return this.isInteractive();\n    },\n    set: function (b) {\n      this.style.pointerEvents = b ? 'auto' : 'none';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  DisplayObject.prototype.isInteractive = function () {\n    var _a;\n    return ((_a = this.parsedStyle) === null || _a === void 0 ? void 0 : _a.pointerEvents) !== 'none';\n  };\n  DisplayObject.prototype.isCulled = function () {\n    return !!(this.cullable && this.cullable.enable && !this.cullable.visible);\n  };\n  /**\n   * bring to front in current group\n   */\n  DisplayObject.prototype.toFront = function () {\n    if (this.parentNode) {\n      this.style.zIndex = Math.max.apply(Math, __spreadArray([], __read(this.parentNode.children.map(function (child) {\n        return Number(child.style.zIndex);\n      })), false)) + 1;\n    }\n    return this;\n  };\n  /**\n   * send to back in current group\n   */\n  DisplayObject.prototype.toBack = function () {\n    if (this.parentNode) {\n      this.style.zIndex = Math.min.apply(Math, __spreadArray([], __read(this.parentNode.children.map(function (child) {\n        return Number(child.style.zIndex);\n      })), false)) - 1;\n    }\n    return this;\n  };\n  // #endregion visible\n  // #region deprecated\n  /**\n   * compatible with G 3.0\n   * @alias object.config\n   * @deprecated\n   */\n  DisplayObject.prototype.getConfig = function () {\n    return this.config;\n  };\n  DisplayObject.prototype.attr = function () {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    var _a = __read(args, 2),\n      name = _a[0],\n      value = _a[1];\n    if (!name) {\n      return this.attributes;\n    }\n    if (isObject(name)) {\n      Object.keys(name).forEach(function (key) {\n        _this.setAttribute(key, name[key]);\n      });\n      return this;\n    }\n    if (args.length === 2) {\n      this.setAttribute(name, value);\n      return this;\n    }\n    return this.attributes[name];\n  };\n  /**\n   * return 3x3 matrix in world space\n   * @deprecated\n   */\n  DisplayObject.prototype.getMatrix = function (transformMat4) {\n    var transform = transformMat4 || this.getWorldTransform();\n    var _a = __read(mat4.getTranslation(vec3.create(), transform), 2),\n      tx = _a[0],\n      ty = _a[1];\n    var _b = __read(mat4.getScaling(vec3.create(), transform), 2),\n      sx = _b[0],\n      sy = _b[1];\n    var rotation = mat4.getRotation(quat$1.create(), transform);\n    var _c = __read(getEuler(vec3.create(), rotation), 3),\n      eux = _c[0],\n      euz = _c[2];\n    // gimbal lock at 90 degrees\n    return fromRotationTranslationScale(eux || euz, tx, ty, sx, sy);\n  };\n  /**\n   * return 3x3 matrix in local space\n   * @deprecated\n   */\n  DisplayObject.prototype.getLocalMatrix = function () {\n    return this.getMatrix(this.getLocalTransform());\n  };\n  /**\n   * set 3x3 matrix in world space\n   * @deprecated\n   */\n  DisplayObject.prototype.setMatrix = function (mat) {\n    var _a = __read(decompose(mat), 5),\n      tx = _a[0],\n      ty = _a[1],\n      scalingX = _a[2],\n      scalingY = _a[3],\n      angle = _a[4];\n    this.setEulerAngles(angle).setPosition(tx, ty).setLocalScale(scalingX, scalingY);\n  };\n  /**\n   * set 3x3 matrix in local space\n   * @deprecated\n   */\n  DisplayObject.prototype.setLocalMatrix = function (mat) {\n    var _a = __read(decompose(mat), 5),\n      tx = _a[0],\n      ty = _a[1],\n      scalingX = _a[2],\n      scalingY = _a[3],\n      angle = _a[4];\n    this.setLocalEulerAngles(angle).setLocalPosition(tx, ty).setLocalScale(scalingX, scalingY);\n  };\n  /**\n   * Use `visibility: visible` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.show = function () {\n    if (runtime.enableCSSParsing) {\n      this.style.visibility = 'visible';\n    } else {\n      this.forEach(function (object) {\n        object.style.visibility = 'visible';\n      });\n    }\n  };\n  /**\n   * Use `visibility: hidden` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.hide = function () {\n    if (runtime.enableCSSParsing) {\n      this.style.visibility = 'hidden';\n    } else {\n      this.forEach(function (object) {\n        object.style.visibility = 'hidden';\n      });\n    }\n  };\n  /**\n   * Use `childElementCount` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getCount = function () {\n    return this.childElementCount;\n  };\n  /**\n   * Use `parentElement` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getParent = function () {\n    return this.parentElement;\n  };\n  /**\n   * Use `children` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getChildren = function () {\n    return this.children;\n  };\n  /**\n   * Use `firstElementChild` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getFirst = function () {\n    return this.firstElementChild;\n  };\n  /**\n   * Use `lastElementChild` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getLast = function () {\n    return this.lastElementChild;\n  };\n  /**\n   * Use `this.children[index]` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.getChildByIndex = function (index) {\n    return this.children[index] || null;\n  };\n  /**\n   * Use `appendChild` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.add = function (child, index) {\n    return this.appendChild(child, index);\n  };\n  /**\n   * Use `this.style.clipPath` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.setClip = function (clipPath) {\n    this.style.clipPath = clipPath;\n  };\n  /**\n   * @deprecated\n   */\n  DisplayObject.prototype.set = function (name, value) {\n    // @ts-ignore\n    this.config[name] = value;\n  };\n  /**\n   * @deprecated\n   */\n  DisplayObject.prototype.get = function (name) {\n    return this.config[name];\n  };\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.moveTo = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    this.setPosition(position, y, z);\n    return this;\n  };\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.move = function (position, y, z) {\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    this.setPosition(position, y, z);\n    return this;\n  };\n  /**\n   * Use `this.style.zIndex` instead.\n   * @deprecated\n   */\n  DisplayObject.prototype.setZIndex = function (zIndex) {\n    this.style.zIndex = zIndex;\n    return this;\n  };\n  return DisplayObject;\n}(Element);\n\n/**\n * holds useful CSS-related methods.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS\n *\n * * CSS Typed OM @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/factory_functions\n * * register property @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n * * CSS Layout API\n */\nvar CSS = {\n  /**\n   * <number>\n   * @see https://drafts.csswg.org/css-values-4/#number-value\n   */\n  number: function (n) {\n    return new CSSUnitValue(n);\n  },\n  /**\n   * <percentage>\n   * @see https://drafts.csswg.org/css-values-4/#percentage-value\n   */\n  percent: function (n) {\n    return new CSSUnitValue(n, '%');\n  },\n  /**\n   * <length>\n   */\n  px: function (n) {\n    return new CSSUnitValue(n, 'px');\n  },\n  /**\n   * <length>\n   */\n  em: function (n) {\n    return new CSSUnitValue(n, 'em');\n  },\n  rem: function (n) {\n    return new CSSUnitValue(n, 'rem');\n  },\n  /**\n   * <angle>\n   */\n  deg: function (n) {\n    return new CSSUnitValue(n, 'deg');\n  },\n  /**\n   * <angle>\n   */\n  grad: function (n) {\n    return new CSSUnitValue(n, 'grad');\n  },\n  /**\n   * <angle>\n   */\n  rad: function (n) {\n    return new CSSUnitValue(n, 'rad');\n  },\n  /**\n   * <angle>\n   */\n  turn: function (n) {\n    return new CSSUnitValue(n, 'turn');\n  },\n  /**\n   * <time>\n   */\n  s: function (n) {\n    return new CSSUnitValue(n, 's');\n  },\n  /**\n   * <time>\n   */\n  ms: function (n) {\n    return new CSSUnitValue(n, 'ms');\n  },\n  /**\n   * CSS Properties & Values API\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API\n   * @see https://drafts.css-houdini.org/css-properties-values-api/#registering-custom-properties\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n   */\n  registerProperty: function (definition) {\n    var name = definition.name,\n      inherits = definition.inherits,\n      interpolable = definition.interpolable,\n      initialValue = definition.initialValue,\n      syntax = definition.syntax;\n    runtime.styleValueRegistry.registerMetadata({\n      n: name,\n      inh: inherits,\n      int: interpolable,\n      d: initialValue,\n      syntax: syntax\n    });\n  },\n  /**\n   * CSS Layout API\n   * register layout\n   *\n   * @see https://github.com/w3c/css-houdini-drafts/blob/main/css-layout-api/EXPLAINER.md\n   * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini#css_layout_api\n   */\n  registerLayout: function (name, clazz) {\n    runtime.layoutRegistry.registerLayout(name, clazz);\n  }\n};\nvar Circle = /** @class */function (_super) {\n  __extends(Circle, _super);\n  function Circle(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.CIRCLE,\n      style: runtime.enableCSSParsing ? __assign({\n        cx: '',\n        cy: '',\n        r: ''\n      }, style) : __assign({}, style),\n      initialParsedStyle: {\n        anchor: [0.5, 0.5],\n        transformOrigin: runtime.enableCSSParsing ? null : [PECENTAGE_50, PECENTAGE_50]\n      }\n    }, rest)) || this;\n  }\n  return Circle;\n}(DisplayObject);\n\n/**\n * shadow root\n * @see https://yuque.antfin-inc.com/antv/czqvg5/pgqipg\n */\nvar CustomElement = /** @class */function (_super) {\n  __extends(CustomElement, _super);\n  // private shadowNodes: DisplayObject[] = [];\n  function CustomElement(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var _this = this;\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    _this = _super.call(this, __assign({\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: ''\n      }, style) : __assign({}, style)\n    }, rest)) || this;\n    // static get observedAttributes(): string[] {\n    //   return [];\n    // }\n    _this.isCustomElement = true;\n    return _this;\n  }\n  return CustomElement;\n}(DisplayObject);\nvar Ellipse = /** @class */function (_super) {\n  __extends(Ellipse, _super);\n  function Ellipse(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.ELLIPSE,\n      style: runtime.enableCSSParsing ? __assign({\n        cx: '',\n        cy: '',\n        rx: '',\n        ry: ''\n      }, style) : __assign({}, style),\n      initialParsedStyle: {\n        anchor: [0.5, 0.5],\n        transformOrigin: runtime.enableCSSParsing ? null : [PECENTAGE_50, PECENTAGE_50]\n      }\n    }, rest)) || this;\n  }\n  return Ellipse;\n}(DisplayObject);\n\n/**\n * its attributes are inherited by its children.\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/g\n *\n * @example\n * <g fill=\"white\" stroke=\"green\" stroke-width=\"5\">\n    <circle cx=\"40\" cy=\"40\" r=\"25\" />\n    <circle cx=\"60\" cy=\"60\" r=\"25\" />\n  </g>\n */\nvar Group = /** @class */function (_super) {\n  __extends(Group, _super);\n  function Group(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.GROUP,\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: '',\n        width: '',\n        height: ''\n      }, style) : __assign({}, style)\n    }, rest)) || this;\n  }\n  return Group;\n}(DisplayObject);\n\n/**\n * HTML container\n * @see https://github.com/pmndrs/drei#html\n */\nvar HTML = /** @class */function (_super) {\n  __extends(HTML, _super);\n  function HTML(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var _this = this;\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    _this = _super.call(this, __assign({\n      type: Shape.HTML,\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: '',\n        width: 'auto',\n        height: 'auto',\n        innerHTML: ''\n      }, style) : __assign({}, style)\n    }, rest)) || this;\n    _this.cullable.enable = false;\n    return _this;\n  }\n  /**\n   * return wrapper HTMLElement\n   * * <div> in g-webgl/canvas\n   * * <foreignObject> in g-svg\n   */\n  HTML.prototype.getDomElement = function () {\n    return this.parsedStyle.$el;\n  };\n  /**\n   * override with $el.getBoundingClientRect\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\n   */\n  HTML.prototype.getBoundingClientRect = function () {\n    if (this.parsedStyle.$el) {\n      return this.parsedStyle.$el.getBoundingClientRect();\n    } else {\n      var _a = this.parsedStyle,\n        x = _a.x,\n        y = _a.y,\n        width = _a.width,\n        height = _a.height;\n      return new Rectangle(x, y, width, height);\n    }\n  };\n  HTML.prototype.getClientRects = function () {\n    return [this.getBoundingClientRect()];\n  };\n  HTML.prototype.getBounds = function () {\n    var _a, _b;\n    var clientRect = this.getBoundingClientRect();\n    // calc context's offset\n    // @ts-ignore\n    var canvasRect = (_b = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.getContextService().getBoundingClientRect();\n    var aabb = new AABB();\n    var minX = clientRect.left - ((canvasRect === null || canvasRect === void 0 ? void 0 : canvasRect.left) || 0);\n    var minY = clientRect.top - ((canvasRect === null || canvasRect === void 0 ? void 0 : canvasRect.top) || 0);\n    aabb.setMinMax([minX, minY, 0], [minX + clientRect.width, minY + clientRect.height, 0]);\n    return aabb;\n  };\n  HTML.prototype.getLocalBounds = function () {\n    if (this.parentNode) {\n      var parentInvert = mat4.invert(mat4.create(), this.parentNode.getWorldTransform());\n      var bounds = this.getBounds();\n      if (!AABB.isEmpty(bounds)) {\n        var localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n    return this.getBounds();\n  };\n  return HTML;\n}(DisplayObject);\nvar Image = /** @class */function (_super) {\n  __extends(Image, _super);\n  function Image(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.IMAGE,\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: '',\n        img: '',\n        width: '',\n        height: ''\n      }, style) : __assign({}, style)\n    }, rest)) || this;\n  }\n  return Image;\n}(DisplayObject);\n\n/**\n * Create a line connecting two points.\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/line\n *\n * Also support for using marker.\n */\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var _this = this;\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    _this = _super.call(this, __assign({\n      type: Shape.LINE,\n      style: __assign({\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,\n        z1: 0,\n        z2: 0\n      }, style)\n    }, rest)) || this;\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    var _b = _this.parsedStyle,\n      markerStart = _b.markerStart,\n      markerEnd = _b.markerEnd;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  Line.prototype.attributeChangedCallback = function (attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n    if (attrName === 'x1' || attrName === 'y1' || attrName === 'x2' || attrName === 'y2' || attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    }\n  };\n  Line.prototype.transformMarker = function (isStart) {\n    var _a = this.parsedStyle,\n      markerStart = _a.markerStart,\n      markerEnd = _a.markerEnd,\n      markerStartOffset = _a.markerStartOffset,\n      markerEndOffset = _a.markerEndOffset,\n      x1 = _a.x1,\n      x2 = _a.x2,\n      y1 = _a.y1,\n      y2 = _a.y2,\n      defX = _a.defX,\n      defY = _a.defY;\n    var marker = isStart ? markerStart : markerEnd;\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n    var rad = 0;\n    var x;\n    var y;\n    var ox;\n    var oy;\n    var offset;\n    var originalAngle;\n    if (isStart) {\n      ox = x1 - defX;\n      oy = y1 - defY;\n      x = x2 - x1;\n      y = y2 - y1;\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      ox = x2 - defX;\n      oy = y2 - defY;\n      x = x1 - x2;\n      y = y1 - y2;\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n    // account for markerOffset\n    marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n    marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n  };\n  Line.prototype.getPoint = function (ratio, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    // TODO: account for z1/z2 in 3D line\n    var _a = this.parsedStyle,\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2,\n      defX = _a.defX,\n      defY = _a.defY;\n    var _b = linePointAt(x1, y1, x2, y2, ratio),\n      x = _b.x,\n      y = _b.y;\n    var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x - defX, y - defY, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  };\n  Line.prototype.getPointAtLength = function (distance, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  };\n  Line.prototype.getTotalLength = function () {\n    // TODO: account for z1/z2 in 3D line\n    var _a = this.parsedStyle,\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return lineLength(x1, y1, x2, y2);\n  };\n  return Line;\n}(DisplayObject);\nvar Path = /** @class */function (_super) {\n  __extends(Path, _super);\n  function Path(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var _this = this;\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    _this = _super.call(this, __assign({\n      type: Shape.PATH,\n      style: runtime.enableCSSParsing ? __assign({\n        path: '',\n        miterLimit: ''\n      }, style) : __assign({}, style),\n      initialParsedStyle: runtime.enableCSSParsing ? null : {\n        miterLimit: 4,\n        path: __assign({}, EMPTY_PARSED_PATH)\n      }\n    }, rest)) || this;\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _b = _this.parsedStyle,\n      markerStart = _b.markerStart,\n      markerEnd = _b.markerEnd,\n      markerMid = _b.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  Path.prototype.attributeChangedCallback = function (attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n    if (attrName === 'path') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue);\n    }\n  };\n  Path.prototype.transformMarker = function (isStart) {\n    var _a = this.parsedStyle,\n      markerStart = _a.markerStart,\n      markerEnd = _a.markerEnd,\n      markerStartOffset = _a.markerStartOffset,\n      markerEndOffset = _a.markerEndOffset,\n      defX = _a.defX,\n      defY = _a.defY;\n    var marker = isStart ? markerStart : markerEnd;\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n    var rad = 0;\n    var x;\n    var y;\n    var ox;\n    var oy;\n    var offset;\n    var originalAngle;\n    if (isStart) {\n      var _b = __read(this.getStartTangent(), 2),\n        p1 = _b[0],\n        p2 = _b[1];\n      ox = p2[0] - defX;\n      oy = p2[1] - defY;\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      var _c = __read(this.getEndTangent(), 2),\n        p1 = _c[0],\n        p2 = _c[1];\n      ox = p2[0] - defX;\n      oy = p2[1] - defY;\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n    // account for markerOffset\n    marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n    marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n  };\n  Path.prototype.placeMarkerMid = function (marker) {\n    var _a = this.parsedStyle,\n      segments = _a.path.segments,\n      defX = _a.defX,\n      defY = _a.defY;\n    // clear all existed markers\n    this.markerMidList.forEach(function (marker) {\n      marker.remove();\n    });\n    if (marker && isDisplayObject(marker)) {\n      for (var i = 1; i < segments.length - 1; i++) {\n        var _b = __read(segments[i].currentPoint, 2),\n          ox = _b[0],\n          oy = _b[1];\n        var cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox - defX, oy - defY);\n        // TODO: orient of marker\n      }\n    }\n  };\n  /**\n   * Returns the total length of the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength\n   */\n  Path.prototype.getTotalLength = function () {\n    return getOrCalculatePathTotalLength(this);\n  };\n  /**\n   * Returns the point at a given distance along the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength\n   */\n  Path.prototype.getPointAtLength = function (distance, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    var _a = this.parsedStyle,\n      defX = _a.defX,\n      defY = _a.defY,\n      absolutePath = _a.path.absolutePath;\n    var _b = getPointAtLength(absolutePath, distance),\n      x = _b.x,\n      y = _b.y;\n    var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x - defX, y - defY, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  };\n  /**\n   * Returns the point at a given ratio of the total length in path.\n   */\n  Path.prototype.getPoint = function (ratio, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    return this.getPointAtLength(ratio * getOrCalculatePathTotalLength(this), inWorldSpace);\n  };\n  /**\n   * Get start tangent vector\n   */\n  Path.prototype.getStartTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var result = [];\n    if (segments.length > 1) {\n      var startPoint = segments[0].currentPoint;\n      var endPoint = segments[1].currentPoint;\n      var tangent = segments[1].startTangent;\n      result = [];\n      if (tangent) {\n        result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      } else {\n        result.push([endPoint[0], endPoint[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      }\n    }\n    return result;\n  };\n  /**\n   * Get end tangent vector\n   */\n  Path.prototype.getEndTangent = function () {\n    var segments = this.parsedStyle.path.segments;\n    var length = segments.length;\n    var result = [];\n    if (length > 1) {\n      var startPoint = segments[length - 2].currentPoint;\n      var endPoint = segments[length - 1].currentPoint;\n      var tangent = segments[length - 1].endTangent;\n      result = [];\n      if (tangent) {\n        result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      } else {\n        result.push([startPoint[0], startPoint[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      }\n    }\n    return result;\n  };\n  return Path;\n}(DisplayObject);\nvar Polygon = /** @class */function (_super) {\n  __extends(Polygon, _super);\n  function Polygon(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var _this = this;\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    _this = _super.call(this, __assign({\n      type: Shape.POLYGON,\n      style: runtime.enableCSSParsing ? __assign({\n        points: '',\n        miterLimit: '',\n        isClosed: true\n      }, style) : __assign({}, style),\n      initialParsedStyle: runtime.enableCSSParsing ? null : {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: true\n      }\n    }, rest)) || this;\n    _this.markerStartAngle = 0;\n    _this.markerEndAngle = 0;\n    /**\n     * markers placed at the mid\n     */\n    _this.markerMidList = [];\n    var _b = _this.parsedStyle,\n      markerStart = _b.markerStart,\n      markerEnd = _b.markerEnd,\n      markerMid = _b.markerMid;\n    if (markerStart && isDisplayObject(markerStart)) {\n      _this.markerStartAngle = markerStart.getLocalEulerAngles();\n      _this.appendChild(markerStart);\n    }\n    if (markerMid && isDisplayObject(markerMid)) {\n      _this.placeMarkerMid(markerMid);\n    }\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      _this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      _this.appendChild(markerEnd);\n    }\n    _this.transformMarker(true);\n    _this.transformMarker(false);\n    return _this;\n  }\n  Polygon.prototype.attributeChangedCallback = function (attrName, oldValue, newValue, prevParsedValue, newParsedValue) {\n    if (attrName === 'points') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (attrName === 'markerStartOffset' || attrName === 'markerEndOffset') {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue);\n    }\n  };\n  Polygon.prototype.transformMarker = function (isStart) {\n    var _a = this.parsedStyle,\n      markerStart = _a.markerStart,\n      markerEnd = _a.markerEnd,\n      markerStartOffset = _a.markerStartOffset,\n      markerEndOffset = _a.markerEndOffset,\n      P = _a.points,\n      defX = _a.defX,\n      defY = _a.defY;\n    var points = (P || {}).points;\n    var marker = isStart ? markerStart : markerEnd;\n    if (!marker || !isDisplayObject(marker) || !points) {\n      return;\n    }\n    var rad = 0;\n    var x;\n    var y;\n    var ox;\n    var oy;\n    var offset;\n    var originalAngle;\n    ox = points[0][0] - defX;\n    oy = points[0][1] - defY;\n    if (isStart) {\n      x = points[1][0] - points[0][0];\n      y = points[1][1] - points[0][1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      var length_1 = points.length;\n      if (!this.parsedStyle.isClosed) {\n        ox = points[length_1 - 1][0] - defX;\n        oy = points[length_1 - 1][1] - defY;\n        x = points[length_1 - 2][0] - points[length_1 - 1][0];\n        y = points[length_1 - 2][1] - points[length_1 - 1][1];\n      } else {\n        x = points[length_1 - 1][0] - points[0][0];\n        y = points[length_1 - 1][1] - points[0][1];\n      }\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n    // account for markerOffset\n    marker.setLocalEulerAngles(rad * 180 / Math.PI + originalAngle);\n    marker.setLocalPosition(ox + Math.cos(rad) * offset, oy + Math.sin(rad) * offset);\n  };\n  Polygon.prototype.placeMarkerMid = function (marker) {\n    var _a = this.parsedStyle,\n      P = _a.points,\n      defX = _a.defX,\n      defY = _a.defY;\n    var points = (P || {}).points;\n    // clear all existed markers\n    this.markerMidList.forEach(function (marker) {\n      marker.remove();\n    });\n    this.markerMidList = [];\n    if (marker && isDisplayObject(marker) && points) {\n      for (var i = 1; i < (this.parsedStyle.isClosed ? points.length : points.length - 1); i++) {\n        var ox = points[i][0] - defX;\n        var oy = points[i][1] - defY;\n        var cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox, oy);\n        // TODO: orient of marker\n      }\n    }\n  };\n  return Polygon;\n}(DisplayObject);\n\n/**\n * Polyline inherits the marker-related capabilities of Polygon.\n */\nvar Polyline = /** @class */function (_super) {\n  __extends(Polyline, _super);\n  function Polyline(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.POLYLINE,\n      style: runtime.enableCSSParsing ? __assign({\n        points: '',\n        miterLimit: '',\n        isClosed: false\n      }, style) : __assign({}, style),\n      initialParsedStyle: runtime.enableCSSParsing ? null : {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: []\n        },\n        miterLimit: 4,\n        isClosed: false\n      }\n    }, rest)) || this;\n  }\n  Polyline.prototype.getTotalLength = function () {\n    return this.parsedStyle.points.totalLength;\n  };\n  Polyline.prototype.getPointAtLength = function (distance, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  };\n  Polyline.prototype.getPoint = function (ratio, inWorldSpace) {\n    if (inWorldSpace === void 0) {\n      inWorldSpace = false;\n    }\n    var _a = this.parsedStyle,\n      defX = _a.defX,\n      defY = _a.defY,\n      _b = _a.points,\n      points = _b.points,\n      segments = _b.segments;\n    var subt = 0;\n    var index = 0;\n    segments.forEach(function (v, i) {\n      if (ratio >= v[0] && ratio <= v[1]) {\n        subt = (ratio - v[0]) / (v[1] - v[0]);\n        index = i;\n      }\n    });\n    var _c = linePointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt),\n      x = _c.x,\n      y = _c.y;\n    var transformed = vec3.transformMat4(vec3.create(), vec3.fromValues(x - defX, y - defY, 0), inWorldSpace ? this.getWorldTransform() : this.getLocalTransform());\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  };\n  Polyline.prototype.getStartTangent = function () {\n    var points = this.parsedStyle.points.points;\n    var result = [];\n    result.push([points[1][0], points[1][1]]);\n    result.push([points[0][0], points[0][1]]);\n    return result;\n  };\n  Polyline.prototype.getEndTangent = function () {\n    var points = this.parsedStyle.points.points;\n    var l = points.length - 1;\n    var result = [];\n    result.push([points[l - 1][0], points[l - 1][1]]);\n    result.push([points[l][0], points[l][1]]);\n    return result;\n  };\n  return Polyline;\n}(Polygon);\nvar Rect = /** @class */function (_super) {\n  __extends(Rect, _super);\n  function Rect(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.RECT,\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: '',\n        width: '',\n        height: '',\n        radius: ''\n      }, style) : __assign({}, style)\n    }, rest)) || this;\n  }\n  return Rect;\n}(DisplayObject);\n\n/**\n * <text> @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextElement\n */\nvar Text = /** @class */function (_super) {\n  __extends(Text, _super);\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement#constants\n   */\n  // LENGTHADJUST_SPACING: number = 1;\n  // LENGTHADJUST_SPACINGANDGLYPHS: number = 2;\n  // LENGTHADJUST_UNKNOWN: number = 0;\n  function Text(_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n    var style = _a.style,\n      rest = __rest(_a, [\"style\"]);\n    return _super.call(this, __assign({\n      type: Shape.TEXT,\n      style: runtime.enableCSSParsing ? __assign({\n        x: '',\n        y: '',\n        text: '',\n        fontSize: '',\n        fontFamily: '',\n        fontStyle: '',\n        fontWeight: '',\n        fontVariant: '',\n        textAlign: '',\n        textBaseline: '',\n        textTransform: '',\n        fill: 'black',\n        letterSpacing: '',\n        lineHeight: '',\n        miterLimit: '',\n        // whiteSpace: 'pre',\n        wordWrap: false,\n        wordWrapWidth: 0,\n        leading: 0,\n        dx: '',\n        dy: ''\n      }, style) : __assign({\n        fill: 'black'\n      }, style),\n      initialParsedStyle: runtime.enableCSSParsing ? {} : {\n        x: 0,\n        y: 0,\n        fontSize: 16,\n        fontFamily: 'sans-serif',\n        fontStyle: 'normal',\n        fontWeight: 'normal',\n        fontVariant: 'normal',\n        lineHeight: 0,\n        letterSpacing: 0,\n        textBaseline: 'alphabetic',\n        textAlign: 'start',\n        wordWrap: false,\n        wordWrapWidth: 0,\n        leading: 0,\n        dx: 0,\n        dy: 0\n      }\n    }, rest)) || this;\n  }\n  // lengthAdjust: SVGAnimatedEnumeration;\n  // textLength: SVGAnimatedLength;\n  // getCharNumAtPosition(point?: DOMPointInit): number {\n  //   throw new Error('Method not implemented.');\n  // }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement\n   */\n  Text.prototype.getComputedTextLength = function () {\n    var _a;\n    return ((_a = this.parsedStyle.metrics) === null || _a === void 0 ? void 0 : _a.maxLineWidth) || 0;\n  };\n  // getEndPositionOfChar(charnum: number): DOMPoint {\n  //   throw new Error('Method not implemented.');\n  // }\n  // getExtentOfChar(charnum: number): DOMRect {\n  //   throw new Error('Method not implemented.');\n  // }\n  // getNumberOfChars(): number {\n  //   throw new Error('Method not implemented.');\n  // }\n  // getRotationOfChar(charnum: number): number {\n  //   throw new Error('Method not implemented.');\n  // }\n  // getStartPositionOfChar(charnum: number): DOMPoint {\n  //   throw new Error('Method not implemented.');\n  // }\n  // getSubStringLength(charnum: number, nchars: number): number {\n  //   throw new Error('Method not implemented.');\n  // }\n  // selectSubString(charnum: number, nchars: number): void {\n  //   throw new Error('Method not implemented.');\n  // }\n  Text.prototype.getLineBoundingRects = function () {\n    var _a;\n    return ((_a = this.parsedStyle.metrics) === null || _a === void 0 ? void 0 : _a.lineMetrics) || [];\n  };\n  Text.prototype.isOverflowing = function () {\n    return !!this.parsedStyle.isOverflowing;\n  };\n  return Text;\n}(DisplayObject);\n\n/**\n * canvas.customElements\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry\n */\nvar CustomElementRegistry = /** @class */function () {\n  function CustomElementRegistry() {\n    this.registry = {};\n    this.define(Shape.CIRCLE, Circle);\n    this.define(Shape.ELLIPSE, Ellipse);\n    this.define(Shape.RECT, Rect);\n    this.define(Shape.IMAGE, Image);\n    this.define(Shape.LINE, Line);\n    this.define(Shape.GROUP, Group);\n    this.define(Shape.PATH, Path);\n    this.define(Shape.POLYGON, Polygon);\n    this.define(Shape.POLYLINE, Polyline);\n    this.define(Shape.TEXT, Text);\n    this.define(Shape.HTML, HTML);\n  }\n  CustomElementRegistry.prototype.define = function (name, constructor) {\n    this.registry[name] = constructor;\n  };\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/get\n   */\n  CustomElementRegistry.prototype.get = function (name) {\n    return this.registry[name];\n  };\n  return CustomElementRegistry;\n}();\n\n/**\n * the entry of DOM tree\n * Document -> Node -> EventTarget\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n */\nvar Document = /** @class */function (_super) {\n  __extends(Document, _super);\n  function Document() {\n    var _this = _super.call(this) || this;\n    /**\n     * only document has defaultView, points to canvas,\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/defaultView\n     */\n    _this.defaultView = null;\n    _this.ownerDocument = null;\n    _this.nodeName = 'document';\n    // create timeline\n    try {\n      _this.timeline = new runtime.AnimationTimeline(_this);\n    } catch (e) {}\n    /**\n     * for inherited properties, the initial value is used on the root element only,\n     * as long as no specified value is supplied.\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value\n     */\n    var initialStyle = {};\n    BUILT_IN_PROPERTIES.forEach(function (_a) {\n      var n = _a.n,\n        inh = _a.inh,\n        d = _a.d;\n      if (inh && d) {\n        initialStyle[n] = isFunction(d) ? d(Shape.GROUP) : d;\n      }\n    });\n    // like <html> in DOM tree\n    _this.documentElement = new Group({\n      id: 'g-root',\n      style: initialStyle\n    });\n    _this.documentElement.ownerDocument = _this;\n    _this.documentElement.parentNode = _this;\n    _this.childNodes = [_this.documentElement];\n    return _this;\n  }\n  Object.defineProperty(Document.prototype, \"children\", {\n    get: function () {\n      return this.childNodes;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Document.prototype, \"childElementCount\", {\n    get: function () {\n      return this.childNodes.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Document.prototype, \"firstElementChild\", {\n    get: function () {\n      return this.firstChild;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Document.prototype, \"lastElementChild\", {\n    get: function () {\n      return this.lastChild;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * @example const circle = document.createElement('circle', { style: { r: 10 } });\n   */\n  Document.prototype.createElement = function (tagName, options) {\n    // @observablehq/plot will create <svg>\n    if (tagName === 'svg') {\n      return this.documentElement;\n    }\n    // d3 will use <tspan>\n    var clazz = this.defaultView.customElements.get(tagName);\n    if (!clazz) {\n      console.warn('Unsupported tagName: ', tagName);\n      clazz = tagName === 'tspan' ? Text : Group;\n    }\n    var shape = new clazz(options);\n    shape.ownerDocument = this;\n    return shape;\n  };\n  Document.prototype.createElementNS = function (namespaceURI, tagName, options) {\n    return this.createElement(tagName, options);\n  };\n  Document.prototype.cloneNode = function (deep) {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  };\n  Document.prototype.destroy = function () {\n    try {\n      this.documentElement.destroyChildren();\n      this.timeline.destroy();\n    } catch (e) {}\n  };\n  /**\n   * Picking 2D graphics with RBush based on BBox, fast but inaccurate.\n   */\n  Document.prototype.elementsFromBBox = function (minX, minY, maxX, maxY) {\n    var rBush = this.defaultView.context.rBushRoot;\n    var rBushNodes = rBush.search({\n      minX: minX,\n      minY: minY,\n      maxX: maxX,\n      maxY: maxY\n    });\n    var hitTestList = [];\n    rBushNodes.forEach(function (_a) {\n      var displayObject = _a.displayObject;\n      var pointerEvents = displayObject.parsedStyle.pointerEvents;\n      // account for `visibility`\n      // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n      var isVisibilityAffected = ['auto', 'visiblepainted', 'visiblefill', 'visiblestroke', 'visible'].includes(pointerEvents);\n      if ((!isVisibilityAffected || isVisibilityAffected && displayObject.isVisible()) && !displayObject.isCulled() && displayObject.isInteractive()) {\n        hitTestList.push(displayObject);\n      }\n    });\n    // find group with max z-index\n    hitTestList.sort(function (a, b) {\n      return b.sortable.renderOrder - a.sortable.renderOrder;\n    });\n    return hitTestList;\n  };\n  Document.prototype.elementFromPointSync = function (x, y) {\n    var _a = this.defaultView.canvas2Viewport({\n        x: x,\n        y: y\n      }),\n      viewportX = _a.x,\n      viewportY = _a.y;\n    var _b = this.defaultView.getConfig(),\n      width = _b.width,\n      height = _b.height;\n    // outside canvas' viewport\n    if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n      return null;\n    }\n    var _c = this.defaultView.viewport2Client({\n        x: viewportX,\n        y: viewportY\n      }),\n      clientX = _c.x,\n      clientY = _c.y;\n    var picked = this.defaultView.getRenderingService().hooks.pickSync.call({\n      topmost: true,\n      position: {\n        x: x,\n        y: y,\n        viewportX: viewportX,\n        viewportY: viewportY,\n        clientX: clientX,\n        clientY: clientY\n      },\n      picked: []\n    }).picked;\n    return picked && picked[0] || this.documentElement;\n  };\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementFromPoint\n   */\n  Document.prototype.elementFromPoint = function (x, y) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, viewportX, viewportY, _b, width, height, _c, clientX, clientY, picked;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            _a = this.defaultView.canvas2Viewport({\n              x: x,\n              y: y\n            }), viewportX = _a.x, viewportY = _a.y;\n            _b = this.defaultView.getConfig(), width = _b.width, height = _b.height;\n            // outside canvas' viewport\n            if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n              return [2 /*return*/, null];\n            }\n            _c = this.defaultView.viewport2Client({\n              x: viewportX,\n              y: viewportY\n            }), clientX = _c.x, clientY = _c.y;\n            return [4 /*yield*/, this.defaultView.getRenderingService().hooks.pick.promise({\n              topmost: true,\n              position: {\n                x: x,\n                y: y,\n                viewportX: viewportX,\n                viewportY: viewportY,\n                clientX: clientX,\n                clientY: clientY\n              },\n              picked: []\n            })];\n          case 1:\n            picked = _d.sent().picked;\n            return [2 /*return*/, picked && picked[0] || this.documentElement];\n        }\n      });\n    });\n  };\n  Document.prototype.elementsFromPointSync = function (x, y) {\n    var _a = this.defaultView.canvas2Viewport({\n        x: x,\n        y: y\n      }),\n      viewportX = _a.x,\n      viewportY = _a.y;\n    var _b = this.defaultView.getConfig(),\n      width = _b.width,\n      height = _b.height;\n    // outside canvas' viewport\n    if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n      return [];\n    }\n    var _c = this.defaultView.viewport2Client({\n        x: viewportX,\n        y: viewportY\n      }),\n      clientX = _c.x,\n      clientY = _c.y;\n    var picked = this.defaultView.getRenderingService().hooks.pickSync.call({\n      topmost: false,\n      position: {\n        x: x,\n        y: y,\n        viewportX: viewportX,\n        viewportY: viewportY,\n        clientX: clientX,\n        clientY: clientY\n      },\n      picked: []\n    }).picked;\n    if (picked[picked.length - 1] !== this.documentElement) {\n      picked.push(this.documentElement);\n    }\n    return picked;\n  };\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n   */\n  Document.prototype.elementsFromPoint = function (x, y) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, viewportX, viewportY, _b, width, height, _c, clientX, clientY, picked;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            _a = this.defaultView.canvas2Viewport({\n              x: x,\n              y: y\n            }), viewportX = _a.x, viewportY = _a.y;\n            _b = this.defaultView.getConfig(), width = _b.width, height = _b.height;\n            // outside canvas' viewport\n            if (viewportX < 0 || viewportY < 0 || viewportX > width || viewportY > height) {\n              return [2 /*return*/, []];\n            }\n            _c = this.defaultView.viewport2Client({\n              x: viewportX,\n              y: viewportY\n            }), clientX = _c.x, clientY = _c.y;\n            return [4 /*yield*/, this.defaultView.getRenderingService().hooks.pick.promise({\n              topmost: false,\n              position: {\n                x: x,\n                y: y,\n                viewportX: viewportX,\n                viewportY: viewportY,\n                clientX: clientX,\n                clientY: clientY\n              },\n              picked: []\n            })];\n          case 1:\n            picked = _d.sent().picked;\n            if (picked[picked.length - 1] !== this.documentElement) {\n              picked.push(this.documentElement);\n            }\n            return [2 /*return*/, picked];\n        }\n      });\n    });\n  };\n  /**\n   * eg. Uncaught DOMException: Failed to execute 'appendChild' on 'Node': Only one element on document allowed.\n   */\n  Document.prototype.appendChild = function (newChild, index) {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  Document.prototype.insertBefore = function (newChild, refChild) {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  Document.prototype.removeChild = function (oldChild, destroy) {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  Document.prototype.replaceChild = function (newChild, oldChild, destroy) {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  Document.prototype.append = function () {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  Document.prototype.prepend = function () {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  };\n  /**\n   * Execute query on documentElement.\n   */\n  Document.prototype.getElementById = function (id) {\n    return this.documentElement.getElementById(id);\n  };\n  Document.prototype.getElementsByName = function (name) {\n    return this.documentElement.getElementsByName(name);\n  };\n  Document.prototype.getElementsByTagName = function (tagName) {\n    return this.documentElement.getElementsByTagName(tagName);\n  };\n  Document.prototype.getElementsByClassName = function (className) {\n    return this.documentElement.getElementsByClassName(className);\n  };\n  Document.prototype.querySelector = function (selectors) {\n    return this.documentElement.querySelector(selectors);\n  };\n  Document.prototype.querySelectorAll = function (selectors) {\n    return this.documentElement.querySelectorAll(selectors);\n  };\n  Document.prototype.find = function (filter) {\n    return this.documentElement.find(filter);\n  };\n  Document.prototype.findAll = function (filter) {\n    return this.documentElement.findAll(filter);\n  };\n  return Document;\n}(Node);\n\n/**\n * apply following rules:\n * 1. `visibility` in scenegraph node\n * 2. other custom culling strategies, eg. frustum culling\n */\nvar CullingPlugin = /** @class */function () {\n  function CullingPlugin(strategies) {\n    this.strategies = strategies;\n  }\n  CullingPlugin.prototype.apply = function (context) {\n    var camera = context.camera,\n      renderingService = context.renderingService,\n      renderingContext = context.renderingContext;\n    var strategies = this.strategies;\n    renderingService.hooks.cull.tap(CullingPlugin.tag, function (object) {\n      if (object) {\n        var cullable = object.cullable;\n        // cullable.visible = true;\n        // const renderBounds = object.getRenderBounds();\n        // if (AABB.isEmpty(renderBounds)) {\n        //   cullable.visible = false;\n        // } else {\n        //   const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n        //   const [p0, p1, p2, p3] = camera.getFrustum().planes;\n        //   tmpAABB.setMinMax([-p1.distance, -p3.distance, 0], [p0.distance, p2.distance, 0]);\n        //   cullable.visible = isShape2D ? renderBounds.intersects(tmpAABB) : true;\n        // }\n        if (strategies.length === 0) {\n          cullable.visible = renderingContext.unculledEntities.indexOf(object.entity) > -1;\n        } else {\n          // eg. implemented by g-webgl(frustum culling)\n          cullable.visible = strategies.every(function (strategy) {\n            return strategy.isVisible(camera, object);\n          });\n        }\n        if (!object.isCulled() && object.isVisible()) {\n          return object;\n        } else {\n          // if (this.renderingContext.renderListLastFrame.indexOf(object) > -1) {\n          object.dispatchEvent(new CustomEvent(ElementEvent.CULLED));\n          // }\n        }\n        return null;\n      }\n      return object;\n    });\n    renderingService.hooks.afterRender.tap(CullingPlugin.tag, function (object) {\n      object.cullable.visibilityPlaneMask = -1;\n    });\n  };\n  CullingPlugin.tag = 'Culling';\n  return CullingPlugin;\n}();\n\n/**\n * support mouse & touch events\n * @see https://github.com/pixijs/pixi.js/blob/dev/packages/interaction/README.md\n *\n * also provide some extra events such as `drag`\n */\nvar EventPlugin = /** @class */function () {\n  function EventPlugin() {\n    var _this = this;\n    this.autoPreventDefault = false;\n    this.rootPointerEvent = new FederatedPointerEvent(null);\n    this.rootWheelEvent = new FederatedWheelEvent(null);\n    this.onPointerMove = function (nativeEvent) {\n      var e_1, _a;\n      var _b, _c;\n      var canvas = (_c = (_b = _this.context.renderingContext.root) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.defaultView;\n      if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      try {\n        for (var normalizedEvents_1 = __values(normalizedEvents), normalizedEvents_1_1 = normalizedEvents_1.next(); !normalizedEvents_1_1.done; normalizedEvents_1_1 = normalizedEvents_1.next()) {\n          var normalizedEvent = normalizedEvents_1_1.value;\n          var event_1 = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event_1);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (normalizedEvents_1_1 && !normalizedEvents_1_1.done && (_a = normalizedEvents_1.return)) _a.call(normalizedEvents_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n    this.onClick = function (nativeEvent) {\n      var e_2, _a;\n      var _b, _c;\n      var canvas = (_c = (_b = _this.context.renderingContext.root) === null || _b === void 0 ? void 0 : _b.ownerDocument) === null || _c === void 0 ? void 0 : _c.defaultView;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      try {\n        for (var normalizedEvents_2 = __values(normalizedEvents), normalizedEvents_2_1 = normalizedEvents_2.next(); !normalizedEvents_2_1.done; normalizedEvents_2_1 = normalizedEvents_2.next()) {\n          var normalizedEvent = normalizedEvents_2_1.value;\n          var event_2 = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event_2);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (normalizedEvents_2_1 && !normalizedEvents_2_1.done && (_a = normalizedEvents_2.return)) _a.call(normalizedEvents_2);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    };\n  }\n  EventPlugin.prototype.apply = function (context) {\n    var _this = this;\n    this.context = context;\n    var renderingService = context.renderingService;\n    var canvas = this.context.renderingContext.root.ownerDocument.defaultView;\n    this.context.eventService.setPickHandler(function (position) {\n      var picked = _this.context.renderingService.hooks.pickSync.call({\n        position: position,\n        picked: [],\n        topmost: true // we only concern the topmost element\n      }).picked;\n      return picked[0] || null;\n    });\n    renderingService.hooks.pointerWheel.tap(EventPlugin.tag, function (nativeEvent) {\n      var wheelEvent = _this.normalizeWheelEvent(nativeEvent);\n      _this.context.eventService.mapEvent(wheelEvent);\n    });\n    renderingService.hooks.pointerDown.tap(EventPlugin.tag, function (nativeEvent) {\n      var e_3, _a;\n      if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n      var events = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      if (_this.autoPreventDefault && events[0].isNormalized) {\n        var cancelable = nativeEvent.cancelable || !('cancelable' in nativeEvent);\n        if (cancelable) {\n          nativeEvent.preventDefault();\n        }\n      }\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_3 = events_1_1.value;\n          var federatedEvent = _this.bootstrapEvent(_this.rootPointerEvent, event_3, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(federatedEvent);\n        }\n      } catch (e_3_1) {\n        e_3 = {\n          error: e_3_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_3) throw e_3.error;\n        }\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    });\n    renderingService.hooks.pointerUp.tap(EventPlugin.tag, function (nativeEvent) {\n      var e_4, _a;\n      if (canvas.supportsTouchEvents && nativeEvent.pointerType === 'touch') return;\n      // account for element in SVG\n      var $element = _this.context.contextService.getDomElement();\n      var outside = 'outside';\n      try {\n        outside = $element && nativeEvent.target && nativeEvent.target !== $element && $element.contains && !$element.contains(nativeEvent.target) ? 'outside' : '';\n      } catch (e) {\n        // nativeEvent.target maybe not Node, such as Window\n        // @see https://github.com/antvis/G/issues/1235\n      }\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      try {\n        for (var normalizedEvents_3 = __values(normalizedEvents), normalizedEvents_3_1 = normalizedEvents_3.next(); !normalizedEvents_3_1.done; normalizedEvents_3_1 = normalizedEvents_3.next()) {\n          var normalizedEvent = normalizedEvents_3_1.value;\n          var event_4 = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          event_4.type += outside;\n          _this.context.eventService.mapEvent(event_4);\n        }\n      } catch (e_4_1) {\n        e_4 = {\n          error: e_4_1\n        };\n      } finally {\n        try {\n          if (normalizedEvents_3_1 && !normalizedEvents_3_1.done && (_a = normalizedEvents_3.return)) _a.call(normalizedEvents_3);\n        } finally {\n          if (e_4) throw e_4.error;\n        }\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    });\n    renderingService.hooks.pointerMove.tap(EventPlugin.tag, this.onPointerMove);\n    renderingService.hooks.pointerOver.tap(EventPlugin.tag, this.onPointerMove);\n    renderingService.hooks.pointerOut.tap(EventPlugin.tag, this.onPointerMove);\n    renderingService.hooks.click.tap(EventPlugin.tag, this.onClick);\n    renderingService.hooks.pointerCancel.tap(EventPlugin.tag, function (nativeEvent) {\n      var e_5, _a;\n      var normalizedEvents = _this.normalizeToPointerEvent(nativeEvent, canvas);\n      try {\n        for (var normalizedEvents_4 = __values(normalizedEvents), normalizedEvents_4_1 = normalizedEvents_4.next(); !normalizedEvents_4_1.done; normalizedEvents_4_1 = normalizedEvents_4.next()) {\n          var normalizedEvent = normalizedEvents_4_1.value;\n          var event_5 = _this.bootstrapEvent(_this.rootPointerEvent, normalizedEvent, canvas, nativeEvent);\n          _this.context.eventService.mapEvent(event_5);\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (normalizedEvents_4_1 && !normalizedEvents_4_1.done && (_a = normalizedEvents_4.return)) _a.call(normalizedEvents_4);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n      _this.setCursor(_this.context.eventService.cursor);\n    });\n  };\n  EventPlugin.prototype.getViewportXY = function (nativeEvent) {\n    var x;\n    var y;\n    /**\n     * Should account for CSS Transform applied on container.\n     * @see https://github.com/antvis/G/issues/1161\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/offsetX\n     */\n    var offsetX = nativeEvent.offsetX,\n      offsetY = nativeEvent.offsetY,\n      clientX = nativeEvent.clientX,\n      clientY = nativeEvent.clientY;\n    if (this.context.config.supportsCSSTransform && !isNil(offsetX) && !isNil(offsetY)) {\n      x = offsetX;\n      y = offsetY;\n    } else {\n      var point = this.context.eventService.client2Viewport(new Point(clientX, clientY));\n      x = point.x;\n      y = point.y;\n    }\n    return {\n      x: x,\n      y: y\n    };\n  };\n  EventPlugin.prototype.bootstrapEvent = function (event, normalizedEvent, view, nativeEvent) {\n    event.view = view;\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n    event.pointerId = normalizedEvent.pointerId;\n    event.width = normalizedEvent.width;\n    event.height = normalizedEvent.height;\n    event.isPrimary = normalizedEvent.isPrimary;\n    event.pointerType = normalizedEvent.pointerType;\n    event.pressure = normalizedEvent.pressure;\n    event.tangentialPressure = normalizedEvent.tangentialPressure;\n    event.tiltX = normalizedEvent.tiltX;\n    event.tiltY = normalizedEvent.tiltY;\n    event.twist = normalizedEvent.twist;\n    this.transferMouseData(event, normalizedEvent);\n    var _a = this.getViewportXY(normalizedEvent),\n      x = _a.x,\n      y = _a.y;\n    event.viewport.x = x;\n    event.viewport.y = y;\n    var _b = this.context.eventService.viewport2Canvas(event.viewport),\n      canvasX = _b.x,\n      canvasY = _b.y;\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === 'pointerleave') {\n      event.type = 'pointerout';\n    }\n    if (event.type.startsWith('mouse')) {\n      event.type = event.type.replace('mouse', 'pointer');\n    }\n    if (event.type.startsWith('touch')) {\n      event.type = TOUCH_TO_POINTER[event.type] || event.type;\n    }\n    return event;\n  };\n  EventPlugin.prototype.normalizeWheelEvent = function (nativeEvent) {\n    var event = this.rootWheelEvent;\n    this.transferMouseData(event, nativeEvent);\n    event.deltaMode = nativeEvent.deltaMode;\n    event.deltaX = nativeEvent.deltaX;\n    event.deltaY = nativeEvent.deltaY;\n    event.deltaZ = nativeEvent.deltaZ;\n    var _a = this.getViewportXY(nativeEvent),\n      x = _a.x,\n      y = _a.y;\n    event.viewport.x = x;\n    event.viewport.y = y;\n    var _b = this.context.eventService.viewport2Canvas(event.viewport),\n      canvasX = _b.x,\n      canvasY = _b.y;\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n    event.nativeEvent = nativeEvent;\n    event.type = nativeEvent.type;\n    return event;\n  };\n  /**\n   * Transfers base & mouse event data from the nativeEvent to the federated event.\n   */\n  EventPlugin.prototype.transferMouseData = function (event, nativeEvent) {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement;\n    event.timeStamp = clock.now();\n    event.type = nativeEvent.type;\n    event.altKey = nativeEvent.altKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.shiftKey = nativeEvent.shiftKey;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.screen.x = nativeEvent.screenX;\n    event.screen.y = nativeEvent.screenY;\n    event.relatedTarget = null;\n  };\n  EventPlugin.prototype.setCursor = function (cursor) {\n    this.context.contextService.applyCursorStyle(cursor || this.context.config.cursor || 'default');\n  };\n  EventPlugin.prototype.normalizeToPointerEvent = function (event, canvas) {\n    var normalizedEvents = [];\n    if (canvas.isTouchEvent(event)) {\n      for (var i = 0; i < event.changedTouches.length; i++) {\n        var touch = event.changedTouches[i];\n        // use changedTouches instead of touches since touchend has no touches\n        // @see https://stackoverflow.com/a/10079076\n        if (isUndefined(touch.button)) touch.button = 0;\n        if (isUndefined(touch.buttons)) touch.buttons = 1;\n        if (isUndefined(touch.isPrimary)) {\n          touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n        }\n        if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n        if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n        if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n        if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n        if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n        if (isUndefined(touch.pointerId)) touch.pointerId = touch.identifier || 0;\n        if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n        if (isUndefined(touch.twist)) touch.twist = 0;\n        if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n        touch.isNormalized = true;\n        touch.type = event.type;\n        normalizedEvents.push(touch);\n      }\n    } else if (canvas.isMouseEvent(event)) {\n      var tempEvent = event;\n      if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n      if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n      if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n      if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n      if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n      if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n      if (isUndefined(tempEvent.pointerId)) tempEvent.pointerId = MOUSE_POINTER_ID;\n      if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n      if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n      if (isUndefined(tempEvent.tangentialPressure)) tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n    return normalizedEvents;\n  };\n  EventPlugin.tag = 'Event';\n  return EventPlugin;\n}();\n\n// group is not a 2d shape\nvar shape2D = [Shape.CIRCLE, Shape.ELLIPSE, Shape.IMAGE, Shape.RECT, Shape.LINE, Shape.POLYLINE, Shape.POLYGON, Shape.TEXT, Shape.PATH, Shape.HTML];\nvar FrustumCullingStrategy = /** @class */function () {\n  function FrustumCullingStrategy() {}\n  FrustumCullingStrategy.prototype.isVisible = function (camera, object) {\n    // return true;\n    var _a, _b;\n    var cullable = object.cullable;\n    if (!cullable.enable) {\n      return true;\n    }\n    var renderBounds = object.getRenderBounds();\n    if (AABB.isEmpty(renderBounds)) {\n      return false;\n    }\n    // get VP matrix from camera\n    var frustum = camera.getFrustum();\n    var parentVisibilityPlaneMask = (_b = (_a = object.parentNode) === null || _a === void 0 ? void 0 : _a.cullable) === null || _b === void 0 ? void 0 : _b.visibilityPlaneMask;\n    cullable.visibilityPlaneMask = this.computeVisibilityWithPlaneMask(object, renderBounds, parentVisibilityPlaneMask || Mask.INDETERMINATE, frustum.planes);\n    cullable.visible = cullable.visibilityPlaneMask !== Mask.OUTSIDE;\n    return cullable.visible;\n  };\n  /**\n   *\n   * @see「Optimized View Frustum Culling Algorithms for Bounding Boxes」\n   * @see https://github.com/antvis/GWebGPUEngine/issues/3\n   *\n   * * 基础相交测试 the basic intersection test\n   * * 标记 masking @see https://cesium.com/blog/2015/08/04/fast-hierarchical-culling/\n   * * TODO: 平面一致性测试 the plane-coherency test\n   * * TODO: 支持 mesh 指定自身的剔除策略，参考 Babylon.js @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n   *\n   * @param aabb aabb\n   * @param parentPlaneMask mask of parent\n   * @param planes planes of frustum\n   */\n  FrustumCullingStrategy.prototype.computeVisibilityWithPlaneMask = function (object, aabb, parentPlaneMask, planes) {\n    if (parentPlaneMask === Mask.OUTSIDE || parentPlaneMask === Mask.INSIDE) {\n      // 父节点完全位于视锥内或者外部，直接返回\n      return parentPlaneMask;\n    }\n    // Start with MASK_INSIDE (all zeros) so that after the loop, the return value can be compared with MASK_INSIDE.\n    // (Because if there are fewer than 31 planes, the upper bits wont be changed.)\n    var mask = Mask.INSIDE;\n    var isShape2D = shape2D.indexOf(object.nodeName) > -1;\n    // Use viewport culling for 2D shapes\n    // @see https://github.com/antvis/g/issues/914\n    for (var k = 0, len = planes.length; k < len; ++k) {\n      // For k greater than 31 (since 31 is the maximum number of INSIDE/INTERSECTING bits we can store), skip the optimization.\n      var flag = 1 << k;\n      if ((parentPlaneMask & flag) === 0) {\n        // 父节点处于当前面内部，可以跳过\n        continue;\n      }\n      // skip near & far planes when testing 2D shapes\n      if (isShape2D && (k === 4 || k === 5)) {\n        continue;\n      }\n      // p-vertex n-vertex <-|plane p-vertex n-vertex\n      // 使用 p-vertex 和 n-vertex 加速，避免进行平面和 aabb 全部顶点的相交检测\n      var _a = planes[k],\n        normal = _a.normal,\n        distance = _a.distance;\n      if (vec3.dot(normal, aabb.getPositiveFarPoint(planes[k])) + distance < 0) {\n        return Mask.OUTSIDE;\n      }\n      if (vec3.dot(normal, aabb.getNegativeFarPoint(planes[k])) + distance < 0) {\n        // 和当前面相交，对应位置为1，继续检测下一个面\n        mask |= flag;\n      }\n    }\n    return mask;\n  };\n  return FrustumCullingStrategy;\n}();\nvar PrepareRendererPlugin = /** @class */function () {\n  function PrepareRendererPlugin() {\n    /**\n     * sync to RBush later\n     */\n    this.toSync = new Set();\n  }\n  // private isFirstTimeRendering = true;\n  // private syncing = false;\n  PrepareRendererPlugin.prototype.apply = function (context) {\n    var _this = this;\n    var renderingService = context.renderingService,\n      renderingContext = context.renderingContext,\n      rBushRoot = context.rBushRoot;\n    var canvas = renderingContext.root.ownerDocument.defaultView;\n    this.rBush = rBushRoot;\n    var handleAttributeChanged = function (e) {\n      var object = e.target;\n      object.renderable.dirty = true;\n      renderingService.dirtify();\n    };\n    var handleBoundsChanged = function (e) {\n      var affectChildren = e.detail.affectChildren;\n      var object = e.target;\n      if (affectChildren) {\n        object.forEach(function (node) {\n          _this.toSync.add(node);\n        });\n      }\n      var p = object;\n      while (p) {\n        if (p.renderable) {\n          _this.toSync.add(p);\n        }\n        p = p.parentElement;\n      }\n      // this.pushToSync(e.composedPath().slice(0, -2) as DisplayObject[]);\n      renderingService.dirtify();\n    };\n    var handleMounted = function (e) {\n      var object = e.target;\n      if (runtime.enableSizeAttenuation) {\n        runtime.styleValueRegistry.updateSizeAttenuation(object, canvas.getCamera().getZoom());\n      }\n      if (runtime.enableCSSParsing) {\n        // recalc style values\n        runtime.styleValueRegistry.recalc(object);\n      }\n      runtime.sceneGraphService.dirtifyToRoot(object);\n      renderingService.dirtify();\n    };\n    var handleUnmounted = function (e) {\n      var object = e.target;\n      var rBushNode = object.rBushNode;\n      if (rBushNode.aabb) {\n        _this.rBush.remove(rBushNode.aabb);\n      }\n      _this.toSync.delete(object);\n      runtime.sceneGraphService.dirtifyToRoot(object);\n      renderingService.dirtify();\n    };\n    renderingService.hooks.init.tap(PrepareRendererPlugin.tag, function () {\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n    renderingService.hooks.destroy.tap(PrepareRendererPlugin.tag, function () {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(ElementEvent.ATTR_MODIFIED, handleAttributeChanged);\n      canvas.removeEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n      _this.toSync.clear();\n    });\n    renderingService.hooks.endFrame.tap(PrepareRendererPlugin.tag, function () {\n      // if (this.isFirstTimeRendering) {\n      //   this.isFirstTimeRendering = false;\n      //   this.syncing = true;\n      //   // @see https://github.com/antvis/G/issues/1117\n      //   setTimeout(() => {\n      //     this.syncRTree();\n      //     console.log('fcp...');\n      //   });\n      // } else {\n      //   console.log('next...');\n      _this.syncRTree();\n      // }\n    });\n  };\n  PrepareRendererPlugin.prototype.syncRTree = function () {\n    // if (this.syncing) {\n    //   return;\n    // }\n    var _this = this;\n    // bounds changed, need re-inserting its children\n    var bulk = [];\n    Array.from(this.toSync)\n    // some objects may be removed since last frame\n    .filter(function (object) {\n      return object.isConnected;\n    }).forEach(function (node) {\n      var rBushNode = node.rBushNode;\n      // clear dirty node\n      if (rBushNode && rBushNode.aabb) {\n        _this.rBush.remove(rBushNode.aabb);\n      }\n      var renderBounds = node.getRenderBounds();\n      if (renderBounds) {\n        var _a = __read(renderBounds.getMin(), 2),\n          minX = _a[0],\n          minY = _a[1];\n        var _b = __read(renderBounds.getMax(), 2),\n          maxX = _b[0],\n          maxY = _b[1];\n        if (!rBushNode.aabb) {\n          rBushNode.aabb = {};\n        }\n        rBushNode.aabb.displayObject = node;\n        rBushNode.aabb.minX = minX;\n        rBushNode.aabb.minY = minY;\n        rBushNode.aabb.maxX = maxX;\n        rBushNode.aabb.maxY = maxY;\n      }\n      if (rBushNode.aabb) {\n        // TODO: NaN occurs when width/height of Rect is 0\n        if (!isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.maxX) && !isNaN(rBushNode.aabb.minX) && !isNaN(rBushNode.aabb.minY)) {\n          bulk.push(rBushNode.aabb);\n        }\n      }\n    });\n    // use bulk inserting, which is ~2-3 times faster\n    // @see https://github.com/mourner/rbush#bulk-inserting-data\n    this.rBush.load(bulk);\n    bulk.length = 0;\n    this.toSync.clear();\n    // this.syncing = false;\n  };\n  PrepareRendererPlugin.tag = 'Prepare';\n  return PrepareRendererPlugin;\n}();\nfunction isCanvas(value) {\n  return !!value.document;\n}\nvar CanvasEvent;\n(function (CanvasEvent) {\n  CanvasEvent[\"READY\"] = \"ready\";\n  CanvasEvent[\"BEFORE_RENDER\"] = \"beforerender\";\n  CanvasEvent[\"RERENDER\"] = \"rerender\";\n  CanvasEvent[\"AFTER_RENDER\"] = \"afterrender\";\n  CanvasEvent[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n  CanvasEvent[\"AFTER_DESTROY\"] = \"afterdestroy\";\n  CanvasEvent[\"RESIZE\"] = \"resize\";\n  CanvasEvent[\"DIRTY_RECTANGLE\"] = \"dirtyrectangle\";\n  CanvasEvent[\"RENDERER_CHANGED\"] = \"rendererchanged\";\n})(CanvasEvent || (CanvasEvent = {}));\nvar DEFAULT_CAMERA_Z = 500;\nvar DEFAULT_CAMERA_NEAR = 0.1;\nvar DEFAULT_CAMERA_FAR = 1000;\n/**\n * reuse custom event preventing from re-create them in every frame\n */\nvar mountedEvent = new CustomEvent(ElementEvent.MOUNTED);\nvar unmountedEvent = new CustomEvent(ElementEvent.UNMOUNTED);\nvar beforeRenderEvent = new CustomEvent(CanvasEvent.BEFORE_RENDER);\nvar rerenderEvent = new CustomEvent(CanvasEvent.RERENDER);\nvar afterRenderEvent = new CustomEvent(CanvasEvent.AFTER_RENDER);\n/**\n * can be treated like Window in DOM\n * provide some extra methods like `window`, such as:\n * * `window.requestAnimationFrame`\n * * `window.devicePixelRatio`\n *\n * prototype chains: Canvas(Window) -> EventTarget\n */\nvar Canvas = /** @class */function (_super) {\n  __extends(Canvas, _super);\n  function Canvas(config) {\n    var _this = _super.call(this) || this;\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Element\n     */\n    _this.Element = DisplayObject;\n    _this.inited = false;\n    _this.context = {};\n    // create document\n    _this.document = new Document();\n    _this.document.defaultView = _this;\n    // create registry of custom elements\n    _this.customElements = new CustomElementRegistry();\n    var container = config.container,\n      canvas = config.canvas,\n      offscreenCanvas = config.offscreenCanvas,\n      width = config.width,\n      height = config.height,\n      devicePixelRatio = config.devicePixelRatio,\n      renderer = config.renderer,\n      background = config.background,\n      cursor = config.cursor,\n      document = config.document,\n      requestAnimationFrame = config.requestAnimationFrame,\n      cancelAnimationFrame = config.cancelAnimationFrame,\n      createImage = config.createImage,\n      supportsPointerEvents = config.supportsPointerEvents,\n      supportsTouchEvents = config.supportsTouchEvents,\n      supportsCSSTransform = config.supportsCSSTransform,\n      supportsMutipleCanvasesInOneContainer = config.supportsMutipleCanvasesInOneContainer,\n      useNativeClickEvent = config.useNativeClickEvent,\n      alwaysTriggerPointerEventOnCanvas = config.alwaysTriggerPointerEventOnCanvas,\n      isTouchEvent = config.isTouchEvent,\n      isMouseEvent = config.isMouseEvent;\n    if (!supportsMutipleCanvasesInOneContainer) {\n      cleanExistedCanvas(container, _this);\n    }\n    var canvasWidth = width;\n    var canvasHeight = height;\n    var dpr = devicePixelRatio;\n    // use user-defined <canvas> or OffscreenCanvas\n    if (canvas) {\n      // infer width & height with dpr\n      dpr = devicePixelRatio || isBrowser && window.devicePixelRatio || 1;\n      dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n      canvasWidth = width || getWidth(canvas) || canvas.width / dpr;\n      canvasHeight = height || getHeight(canvas) || canvas.height / dpr;\n    }\n    // override it in runtime\n    if (offscreenCanvas) {\n      runtime.offscreenCanvas = offscreenCanvas;\n    }\n    /**\n     * implements `Window` interface\n     */\n    _this.devicePixelRatio = dpr;\n    _this.requestAnimationFrame = requestAnimationFrame !== null && requestAnimationFrame !== void 0 ? requestAnimationFrame : raf.bind(runtime.globalThis);\n    _this.cancelAnimationFrame = cancelAnimationFrame !== null && cancelAnimationFrame !== void 0 ? cancelAnimationFrame : caf.bind(runtime.globalThis);\n    /**\n     * limits query\n     */\n    // the following feature-detect from hammer.js\n    // @see https://github.com/hammerjs/hammer.js/blob/master/src/inputjs/input-consts.js#L5\n    _this.supportsTouchEvents = supportsTouchEvents !== null && supportsTouchEvents !== void 0 ? supportsTouchEvents : 'ontouchstart' in runtime.globalThis;\n    _this.supportsPointerEvents = supportsPointerEvents !== null && supportsPointerEvents !== void 0 ? supportsPointerEvents : !!runtime.globalThis.PointerEvent;\n    _this.isTouchEvent = isTouchEvent !== null && isTouchEvent !== void 0 ? isTouchEvent : function (event) {\n      return _this.supportsTouchEvents && event instanceof runtime.globalThis.TouchEvent;\n    };\n    _this.isMouseEvent = isMouseEvent !== null && isMouseEvent !== void 0 ? isMouseEvent : function (event) {\n      return !runtime.globalThis.MouseEvent || event instanceof runtime.globalThis.MouseEvent && (!_this.supportsPointerEvents || !(event instanceof runtime.globalThis.PointerEvent));\n    };\n    _this.initRenderingContext({\n      container: container,\n      canvas: canvas,\n      width: canvasWidth,\n      height: canvasHeight,\n      renderer: renderer,\n      offscreenCanvas: offscreenCanvas,\n      devicePixelRatio: dpr,\n      cursor: cursor || 'default',\n      background: background || 'transparent',\n      createImage: createImage,\n      document: document,\n      supportsCSSTransform: supportsCSSTransform,\n      useNativeClickEvent: useNativeClickEvent,\n      alwaysTriggerPointerEventOnCanvas: alwaysTriggerPointerEventOnCanvas\n    });\n    _this.initDefaultCamera(canvasWidth, canvasHeight, renderer.clipSpaceNearZ);\n    _this.initRenderer(renderer, true);\n    return _this;\n  }\n  Canvas.prototype.initRenderingContext = function (mergedConfig) {\n    this.context.config = mergedConfig;\n    // bind rendering context, shared by all renderers\n    this.context.renderingContext = {\n      /**\n       * the root node in scene graph\n       */\n      root: this.document.documentElement,\n      renderListCurrentFrame: [],\n      unculledEntities: [],\n      renderReasons: new Set(),\n      force: false,\n      dirty: false\n    };\n  };\n  Canvas.prototype.initDefaultCamera = function (width, height, clipSpaceNearZ) {\n    var _this = this;\n    // set a default ortho camera\n    var camera = new runtime.CameraContribution();\n    camera.clipSpaceNearZ = clipSpaceNearZ;\n    camera.setType(CameraType.EXPLORING, CameraTrackingMode.DEFAULT).setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0).setOrthographic(width / -2, width / 2, height / 2, height / -2, DEFAULT_CAMERA_NEAR, DEFAULT_CAMERA_FAR);\n    // keep ref since it will use raf in camera animation\n    camera.canvas = this;\n    // redraw when camera changed\n    camera.eventEmitter.on(CameraEvent.UPDATED, function () {\n      _this.context.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n      if (runtime.enableSizeAttenuation && _this.getConfig().renderer.getConfig().enableSizeAttenuation) {\n        _this.updateSizeAttenuation();\n      }\n    });\n    // bind camera\n    this.context.camera = camera;\n  };\n  Canvas.prototype.updateSizeAttenuation = function () {\n    var zoom = this.getCamera().getZoom();\n    this.document.documentElement.forEach(function (node) {\n      runtime.styleValueRegistry.updateSizeAttenuation(node, zoom);\n    });\n  };\n  Canvas.prototype.getConfig = function () {\n    return this.context.config;\n  };\n  /**\n   * get the root displayObject in scenegraph\n   * @alias this.document.documentElement\n   */\n  Canvas.prototype.getRoot = function () {\n    return this.document.documentElement;\n  };\n  /**\n   * get the camera of canvas\n   */\n  Canvas.prototype.getCamera = function () {\n    return this.context.camera;\n  };\n  Canvas.prototype.getContextService = function () {\n    return this.context.contextService;\n  };\n  Canvas.prototype.getEventService = function () {\n    return this.context.eventService;\n  };\n  Canvas.prototype.getRenderingService = function () {\n    return this.context.renderingService;\n  };\n  Canvas.prototype.getRenderingContext = function () {\n    return this.context.renderingContext;\n  };\n  Canvas.prototype.getStats = function () {\n    return this.getRenderingService().getStats();\n  };\n  Object.defineProperty(Canvas.prototype, \"ready\", {\n    // /**\n    //  * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\n    //  */\n    // getComputedStyle(node: DisplayObject) {\n    //   return node.computedStyle;\n    // }\n    get: function () {\n      var _this = this;\n      if (!this.readyPromise) {\n        this.readyPromise = new Promise(function (resolve) {\n          _this.resolveReadyPromise = function () {\n            resolve(_this);\n          };\n        });\n        if (this.inited) {\n          this.resolveReadyPromise();\n        }\n      }\n      return this.readyPromise;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * `cleanUp` means clean all the internal services of Canvas which happens when calling `canvas.destroy()`.\n   */\n  Canvas.prototype.destroy = function (cleanUp, skipTriggerEvent) {\n    if (cleanUp === void 0) {\n      cleanUp = true;\n    }\n    if (skipTriggerEvent === void 0) {\n      skipTriggerEvent = false;\n    }\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(new CustomEvent(CanvasEvent.BEFORE_DESTROY));\n    }\n    if (this.frameId) {\n      var cancelRAF = this.getConfig().cancelAnimationFrame || cancelAnimationFrame;\n      cancelRAF(this.frameId);\n    }\n    // unmount all children\n    var root = this.getRoot();\n    this.unmountChildren(root);\n    if (cleanUp) {\n      // destroy Document\n      this.document.destroy();\n      this.getEventService().destroy();\n    }\n    // destroy services\n    this.getRenderingService().destroy();\n    this.getContextService().destroy();\n    // clear root after renderservice destroyed\n    if (cleanUp && this.context.rBushRoot) {\n      // clear rbush\n      this.context.rBushRoot.clear();\n      this.context.rBushRoot = null;\n      this.context.renderingContext.root = null;\n    }\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(new CustomEvent(CanvasEvent.AFTER_DESTROY));\n    }\n  };\n  /**\n   * compatible with G 3.0\n   * @deprecated\n   * @alias resize\n   */\n  Canvas.prototype.changeSize = function (width, height) {\n    this.resize(width, height);\n  };\n  Canvas.prototype.resize = function (width, height) {\n    // update canvas' config\n    var canvasConfig = this.context.config;\n    canvasConfig.width = width;\n    canvasConfig.height = height;\n    // resize context\n    this.getContextService().resize(width, height);\n    // resize camera\n    var camera = this.context.camera;\n    var projectionMode = camera.getProjectionMode();\n    camera.setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z).setFocalPoint(width / 2, height / 2, 0);\n    if (projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      camera.setOrthographic(width / -2, width / 2, height / 2, height / -2, camera.getNear(), camera.getFar());\n    } else {\n      camera.setAspect(width / height);\n    }\n    this.dispatchEvent(new CustomEvent(CanvasEvent.RESIZE, {\n      width: width,\n      height: height\n    }));\n  };\n  // proxy to document.documentElement\n  Canvas.prototype.appendChild = function (child, index) {\n    return this.document.documentElement.appendChild(child, index);\n  };\n  Canvas.prototype.insertBefore = function (newChild, refChild) {\n    return this.document.documentElement.insertBefore(newChild, refChild);\n  };\n  Canvas.prototype.removeChild = function (child) {\n    return this.document.documentElement.removeChild(child);\n  };\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  Canvas.prototype.removeChildren = function () {\n    this.document.documentElement.removeChildren();\n  };\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   * But the canvas remains running which means display objects can be appended later.\n   */\n  Canvas.prototype.destroyChildren = function () {\n    this.document.documentElement.destroyChildren();\n  };\n  Canvas.prototype.render = function () {\n    var _this = this;\n    this.dispatchEvent(beforeRenderEvent);\n    var renderingService = this.getRenderingService();\n    renderingService.render(this.getConfig(), function () {\n      // trigger actual rerender event\n      // @see https://github.com/antvis/G/issues/1268\n      _this.dispatchEvent(rerenderEvent);\n    });\n    this.dispatchEvent(afterRenderEvent);\n  };\n  Canvas.prototype.run = function () {\n    var _this = this;\n    var tick = function () {\n      _this.render();\n      _this.frameId = _this.requestAnimationFrame(tick);\n    };\n    tick();\n  };\n  Canvas.prototype.initRenderer = function (renderer, firstContentfullPaint) {\n    var _this = this;\n    if (firstContentfullPaint === void 0) {\n      firstContentfullPaint = false;\n    }\n    if (!renderer) {\n      throw new Error('Renderer is required.');\n    }\n    // reset\n    this.inited = false;\n    this.readyPromise = undefined;\n    // FIXME: should re-create here?\n    this.context.rBushRoot = new RBush();\n    // reset rendering plugins\n    this.context.renderingPlugins = [];\n    this.context.renderingPlugins.push(new EventPlugin(), new PrepareRendererPlugin(),\n    // new DirtyCheckPlugin(),\n    new CullingPlugin([new FrustumCullingStrategy()]));\n    //\n    this.loadRendererContainerModule(renderer);\n    // init context service\n    this.context.contextService = new this.context.ContextService(__assign(__assign({}, runtime), this.context));\n    // init rendering service\n    this.context.renderingService = new RenderingService(runtime, this.context);\n    // init event service\n    this.context.eventService = new EventService(runtime, this.context);\n    this.context.eventService.init();\n    if (this.context.contextService.init) {\n      this.context.contextService.init();\n      this.initRenderingService(renderer, firstContentfullPaint, true);\n    } else {\n      this.context.contextService.initAsync().then(function () {\n        _this.initRenderingService(renderer, firstContentfullPaint);\n      });\n    }\n  };\n  Canvas.prototype.initRenderingService = function (renderer, firstContentfullPaint, async) {\n    var _this = this;\n    if (firstContentfullPaint === void 0) {\n      firstContentfullPaint = false;\n    }\n    if (async === void 0) {\n      async = false;\n    }\n    this.context.renderingService.init(function () {\n      _this.inited = true;\n      if (firstContentfullPaint) {\n        if (async) {\n          _this.requestAnimationFrame(function () {\n            _this.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n          });\n        } else {\n          _this.dispatchEvent(new CustomEvent(CanvasEvent.READY));\n        }\n        if (_this.readyPromise) {\n          _this.resolveReadyPromise();\n        }\n      } else {\n        _this.dispatchEvent(new CustomEvent(CanvasEvent.RENDERER_CHANGED));\n      }\n      if (!firstContentfullPaint) {\n        _this.getRoot().forEach(function (node) {\n          var renderable = node.renderable;\n          if (renderable) {\n            renderable.renderBoundsDirty = true;\n            renderable.boundsDirty = true;\n            renderable.dirty = true;\n          }\n        });\n      }\n      // keep current scenegraph unchanged, just trigger mounted event\n      _this.mountChildren(_this.getRoot());\n      if (renderer.getConfig().enableAutoRendering) {\n        _this.run();\n      }\n    });\n  };\n  Canvas.prototype.loadRendererContainerModule = function (renderer) {\n    var _this = this;\n    // load other container modules provided by g-canvas/g-svg/g-webgl\n    var plugins = renderer.getPlugins();\n    plugins.forEach(function (plugin) {\n      plugin.context = _this.context;\n      plugin.init(runtime);\n    });\n  };\n  Canvas.prototype.setRenderer = function (renderer) {\n    // update canvas' config\n    var canvasConfig = this.getConfig();\n    if (canvasConfig.renderer === renderer) {\n      return;\n    }\n    var oldRenderer = canvasConfig.renderer;\n    canvasConfig.renderer = renderer;\n    // keep all children undestroyed\n    this.destroy(false, true);\n    // destroy all plugins, reverse will mutate origin array\n    __spreadArray([], __read(oldRenderer === null || oldRenderer === void 0 ? void 0 : oldRenderer.getPlugins()), false).reverse().forEach(function (plugin) {\n      plugin.destroy(runtime);\n    });\n    this.initRenderer(renderer);\n  };\n  Canvas.prototype.setCursor = function (cursor) {\n    var canvasConfig = this.getConfig();\n    canvasConfig.cursor = cursor;\n    this.getContextService().applyCursorStyle(cursor);\n  };\n  Canvas.prototype.unmountChildren = function (parent) {\n    var _this = this;\n    // unmountChildren recursively\n    parent.childNodes.forEach(function (child) {\n      _this.unmountChildren(child);\n    });\n    if (this.inited) {\n      if (parent.isMutationObserved) {\n        parent.dispatchEvent(unmountedEvent);\n      } else {\n        unmountedEvent.target = parent;\n        this.dispatchEvent(unmountedEvent, true);\n      }\n      // skip document.documentElement\n      if (parent !== this.document.documentElement) {\n        parent.ownerDocument = null;\n      }\n      parent.isConnected = false;\n    }\n    // trigger after unmounted\n    if (parent.isCustomElement) {\n      if (parent.disconnectedCallback) {\n        parent.disconnectedCallback();\n      }\n    }\n  };\n  Canvas.prototype.mountChildren = function (parent) {\n    var _this = this;\n    if (this.inited) {\n      if (!parent.isConnected) {\n        parent.ownerDocument = this.document;\n        parent.isConnected = true;\n        if (parent.isMutationObserved) {\n          parent.dispatchEvent(mountedEvent);\n        } else {\n          mountedEvent.target = parent;\n          this.dispatchEvent(mountedEvent, true);\n        }\n      }\n    } else {\n      console.warn(\"[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.\", 'appended child: ', parent.nodeName);\n    }\n    // recursively mount children\n    parent.childNodes.forEach(function (child) {\n      _this.mountChildren(child);\n    });\n    // trigger after mounted\n    if (parent.isCustomElement) {\n      if (parent.connectedCallback) {\n        parent.connectedCallback();\n      }\n    }\n  };\n  Canvas.prototype.client2Viewport = function (client) {\n    return this.getEventService().client2Viewport(client);\n  };\n  Canvas.prototype.viewport2Client = function (canvas) {\n    return this.getEventService().viewport2Client(canvas);\n  };\n  Canvas.prototype.viewport2Canvas = function (viewport) {\n    return this.getEventService().viewport2Canvas(viewport);\n  };\n  Canvas.prototype.canvas2Viewport = function (canvas) {\n    return this.getEventService().canvas2Viewport(canvas);\n  };\n  /**\n   * @deprecated\n   * @alias client2Viewport\n   */\n  Canvas.prototype.getPointByClient = function (clientX, clientY) {\n    return this.client2Viewport({\n      x: clientX,\n      y: clientY\n    });\n  };\n  /**\n   * @deprecated\n   * @alias viewport2Client\n   */\n  Canvas.prototype.getClientByPoint = function (x, y) {\n    return this.viewport2Client({\n      x: x,\n      y: y\n    });\n  };\n  return Canvas;\n}(EventTarget);\nexport { AABB, AbstractRenderer, AbstractRendererPlugin, BUILT_IN_PROPERTIES, CSS, CSSGradientValue, CSSKeywordValue, CSSRGB, CSSStyleValue, CSSUnitValue, Camera, CameraEvent, CameraProjectionMode, CameraTrackingMode, CameraType, Canvas, CanvasEvent, Circle, CircleUpdater, ClipSpaceNearZ, CustomElement, CustomElementRegistry, CustomEvent, DefaultSceneGraphSelector, DefaultSceneGraphService, DisplayObject, Document, ERROR_MSG_METHOD_NOT_IMPLEMENTED, Element, ElementEvent, Ellipse, EllipseUpdater, EventService, EventTarget, FederatedEvent, FederatedMouseEvent, FederatedPointerEvent, FederatedWheelEvent, Frustum, GradientType, Group, HTML, Image, Line, LineUpdater, Mask, MutationEvent, Node, OffscreenCanvasCreator, Path, PathUpdater, Plane, Point, Polygon, Polyline, PolylineUpdater, PropertySyntax, RBush, Rect, RectUpdater, Rectangle, RenderReason, RenderingService, Shape, SortReason, Strategy, Text, TextService, TextUpdater, UnitType, computeLinearGradient, computeRadialGradient, convertToPath, createVec3, decompose, definedProps, deg2rad, deg2turn, findClosestClipPathTarget, fromRotationTranslationScale, getAngle, getEuler, getOrCalculatePathTotalLength, grad2deg, isBrowser, isCSSGradientValue, isCSSRGB, isCanvas, isDisplayObject, isFederatedEvent, isFillOrStrokeAffected, isPattern, mergeColors, parseColor, parseLength, parsePath, parseTransform, parsedTransformToMat4, propertyMetadataCache, rad2deg, resetEntityCounter, runtime, setDOMSize, translatePathToString, turn2deg };","map":{"version":3,"names":["global","factory","module","exports","commonjsGlobal","quickselect","arr","k","left","right","compare","quickselectStep","length","defaultCompare","n","m","z","Math","log","s","exp","sd","sqrt","newLeft","max","floor","newRight","min","t","i","j","swap","tmp","a","b","RBush","maxEntries","_maxEntries","_minEntries","ceil","clear","prototype","all","_all","data","search","bbox","node","result","intersects","toBBox","nodesToSearch","children","child","childBBox","leaf","push","contains","pop","collides","load","insert","_build","slice","height","_splitRoot","tmpNode","_insert","item","createNode","remove","equalsFn","path","indexes","parent","goingUp","index","findItem","splice","_condense","compareMinX","minX","compareMinY","minY","toJSON","fromJSON","apply","items","N","M","calcBBox","pow","N2","N1","multiSelect","right2","right3","_chooseSubtree","level","minArea","Infinity","minEnlargement","targetNode","area","bboxArea","enlargement","enlargedArea","isNode","insertPath","extend","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","minOverlap","bbox1","distBBox","bbox2","overlap","intersectionArea","compareNodeMinX","compareNodeMinY","xMargin","_allDistMargin","yMargin","sort","leftBBox","rightBBox","margin","bboxMargin","i$1","child$1","siblings","indexOf","p","destNode","maxX","maxY","stack","mid","Shape","ClipSpaceNearZ","AbstractRendererPlugin","plugins","addRenderingPlugin","plugin","context","renderingPlugins","removeAllRenderingPlugins","_this","forEach","AbstractRenderer","config","clipSpaceNearZ","NEGATIVE_ONE","__assign","enableDirtyCheck","enableCulling","enableAutoRendering","enableDirtyRectangleRendering","enableDirtyRectangleRenderingDebug","enableSizeAttenuation","registerPlugin","findIndex","unregisterPlugin","getPlugins","getPlugin","name","find","getConfig","setConfig","Object","assign","copyVec3","subVec3","o","addVec3","scaleVec3","maxVec3","minVec3","getAngle","angle","undefined","createVec3","x","y","Array","isArray","vec3","clone","isNumber","fromValues","deg2rad","deg","PI","rad2deg","rad","grad2deg","grads","deg2turn","turn2deg","turn","getEulerFromQuat","out","quat","w","x2","y2","z2","w2","unit","test","atan2","asin","getEulerFromMat4","halfPi","_a","__read","mat4","getScaling","create","sx","sy","sz","getEuler","fromRotationTranslationScale","rotation","scaleX","scaleY","cos","sin","mat3","makePerspective","top","bottom","near","far","zero","c","d","decompose","mat","row0x","row0y","row1x","row1y","scalingX","scalingY","determinant","perspectiveMatrix","tmpVec4","vec4","row","pdum3","decomposeMat4","matrix","translation","scale","skew","perspective","quaternion","normalize","copy","abs","a03","a13","a23","a30","a31","a32","a33","ret","invert","transpose","transformMat4","mat3from4","dot","combine","cross","m44","mat4x4","scale1","scale2","AABB","center","halfExtents","isEmpty","aabb","update","setMinMax","getMin","getMax","add","tc","tcx","tcy","tcz","th","thx","thy","thz","tminx","tmaxx","tminy","tmaxy","tminz","tmaxz","oc","ocx","ocy","ocz","oh","ohx","ohy","ohz","ominx","omaxx","ominy","omaxy","ominz","omaxz","setFromTransformedAABB","bc","br","ac","ar","mx0","mx1","mx2","my0","my1","my2","mz0","mz1","mz2","mx0a","mx1a","mx2a","my0a","my1a","my2a","mz0a","mz1a","mz2a","aMax","aMin","bMax","bMin","intersection","getNegativeFarPoint","plane","pnVertexFlag","getPositiveFarPoint","Plane","distance","normal","updatePNVertexFlag","Number","distanceToPoint","point","invLen","len","intersectsLine","start","end","d0","d1","lerp","Mask","Frustum","planes","extractFromVPMatrix","projectionMatrix","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","set","Point","copyFrom","Rectangle","width","ERROR_MSG_METHOD_NOT_IMPLEMENTED","ERROR_MSG_USE_DOCUMENT_ELEMENT","ERROR_MSG_APPEND_DESTROYED_ELEMENT","CameraType","CameraTrackingMode","CameraProjectionMode","CameraEvent","UPDATED","MIN_DISTANCE","Camera","eventEmitter","EventEmitter","up","forward","position","focalPoint","distanceVector","azimuth","elevation","roll","relAzimuth","relElevation","relRoll","dollyingStep","maxDistance","minDistance","zoom","rotateWorld","fov","aspect","projectionMatrixInverse","jitteredProjectionMatrix","enableUpdate","type","EXPLORING","trackingMode","DEFAULT","projectionMode","PERSPECTIVE","frustum","orthoMatrix","isOrtho","ORTHOGRAPHIC","getProjectionMode","getPerspective","getPerspectiveInverse","getFrustum","getPosition","getFocalPoint","getDollyingStep","getNear","getFar","getZoom","getOrthoMatrix","getView","view","setEnableUpdate","enabled","setType","setWorldRotation","_getAngles","TRACKING","setTrackingMode","setProjectionMode","Error","flag","getViewTransform","getWorldTransform","jitterProjectionMatrix","fromTranslation","multiply","clearJitterProjectionMatrix","setMatrix","_update","setFov","setPerspective","setAspect","setNear","setOrthographic","rright","setFar","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","setZoom","setZoomByViewportPoint","viewportPoint","canvas","viewport2Canvas","ox","oy","rotate","setPosition","setFocalPoint","_b","cx","cy","dvec","dx","dy","pan","tan","ZERO","triggerUpdate","l","r","scaleW","scaleH","ortho","orthoZO","_getOrthoMatrix","_setPosition","CINEMATIC","subtract","el","az","rotateY","rotateX","lookAt","_getAxes","_getDistance","getDistance","getDistanceVector","setDistance","pos","f","setMaxDistance","setMinDistance","setAzimuth","computeMatrix","ORBITING","_getPosition","_getFocalPoint","getAzimuth","setElevation","getElevation","setRoll","getRoll","rotZ","quat$1","setAxisAngle","identity","rotX","rotY","rotQ","rotMatrix","fromQuat","translate","transformMat3","fromMat4","fromRotationTranslationScaleOrigin","viewMatrix","vpMatrix","emit","tx","ty","dolly","value","createLandmark","params","gotoLandmark","options","cancelLandmarkAnimation","memoize","func","resolver","TypeError","memoized","args","_i","arguments","key","cache","has","get","Cache","Map","UnitType","UnitCategory","ValueRange","Nested","ParenLess","unit_type","kEms","kPixels","kDegrees","kRadians","kGradians","kMilliseconds","kSeconds","kRems","kTurns","CSSStyleValueType","stringToUnitType","unitFromName","kUnknown","kNumber","kPercentage","unitTypeToUnitCategory","kInteger","kUNumber","kUPercent","kULength","kUTime","kUAngle","kUOther","canonicalUnitTypeForCategory","category","conversionToCanonicalUnitsScaleFactor","factor","unitTypeToString","CSSStyleValue","isAngle","isLength","isRelativeUnit","isTime","toString","buildCSSText","kNo","isNumericValue","getType","kUnitType","kClampType","CSSColorValue","_super","__extends","colorSpace","call","kColorType","to","GradientType","CSSGradientValue","CSSKeywordValue","kKeywordType","camelCase","str","replace","g","toUpperCase","kebabize","split","map","letter","idx","concat","toLowerCase","join","DCHECK","bool","isFunction","isSymbol","definedProps","obj","fromEntries","entries","filter","v","FORMAT_ATTR_MAP","alias","strokeDasharray","strokeWidth","textAnchor","src","formatAttributeName","attributeName","formatInfinityOrNaN","number","suffix","isFinite","isNaN","toCanonicalUnit","CSSUnitValue","unitOrName","equals","other","other_unit_value","convertTo","target_unit","canonical_unit","scale_factor","text","toFixed","kMinInteger","kMaxInteger","unit_1","Opx","Odeg","CSSRGB","alpha","isNone","unsetKeywordValue","initialKeywordValue","inheritKeywordValue","keywordCache","unset","initial","inherit","getOrCreateKeyword","noneColor","transparentColor","getOrCreateRGBA","getOrCreateUnitValue","PECENTAGE_50","Strategy","SortReason","EMPTY_PARSED_PATH","absolutePath","hasArc","segments","polygons","polylines","curve","totalLength","rect","PropertySyntax","colorStopToString","colorStop","parseGradient$1","tokens","linearGradient","repeatingLinearGradient","radialGradient","repeatingRadialGradient","conicGradient","sideOrCorner","extentKeywords","positionKeywords","pixelValue","percentageValue","emValue","angleValue","startCall","endCall","comma","hexColor","literalColor","rgbColor","rgbaColor","input","error","msg","getAST","ast","matchListDefinitions","matchListing","matchDefinition","matchGradient","matchLinearOrientation","matchListRadialOrientations","gradientType","pattern","orientationMatcher","matchCall","captures","orientation","scan","colorStops","matchColorStop","callback","matchSideOrCorner","matchAngle","match","radialOrientations","radialOrientation","matchRadialOrientation","lookaheadCache","radialType","matchCircle","matchEllipse","at","matchAtPosition","extent","matchExtentKeyword","positionAt","defaultPosition","matchPositioning","circle","style","matchLength","ellipse","matchDistance","positioning","location","matchCoordinates","matcher","color","matchColor","matchHexColor","matchRGBAColor","matchRGBColor","matchLiteralColor","matchNumber","matchPositionKeyword","captureIndex","regexp","blankCaptures","exec","consume","size","substring","code","computeLinearGradient","rx","ry","rcx","rcy","x1","y1","computeRadialGradient","distanceSquareRoot","regexLG","regexRG","regexPR","regexColorStop","spaceColorStops","previousIndex","previousOffset","offset","_c","isNil","SideOrCornerToDegMap","angleToDeg","positonToCSSUnitValue","unitX","unitY","parseGradient","colorStr","steps","LinearGradient","type_1","RadialGradient","stop","parseFloat","parsedRadialGradient","parseRadialGradient","isString","parsePattern","gradientStr","patternStr","repetition","image","isCSSGradientValue","object","isPattern","isCSSRGB","parseColor","d3","rgba","opacity","__spreadArray","mergeColors","round","clamp","parseDimension","unitRegExp","string","trim","matchedUnits","taggedUnitRegExp","source","RegExp","parseLengthUnmemoize","css","parseLength","parserPercentageUnmemoize","parseLengthOrPercentageUnmemoize","parseLengthOrPercentage","parseAngleUnmemoize","parseAngle","mergeDimensions","target","nonNegative","leftValue","rightValue","canonicalUnit","leftCanonicalUnitValue","rightCanonicalUnitValue","convertPercentUnit","convertAngleUnit","parseDimensionArrayFormat","parsed","segment","parseDimensionArray","valueWithUnit","vec3Index","bounds","nodeName","GROUP","getLocalBounds","geometry","contentBounds","parseParam","supportedFilters","parseFilter","filterStr","filterRegExp","prevLastIndex","lastIndex","numberToString","parseNumberUnmemoize","parseNumber","mergeNumbers","clampedMergeNumbers","mergeNumberLists","numberList","getOrCalculatePathTotalLength","parsedStyle","getTotalLength","removeRedundantMCommand","prevSegment","cmd","prevCmd","srcPoint","destPoint","isSamePoint","hasArcOrBezier","count","extractPolygons","pathArray","points","point1","point2","getPathBBox","lineWidth","xArr","yArr","segmentsWithAngle","currentPoint","prePoint","box","command","quadBox","cubicBox","arcParams","arcBox","xRotation","startAngle","endAngle","nextPoint","extra","getExtraFromSegmentWithAngle","xExtra","yExtra","currentAndPre","currentAndNext","preAndNext","currentAngle","acos","isNumberEqual","xAngle","yAngle","toSymmetry","angleBetween","v0","v1","sign","pointOnEllipticalArc","p0","xAxisRotation","largeArcFlag","sweepFlag","p1","mod","xAxisRotationRadians","ellipticalArcAngle","transformedPoint","radiiCheck","cSquareNumerator","cSquareRootDenom","cRadicand","cCoef","transformedCenter","startVector","endVector","sweepAngle","ellipseComponentX","ellipseComponentY","ellipticalArcStartAngle","ellipticalArcEndAngle","ellipticalArcCenter","resultantRx","resultantRy","path2Segments","nextParams","startMovePoint","lastStartMovePointIndex","startTangent","endTangent","cubicParams","getArcParams","includes","cp","preSegment","cp1","cp2","getTangentAtRatio","dx1","dy1","dx2","dy2","ratio","arcFlag","p2","xDist","yDist","dist","vMag","vRatio","u","vAngle","startPoint","xp","yp","lambda","diff","cxp","cyp","theta","dTheta","commandsToPathString","commands","transform","defX","defY","reduce","prev","cur","p3","lineToCommands","ellipseToCommands","polygonToCommands","closed","rectToCommands","radius","tlr","trr","brr","blr","signX","signY","convertToPath","getLocalTransform","LINE","_d","_e","CIRCLE","_f","_g","_h","_j","ELLIPSE","_k","_l","_m","_o","_p","POLYLINE","POLYGON","RECT","_q","_r","width_1","_s","height_1","_t","_u","hasRadius","some","PATH","translatePathToString","startOffsetX","startOffsetY","endOffsetX","endOffsetY","newValue","nextSegment","useStartOffset","useEndOffset","internalParsePath","normalizePath","e","console","memoizedParsePath","parsePath","mergePaths","curve1","curve2","path2Curve","curves","equalizeSegments","curve0","getDrawDirection","reverseCurve","clonePath","getRotatedCurve","parsePoints","pointsOrStr","pointStr","tempLength","segmentT","segmentL","polylineLength","lineLength","mergePoints","_","cast","contents","id","transformFunctions","matrix3d","rotatex","rotatey","rotatez","rotate3d","scalex","scaley","scalez","scale3d","skewx","skewy","translatex","translatey","translatez","translate3d","parseTransform","transformRegExp","functionName","functionData","argTypes","parsedArgs","arg","parsedArg","A","T","L","parseTransformUnmemoize","convertItemToMatrix","sqrLength","length_1","sc","sq","multiplyMatrices","convertToMatrix","transformList","makeMatrixDecomposition","composeMatrix","is2D","temp","numberToLongString","mergeMatrices","leftArgs","rightArgs","decompositionPair","list","q","stringifiedArgs","v2","fromQ","toQ","product","typeTo2D","typeTo3D","isMatrixOrPerspective","lt","rt","mergeTransforms","flipResults","defaultValue","leftResult","rightResult","types","merged","leftType","rightType","leftFunctionData","rightFunctionData","leftArgsCopy","rightArgsCopy","stringConversions","parseTransformOrigin","values","convertKeyword2Percent","parseTransformOriginUnmemoize","keyword","BUILT_IN_PROPERTIES","int","inh","syntax","OPACITY_VALUE","PAINT","COLOR","LENGTH_PERCENTAGE","SHADOW_BLUR","LENGTH_PERCENTAGE_12","DEFINED_PATH","OFFSET_DISTANCE","ind","Z_INDEX","FILTER","TRANSFORM","TEXT","TRANSFORM_ORIGIN","COORDINATE","LENGTH_PERCENTAGE_14","LIST_OF_POINTS","TEXT_TRANSFORM","LENGTH","NUMBER","MARKER","GEOMETRY_ATTRIBUTE_NAMES","propertyMetadataCache","unresolvedProperties","WeakMap","isPropertyResolved","properties","DefaultStyleValueRegistry","runtime","property","registerMetadata","metadata","unregisterMetadata","getPropertySyntax","CSSPropertySyntaxFactory","processProperties","attributes","skipUpdateAttribute","skipParse","forceUpdateGeometry","usedAttributes","enableCSSParsing","attributeNames_1","keys","oldClipPath","clipPath","oldOffsetPath","offsetPath","needUpdateGeometry_1","fill","stroke","shadowColor","lineDash","textTransform","calculator","anchor","transformOrigin","markerStart","markerEnd","markerMid","IMAGE","HTML","MESH","z1","postProcessor","zIndex","offsetDistance","updateGeometry","needUpdateGeometry","attributeNames","computedStyle","parseProperty","from","Set","computeProperty","postProcessProperty","isPropertyInheritable","internalSetAttribute","computed","keywords","handler","parserUnmemoize","parser","isDocumentElement","used","inherited","resolved","tryToResolveProperty","addUnresolveProperty","oldParsedValue","propertyHandler","parentElement","usedValue","recalc","attributes_1","delete","geometryUpdater","geometryUpdaterFactory","geometry_1","renderBounds","depth","offsetZ","increasedLineWidthForHitTesting","shadowType","expansion","SQRT2","hasStroke","halfLineWidth","shadowBlur","shadowOffsetX","shadowOffsetY","shadowBlurInPixels","shadowOffsetXInPixels","shadowOffsetYInPixels","shadowLeft","shadowRight","shadowTop","shadowBottom","blurRadius","flipY","flipX","usedOriginXValue","usedOriginYValue","setOrigin","sceneGraphService","dirtifyToRoot","updateSizeAttenuation","isSizeAttenuation","rawLineWidth","rawR","CSSPropertyAngle","parserWithCSSDisabled","mixer","oldParsed","CSSPropertyClipPath","oldPath","newPath","updateDisplayObjectDependency","childNodes","CSSPropertyColor","CSSPropertyFilter","getFontSize","fontSize","CSSPropertyLengthOrPercentage","registry","styleValueRegistry","parentNode","ownerDocument","documentElement","CSSPropertyLengthOrPercentage12","formatted","CSSPropertyLengthOrPercentage14","tmpMat4","parsedTransformToMat4","resetLocalTransform","setLocalPosition","newScale","scaleLocal","newTranslation","translateLocal","newAngles","rotateLocal","newSkew","setLocalSkew","getLocalSkew","dd","setLocalTransform","CSSPropertyLocalPosition","cz","needResetLocalPosition","getLocalPosition","oz","CSSPropertyMarker","oldMarker","newMarker","cloned","cloneNode","isMarker","CSSPropertyNumber","CSSPropertyOffsetDistance","getPoint","CSSPropertyOpacity","CSSPropertyPath","CSSPropertyPoints","CSSPropertyShadowBlur","CSSPropertyText","nodeValue","CSSPropertyTextTransform","rawText","getAttribute","transformedText","charAt","canvasMap","defaultCanvasIdCounter","cleanExistedCanvas","container","destroy","isBrowser","window","document","isElement","sortedIndex","array","low","high","sortByZIndex","o1","o2","zIndex1","zIndex2","parent_1","findClosestClipPathTarget","PX_SUFFIX","setDOMSize","$el","getStyle","defaultView","getComputedStyle","getPropertyValue","getWidth","offsetWidth","getHeight","offsetHeight","MOUSE_POINTER_ID","TOUCH_TO_POINTER","touchstart","touchend","touchendoutside","touchmove","touchcancel","clock","performance","now","Date","isFillOrStrokeAffected","pointerEvents","hasFill","isFillOtherThanNone","isStrokeOtherThanNone","uId","uniqueId","root","self","nowOffset","pnow","reservedCBs","lastTime","polyfillRaf","currentTime","gap","delay","setTimeout","copied","polyfillCaf","vendorPrefixes","getRequestAnimationFrame","vp","getCancelAnimationFrame","predicate","raf","caf","requestAnimationFrame","cancelAnimationFrame","AsyncParallelHook","callbacks","getCallbacksNum","tapPromise","fn","promise","Promise","AsyncSeriesWaterfallHook","sent","SyncHook","tap","argsArr","SyncWaterfallHook","genericFontFamilies","stringRegExp","toFontString","fontFamily","fontStyle","fontVariant","fontWeight","fontSizeString","fontFamilies","fontFamily_1","CSSPropertyTransform","CSSPropertyTransformOrigin","CSSPropertyZIndex","parentEntity","parentRenderable","renderable","parentSortable","sortable","dirty","dirtyReason","Z_INDEX_CHANGED","CircleUpdater","EllipseUpdater","LineUpdater","PathUpdater","PolylineUpdater","RectUpdater","img","contentWidth","contentHeight","TextUpdater","globalRuntime","isReadyToMeasure","textAlign","textBaseline","metrics","font","lines","lineWidths","lineHeight","maxLineWidth","fontProperties","ascent","descent","lineMetrics","offscreenCanvas","textService","measureText","lineXOffset","lineYOffset","isFederatedEvent","FederatedEvent","manager","eventPhase","NONE","bubbles","cancelBubble","cancelable","defaultPrevented","propagationStopped","propagationImmediatelyStopped","layer","page","viewport","composed","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","defineProperty","composedPath","propagationPath","preventDefault","nativeEvent","Event","stopImmediatePropagation","stopPropagation","initEvent","initUIEvent","FederatedMouseEvent","client","movement","screen","getModifierState","initMouseEvent","FederatedPointerEvent","isPrimary","getCoalescedEvents","getPredictedEvents","clonePointerEvent","FederatedWheelEvent","cloneWheelEvent","CustomEvent","eventName","detail","DELEGATION_SPLITTER","EventTarget","emitter","on","listener","addEventListener","capture","isBoolean","isObject","once","useDelegatedName","delegatedName","name_1","eventType","handleEvent","originListener_1","off","removeEventListener","removeAllEventListeners","removeAllListeners","dispatchEvent","skipPropagate","getEventService","Node","shadow","isConnected","baseURI","nodeType","__values","next","done","textContent","content","removeChild","getRootNode","opts","host","hasChildNodes","isDefaultNamespace","namespace","lookupNamespaceURI","prefix","lookupPrefix","isEqualNode","otherNode","isSameNode","compareDocumentPosition","node1Root","node2Root","node1Hierarchy","node2Hierarchy","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","longerHierarchy","shorterHierarchy","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINS","longerStart","shorterHierarchyNode","longerHierarchyNode","contain","getAncestor","assigned","PROPAGATION_LIMIT","EventService","nativeHTMLMap","cursor","mappingTable","mappingState","trackingData","eventPool","tmpMatrix","tmpVec3","onPointerDown","createPointerEvent","pointerType","isRightButton","button","pointerId","pressTargetsByButton","freeEvent","onPointerUp","alwaysTriggerPointerEventOnCanvas","rootTarget","pressTarget","findMountedTarget","clickTarget","currentTarget","notifyTarget","clickEvent","clicksByButton","clickCount","timeStamp","clickHistory","preventClick","useNativeClickEvent","onPointerMove","isMouse","outTarget","overTargets","outType","outEvent","leaveEvent","overType","overEvent","overTargetAncestor","didPointerEnter","enterEvent","getCursor","onPointerOut","onPointerOver","onPointerUpOutside","onWheel","wheelEvent","createWheelEvent","onClick","onPointerCancel","init","renderingContext","addEventMapping","client2Viewport","contextService","getBoundingClientRect","viewport2Client","camera","getCamera","worldMatrix","canvas2Viewport","canvasP","clip","setPickHandler","pickHandler","priority","mapEvent","mappers","warn","propagate","notifyListeners","unshift","hitTest","viewportX","viewportY","disableHitTesting","isNativeEventFromCanvas","event","getDomElement","getExistedHTML","eventTarget","existed","pickTarget","clientX","clientY","canvasX","canvasY","fallbackTarget","allocateEvent","copyPointerData","copyMouseData","copyData","originalEvent","existedHTML","copyWheelData","overTarget","pressure","tangentialPressure","tiltX","tiltY","twist","altKey","buttons","ctrlKey","metaKey","shiftKey","deltaMode","deltaX","deltaY","deltaZ","isTrusted","constructor","listeners","_events","removeListener","OffscreenCanvasCreator","getOrCreateCanvas","contextAttributes","getContext","willReadFrequently","OffscreenCanvas","createElement","ex","getOrCreateContext","RenderReason","RenderingService","inited","stats","total","rendered","zIndexCounter","hooks","initAsync","dirtycheck","cull","beginFrame","beforeRender","render","afterRender","endFrame","pick","pickSync","pointerDown","pointerUp","pointerMove","pointerOut","pointerOver","pointerWheel","pointerCancel","click","then","getStats","disableDirtyRectangleRendering","renderer","renderReasons","CAMERA_CHANGED","canvasConfig","rerenderCallback","syncHierarchy","triggerPendingEvents","dirtyRectangleRenderingDisabled","onlyCameraChanged","shouldTriggerRenderHooks","disableRenderHooks","renderDisplayObject","renderListCurrentFrame","displayObject","objectChanged","objectToRender","renderOrder","dirtyChildren","sorted","index_1","index_2","clearPendingEvents","dirtify","DISPLAY_OBJECT_CHANGED","ATTRIBUTE_REGEXP","DefaultSceneGraphSelector","selectOne","query","startsWith","classList","getIdOrClassname","value_1","attributeToString","selectAll","findAll","name_2","value_2","is","className","name_3","matches","MutationEvent","typeArg","relatedNode","prevValue","attrName","attrChange","prevParsedValue","newParsedValue","ADDITION","MODIFICATION","REMOVAL","ElementEvent","markRenderableDirty","renderBoundsDirty","boundsDirty","reparentEvent","REPARENT","DefaultSceneGraphService","pendingEvents","boundsChangedEvent","BOUNDS_CHANGED","parentInvertRotation","element","degrees","transformable","fromEuler","rot","getRotation","parentRot","localRotation","dirtifyLocal","mul","setEulerAngles","invParentRot","setLocalEulerAngles","parentRotation","transformQuat","localPosition","parentInvertMatrix","tmpPosition","parentTransform","worldTransform","zeroVec3","tr","setRotation","setLocalRotation","displayObjectDependencyMap","calcLocalTransform","tmpMat","tmpQuat","hasSkew","localSkew","localTransform","origin","scaling","localScale","sceneGraphSelector","querySelector","querySelectorAll","attach","detached","detach","ADDED","dirtifyWorld","frozen","unfreezeParentToRoot","REMOVED","getOrigin","originVec","setLocalScale","updatedScaling","vec2","localDirtyFlag","dirtyFlag","dirtifyWorldInternal","trigger","entity","isMutationObserved","affectChildren","informDependentDisplayObjects","oldDependencyMap","newDependencyMap","dependencyMap","ATTR_MODIFIED","isCustomElement","attributeChangedCallback","getTranslation","getScale","sync","getLocalRotation","getLocalScale","getTransformedGeometryBounds","existedAABB","getGeometryBounds","getBounds","childBounds","clipped","clipPathBounds","parentInvert","localBounds","getContextService","top_1","childTransform","TEXT_METRICS","MetricsString","BaselineSymbol","BaselineMultiplier","HeightMultiplier","Newlines","BreakingSpaces","LATIN_REGEX","regexCannotStartZhCn","regexCannotEndZhCn","regexCannotStartZhTw","regexCannotEndZhTw","regexCannotStartJaJp","regexCannotEndJaJp","regexCannotStartKoKr","regexCannotEndKoKr","regexCannotStart","regexCannotEnd","TextService","fontMetricsCache","shouldBreakByKinsokuShorui","char","nextChar","isBreakingSpace","trimByKinsokuShorui","prevLine","lastChar","measureFont","offscreenCanvasCreator","metricsString","baseline","fillStyle","fillRect","fillText","imagedata","getImageData","pixels","line","wordWrap","strokeHeight","letterSpacing","textPath","textPathSide","textPathStartOffset","leading","isOverflowing","outputText","lineWidth_1","lineHeight_1","offsetY_1","setGraphemeOnPath","wordWrapWidth","maxLines","textOverflow","maxWidth","ellipsis","currentIndex","currentWidth","calcWidth","getFromCache","ellipsisWidth","chars","prevChar","charWidth","isNewline","currentLineLength","lastLineWidth","lastLineIndex","i_1","canBreakInLastChar","trimToBreakable","sumTextWidthByCache","charCodeAt","findBreakableIndex","trimmedChar","isTrimmedWithSpace","trimFrom","trimTo","sum","spacing","rectUpdater","polylineUpdater","PERCENTAGE","ANGLE","getGlobalThis","globalThis","CameraContribution","AnimationTimeline","EasingFunction","layoutRegistry","enableDataset","enableStyleSyntax","entityCounter","resetEntityCounter","insertedEvent","INSERTED","removedEvent","destroyEvent","DESTROY","Element","dirtyRenderBounds","cullable","strategy","Standard","visibilityPlaneMask","visible","enable","rBushNode","namespaceURI","scrollLeft","scrollTop","clientTop","clientLeft","destroyed","fillOpacity","strokeOpacity","visibility","lineCap","lineJoin","setAttribute","firstChild","lastChild","deep","appendChild","mountChildren","insertBefore","newChild","refChild","replaceChild","oldChild","unmountChildren","removeChildren","destroyChildren","selector","getElementById","getElementsByName","getElementsByClassName","getElementsByTagName","tagName","selectors","closest","objects","after","nodes","before","first","rest","replaceWith","append","prepend","replaceChildren","getRenderBounds","getClientRects","computedStyleMap","getAttributeNames","hasAttribute","qualifiedName","hasAttributes","removeAttribute","force","getAttributeNS","localName","getAttributeNode","getAttributeNodeNS","hasAttributeNS","removeAttributeNS","removeAttributeNode","attr","setAttributeNS","setAttributeNode","setAttributeNodeNS","toggleAttribute","isDisplayObject","mutationEvent","DEFAULT_STYLE_PROPS","DEFAULT_PARSED_STYLE_PROPS","miterLimit","DEFAULT_PARSED_STYLE_PROPS_CSS_DISABLED","fillRule","INHERITABLE_BASE_STYLE_PROPS","INHERITABLE_STYLE_PROPS","DATASET_PREFIX","DisplayObject","activeAnimations","getClip","interactive","class","attrs","initialParsedStyle","initAttributes","Proxy","dataset","formattedName","prop","setProperty","propertyName","removeProperty","getAnimations","animation","cancel","customCloneFunc","clonedStyle","attribute","clonedChild","formattedAttributes","isUndefined","parseOptions","oldValue","getBBox","getEulerAngles","ez","getLocalEulerAngles","animate","keyframes","timeline","play","isVisible","isInteractive","isCulled","toFront","toBack","getMatrix","eux","euz","getLocalMatrix","setLocalMatrix","show","hide","getCount","childElementCount","getParent","getChildren","getFirst","firstElementChild","getLast","lastElementChild","getChildByIndex","setClip","moveTo","move","setZIndex","CSS","percent","px","em","rem","grad","ms","registerProperty","definition","inherits","interpolable","initialValue","registerLayout","clazz","Circle","__rest","CustomElement","Ellipse","Group","innerHTML","clientRect","canvasRect","Image","Line","markerStartAngle","markerEndAngle","transformMarker","isStart","markerStartOffset","markerEndOffset","marker","originalAngle","inWorldSpace","linePointAt","transformed","getPointAtLength","Path","markerMidList","placeMarkerMid","getStartTangent","getEndTangent","endPoint","tangent","Polygon","isClosed","P","Polyline","subt","Rect","Text","getComputedTextLength","getLineBoundingRects","CustomElementRegistry","define","Document","initialStyle","customElements","shape","createElementNS","elementsFromBBox","rBush","rBushRoot","rBushNodes","hitTestList","isVisibilityAffected","elementFromPointSync","picked","getRenderingService","topmost","elementFromPoint","elementsFromPointSync","elementsFromPoint","CullingPlugin","strategies","renderingService","tag","unculledEntities","every","CULLED","EventPlugin","autoPreventDefault","rootPointerEvent","rootWheelEvent","supportsTouchEvents","normalizedEvents","normalizeToPointerEvent","normalizedEvents_1","normalizedEvents_1_1","normalizedEvent","event_1","bootstrapEvent","eventService","setCursor","normalizedEvents_2","normalizedEvents_2_1","event_2","normalizeWheelEvent","events","isNormalized","events_1","events_1_1","event_3","federatedEvent","$element","outside","normalizedEvents_3","normalizedEvents_3_1","event_4","normalizedEvents_4","normalizedEvents_4_1","event_5","getViewportXY","supportsCSSTransform","transferMouseData","srcElement","movementX","movementY","pageX","pageY","screenX","screenY","relatedTarget","applyCursorStyle","isTouchEvent","changedTouches","touch","touches","radiusX","radiusY","identifier","isMouseEvent","tempEvent","shape2D","FrustumCullingStrategy","parentVisibilityPlaneMask","computeVisibilityWithPlaneMask","INDETERMINATE","OUTSIDE","parentPlaneMask","INSIDE","mask","isShape2D","PrepareRendererPlugin","toSync","handleAttributeChanged","handleBoundsChanged","handleMounted","handleUnmounted","MOUNTED","UNMOUNTED","syncRTree","bulk","isCanvas","CanvasEvent","DEFAULT_CAMERA_Z","DEFAULT_CAMERA_NEAR","DEFAULT_CAMERA_FAR","mountedEvent","unmountedEvent","beforeRenderEvent","BEFORE_RENDER","rerenderEvent","RERENDER","afterRenderEvent","AFTER_RENDER","Canvas","devicePixelRatio","background","createImage","supportsPointerEvents","supportsMutipleCanvasesInOneContainer","canvasWidth","canvasHeight","dpr","bind","PointerEvent","TouchEvent","MouseEvent","initRenderingContext","initDefaultCamera","initRenderer","mergedConfig","getRoot","getRenderingContext","readyPromise","resolve","resolveReadyPromise","cleanUp","skipTriggerEvent","BEFORE_DESTROY","frameId","cancelRAF","AFTER_DESTROY","changeSize","resize","RESIZE","run","tick","firstContentfullPaint","loadRendererContainerModule","ContextService","initRenderingService","async","READY","RENDERER_CHANGED","setRenderer","oldRenderer","reverse","disconnectedCallback","connectedCallback","getPointByClient","getClientByPoint"],"sources":["/Users/abhaymalsatar/Office/dashboard/node_modules/node_modules/.pnpm/rbush@3.0.1/node_modules/rbush/rbush.js","../src/packages/g-lite/src/types.ts","../src/packages/g-lite/src/AbstractRenderer.ts","../src/packages/g-lite/src/utils/math.ts","../src/packages/g-lite/src/shapes/AABB.ts","../src/packages/g-lite/src/shapes/Plane.ts","../src/packages/g-lite/src/shapes/Frustum.ts","../src/packages/g-lite/src/shapes/Point.ts","../src/packages/g-lite/src/shapes/Rectangle.ts","../src/packages/g-lite/src/utils/error.ts","../src/packages/g-lite/src/camera/interfaces.ts","../src/packages/g-lite/src/camera/Camera.ts","../src/packages/g-lite/src/utils/memoize.ts","../src/packages/g-lite/src/css/cssom/types.ts","../src/packages/g-lite/src/css/cssom/CSSStyleValue.ts","../src/packages/g-lite/src/css/cssom/CSSColorValue.ts","../src/packages/g-lite/src/css/cssom/CSSGradientValue.ts","../src/packages/g-lite/src/css/cssom/CSSKeywordValue.ts","../src/packages/g-lite/src/utils/string.ts","../src/packages/g-lite/src/utils/assert.ts","../src/packages/g-lite/src/css/cssom/CSSNumericValue.ts","../src/packages/g-lite/src/css/cssom/CSSRGB.ts","../src/packages/g-lite/src/css/CSSStyleValuePool.ts","../src/packages/g-lite/src/components/Cullable.ts","../src/packages/g-lite/src/components/Sortable.ts","../src/packages/g-lite/src/display-objects/constants.ts","../src/packages/g-lite/src/css/interfaces.ts","../src/packages/g-lite/src/utils/gradient.ts","../src/packages/g-lite/src/css/parser/gradient.ts","../src/packages/g-lite/src/css/parser/color.ts","../src/packages/g-lite/src/css/parser/dimension.ts","../src/packages/g-lite/src/css/parser/filter.ts","../src/packages/g-lite/src/css/parser/numeric.ts","../src/packages/g-lite/src/utils/path.ts","../src/packages/g-lite/src/css/parser/path.ts","../src/packages/g-lite/src/css/parser/points.ts","../src/packages/g-lite/src/css/parser/transform.ts","../src/packages/g-lite/src/css/parser/transform-origin.ts","../src/packages/g-lite/src/css/StyleValueRegistry.ts","../src/packages/g-lite/src/css/properties/CSSPropertyAngle.ts","../src/packages/g-lite/src/css/properties/CSSPropertyClipPath.ts","../src/packages/g-lite/src/css/properties/CSSPropertyColor.ts","../src/packages/g-lite/src/css/properties/CSSPropertyFilter.ts","../src/packages/g-lite/src/css/properties/CSSPropertyLengthOrPercentage.ts","../src/packages/g-lite/src/css/properties/CSSPropertyLengthOrPercentage12.ts","../src/packages/g-lite/src/css/properties/CSSPropertyLengthOrPercentage14.ts","../src/packages/g-lite/src/utils/transform-mat4.ts","../src/packages/g-lite/src/css/properties/CSSPropertyLocalPosition.ts","../src/packages/g-lite/src/css/properties/CSSPropertyMarker.ts","../src/packages/g-lite/src/css/properties/CSSPropertyNumber.ts","../src/packages/g-lite/src/css/properties/CSSPropertyOffsetDistance.ts","../src/packages/g-lite/src/css/properties/CSSPropertyOpacity.ts","../src/packages/g-lite/src/css/properties/CSSPropertyPath.ts","../src/packages/g-lite/src/css/properties/CSSPropertyPoints.ts","../src/packages/g-lite/src/css/properties/CSSPropertyShadowBlur.ts","../src/packages/g-lite/src/css/properties/CSSPropertyText.ts","../src/packages/g-lite/src/css/properties/CSSPropertyTextTransform.ts","../src/packages/g-lite/src/utils/canvas.ts","../src/packages/g-lite/src/utils/dom.ts","../src/packages/g-lite/src/utils/event.ts","../src/packages/g-lite/src/utils/pointer-events.ts","../src/packages/g-lite/src/utils/raf.ts","../src/packages/g-lite/src/utils/tapable/AsyncParallelHook.ts","../src/packages/g-lite/src/utils/tapable/AsyncSeriesWaterfallHook.ts","../src/packages/g-lite/src/utils/tapable/SyncHook.ts","../src/packages/g-lite/src/utils/tapable/SyncWaterfallHook.ts","../src/packages/g-lite/src/utils/text.ts","../src/packages/g-lite/src/css/properties/CSSPropertyTransform.ts","../src/packages/g-lite/src/css/properties/CSSPropertyTransformOrigin.ts","../src/packages/g-lite/src/css/properties/CSSPropertyZIndex.ts","../src/packages/g-lite/src/services/aabb/CircleUpdater.ts","../src/packages/g-lite/src/services/aabb/EllipseUpdater.ts","../src/packages/g-lite/src/services/aabb/LineUpdater.ts","../src/packages/g-lite/src/services/aabb/PathUpdater.ts","../src/packages/g-lite/src/services/aabb/PolylineUpdater.ts","../src/packages/g-lite/src/services/aabb/RectUpdater.ts","../src/packages/g-lite/src/services/aabb/TextUpdater.ts","../src/packages/g-lite/src/dom/FederatedEvent.ts","../src/packages/g-lite/src/dom/FederatedMouseEvent.ts","../src/packages/g-lite/src/dom/FederatedPointerEvent.ts","../src/packages/g-lite/src/dom/FederatedWheelEvent.ts","../src/packages/g-lite/src/dom/CustomEvent.ts","../src/packages/g-lite/src/dom/EventTarget.ts","../src/packages/g-lite/src/dom/Node.ts","../src/packages/g-lite/src/services/EventService.ts","../src/packages/g-lite/src/services/OffscreenCanvasCreator.ts","../src/packages/g-lite/src/services/RenderingContext.ts","../src/packages/g-lite/src/services/RenderingService.ts","../src/packages/g-lite/src/services/SceneGraphSelector.ts","../src/packages/g-lite/src/dom/MutationEvent.ts","../src/packages/g-lite/src/dom/interfaces.ts","../src/packages/g-lite/src/services/SceneGraphService.ts","../src/packages/g-lite/src/services/TextService.ts","../src/packages/g-lite/src/global-runtime.ts","../src/packages/g-lite/src/dom/Element.ts","../src/packages/g-lite/src/display-objects/DisplayObject.ts","../src/packages/g-lite/src/css/CSS.ts","../src/packages/g-lite/src/display-objects/Circle.ts","../src/packages/g-lite/src/display-objects/CustomElement.ts","../src/packages/g-lite/src/display-objects/Ellipse.ts","../src/packages/g-lite/src/display-objects/Group.ts","../src/packages/g-lite/src/display-objects/HTML.ts","../src/packages/g-lite/src/display-objects/Image.ts","../src/packages/g-lite/src/display-objects/Line.ts","../src/packages/g-lite/src/display-objects/Path.ts","../src/packages/g-lite/src/display-objects/Polygon.ts","../src/packages/g-lite/src/display-objects/Polyline.ts","../src/packages/g-lite/src/display-objects/Rect.ts","../src/packages/g-lite/src/display-objects/Text.ts","../src/packages/g-lite/src/dom/CustomElementRegistry.ts","../src/packages/g-lite/src/dom/Document.ts","../src/packages/g-lite/src/plugins/CullingPlugin.ts","../src/packages/g-lite/src/plugins/EventPlugin.ts","../src/packages/g-lite/src/plugins/FrustumCullingStrategy.ts","../src/packages/g-lite/src/plugins/PrepareRendererPlugin.ts","../src/packages/g-lite/src/Canvas.ts"],"sourcesContent":["(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.RBush = factory());\n}(this, function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"mappings":"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C,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EACtDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EACvDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,EAEvDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EACxDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,EACxDD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,EAAE,CAAC,GAAGC,CAAC,CAAC,EAAE,CAAC,GAAGD,CAAC,CAAC,EA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}